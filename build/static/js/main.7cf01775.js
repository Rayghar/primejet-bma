/*! For license information please see main.7cf01775.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},153:(e,t,n)=>{"use strict";var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,s)&&!S.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:E.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+T(l,0):i,x(a)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),I(a,t,s,"",function(e){return e})):null!=a&&(N(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",x(e))for(var c=0;c<e.length;c++){var u=i+T(o=e[c],c);l+=I(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,s,u=i+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],s=0;return I(e,r,"","",function(e){return t.call(n,e,s++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},D={transition:null},P={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=E.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return j.current.useCallback(e,t)},t.useContext=function(e){return j.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return j.current.useDeferredValue(e)},t.useEffect=function(e,t){return j.current.useEffect(e,t)},t.useId=function(){return j.current.useId()},t.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.current.useMemo(e,t)},t.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},t.useRef=function(e){return j.current.useRef(e)},t.useState=function(e){return j.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,D(_);else{var t=r(u);null!==t&&P(x,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,v(N),N=-1),p=!0;var i=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(c)&&s(c),w(n)}else s(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&P(x,h.startTime-n),l=!1}return l}finally{d=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,k=null,N=-1,C=5,T=-1;function I(){return!(t.unstable_now()-T<C)}function A(){if(null!==k){var e=t.unstable_now();T=e;var n=!0;try{n=k(!0,e)}finally{n?E():(S=!1,k=null)}}else S=!1}if("function"===typeof b)E=function(){b(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,j=R.port2;R.port1.onmessage=A,E=function(){j.postMessage(null)}}else E=function(){y(A,0)};function D(e){k=e,S||(S=!0,E())}function P(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(N),N=-1):g=!0,P(x,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,D(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{"use strict";e.exports=n(153)},730:(e,t,n)=>{"use strict";var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var O,L=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var V=!1;function U(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case _:return"Portal";case k:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function W(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&W(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ie(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ee=null,Se=null;function ke(e){if(e=bs(e)){if("function"!==typeof _e)throw Error(i(280));var t=e.stateNode;t&&(t=xs(t),_e(e.stateNode,e.type,t))}}function Ne(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Te(e,t){return e(t)}function Ie(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Te(e,t,n)}finally{Ae=!1,(null!==Ee||null!==Se)&&(Ie(),Ce())}}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=xs(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var De=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){De=!1}function Me(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Le=null,Fe=!1,Ve=null,Ue={onError:function(e){Oe=!0,Le=e}};function ze(e,t,n,r,s,i,a,o,l){Oe=!1,Le=null,Me.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return qe(s),e;if(a===r)return qe(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=s.unstable_scheduleCallback,We=s.unstable_cancelCallback,Qe=s.unstable_shouldYield,Ye=s.unstable_requestPaint,Je=s.unstable_now,Xe=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=ht(o):0!==(i&=a)&&(r=ht(i))}else 0!==(a=n&~s)?r=ht(a):0!==i&&(r=ht(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,Et,St,kt,Nt=!1,Ct=[],Tt=null,It=null,At=null,Rt=new Map,jt=new Map,Dt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(t.pointerId)}}function Ot(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Lt(e){var t=vs(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void kt(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Nt=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==It&&Ft(It)&&(It=null),null!==At&&Ft(At)&&(At=null),Rt.forEach(Vt),jt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==It&&zt(It,e),null!==At&&zt(At,e),Rt.forEach(t),jt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Dt.shift()}var $t=w.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var s=bt,i=$t.transition;$t.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=s,$t.transition=i}}function Kt(e,t,n,r){var s=bt,i=$t.transition;$t.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=s,$t.transition=i}}function Gt(e,t,n,r){if(qt){var s=Qt(e,t,n,r);if(null===s)qr(e,t,r,Wt,n),Mt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Tt=Ot(Tt,e,t,n,r,s),!0;case"dragenter":return It=Ot(It,e,t,n,r,s),!0;case"mouseover":return At=Ot(At,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Rt.set(i,Ot(Rt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,jt.set(i,Ot(jt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==s;){var i=bs(s);if(null!==i&&xt(i),null===(i=Qt(e,t,n,r))&&qr(e,t,r,Wt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Wt=null;function Qt(e,t,n,r){if(Wt=null,null!==(e=vs(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,s="value"in Jt?Jt.value:Jt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=L({},cn,{view:0,detail:0}),dn=sn(hn),fn=L({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(L({},fn,{dataTransfer:0})),gn=sn(L({},hn,{relatedTarget:0})),yn=sn(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(L({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function kn(){return Sn}var Nn=L({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Nn),Tn=sn(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(L({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),An=sn(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=sn(Rn),Dn=[9,13,27,32],Pn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var On=u&&"TextEvent"in window&&!Mn,Ln=u&&(!Pn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),Vn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Hn(e,t,n,r){Ne(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Wn(e){Fr(e,0)}function Qn(e){if(G(ws(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Hn(t,Gn,e,xe(e)),Re(Wn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function ir(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!h.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=W((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var a=ur(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==W(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Er={},Sr={};function kr(e){if(Er[e])return Er[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Nr=kr("animationend"),Cr=kr("animationiteration"),Tr=kr("animationstart"),Ir=kr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Ar.set(e,t),l(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Pr=Rr[Dr];jr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}jr(Nr,"onAnimationEnd"),jr(Cr,"onAnimationIteration"),jr(Tr,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(ze.apply(this,arguments),Oe){if(!Oe)throw Error(i(198));var u=Le;Oe=!1,Le=null,Fe||(Fe=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Lr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Lr(s,o,c),i=l}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Or.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Ur("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Yt(t)){case 1:var s=Ht;break;case 4:s=Kt;break;default:s=Gt}n=s.bind(null,t,n,e),s=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=vs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Re(function(){var r=i,s=xe(n),a=[];e:{var o=Ar.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Nr:case Cr:case Tr:l=yn;break;case Ir:l=An;break;case"scroll":l=dn;break;case"wheel":l=jn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=je(p,d))&&u.push(Hr(p,m,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ps])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:ws(l),f=null==c?o:ws(c),(o=new u(m,p+"leave",l,n,s)).target=h,o.relatedTarget=f,m=null,vs(s)===r&&((u=new u(d,p+"enter",c,n,s)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Wr(a,o,l,u,!1),null!==c&&null!==h&&Wr(a,h,c,u,!0)}if("select"===(l=(o=r?ws(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(qn(o))if(Jn)g=ar;else{g=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?ws(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,s);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(a,n,s)}var v;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Xt="value"in(Jt=s)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new wn(b,e,null,n,s),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=On?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Pn&&Un(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(s=new wn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Fr(a,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=je(e,n))&&r.unshift(Hr(e,i,s)),null!=(i=je(e,t))&&r.push(Hr(e,i,s))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=je(n,i))&&a.unshift(Hr(n,l,o)):s||null!=(l=je(n,i))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Bt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),ds="__reactFiber$"+hs,fs="__reactProps$"+hs,ps="__reactContainer$"+hs,ms="__reactEvents$"+hs,gs="__reactListeners$"+hs,ys="__reactHandles$"+hs;function vs(e){var t=e[ds];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ps]||n[ds]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[ds])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[ds]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ws(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function xs(e){return e[fs]||null}var _s=[],Es=-1;function Ss(e){return{current:e}}function ks(e){0>Es||(e.current=_s[Es],_s[Es]=null,Es--)}function Ns(e,t){Es++,_s[Es]=e.current,e.current=t}var Cs={},Ts=Ss(Cs),Is=Ss(!1),As=Cs;function Rs(e,t){var n=e.type.contextTypes;if(!n)return Cs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function js(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ds(){ks(Is),ks(Ts)}function Ps(e,t,n){if(Ts.current!==Cs)throw Error(i(168));Ns(Ts,t),Ns(Is,n)}function Ms(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,$(e)||"Unknown",s));return L({},n,r)}function Os(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,As=Ts.current,Ns(Ts,e),Ns(Is,Is.current),!0}function Ls(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ms(e,t,As),r.__reactInternalMemoizedMergedChildContext=e,ks(Is),ks(Ts),Ns(Ts,e)):ks(Is),Ns(Is,n)}var Fs=null,Vs=!1,Us=!1;function zs(e){null===Fs?Fs=[e]:Fs.push(e)}function Bs(){if(!Us&&null!==Fs){Us=!0;var e=0,t=bt;try{var n=Fs;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,Vs=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Ge(Ze,Bs),s}finally{bt=t,Us=!1}}return null}var $s=[],qs=0,Hs=null,Ks=0,Gs=[],Ws=0,Qs=null,Ys=1,Js="";function Xs(e,t){$s[qs++]=Ks,$s[qs++]=Hs,Hs=e,Ks=t}function Zs(e,t,n){Gs[Ws++]=Ys,Gs[Ws++]=Js,Gs[Ws++]=Qs,Qs=e;var r=Ys;e=Js;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ys=1<<32-at(t)+s|n<<s|r,Js=i+e}else Ys=1<<i|n<<s|r,Js=e}function ei(e){null!==e.return&&(Xs(e,1),Zs(e,1,0))}function ti(e){for(;e===Hs;)Hs=$s[--qs],$s[qs]=null,Ks=$s[--qs],$s[qs]=null;for(;e===Qs;)Qs=Gs[--Ws],Gs[Ws]=null,Js=Gs[--Ws],Gs[Ws]=null,Ys=Gs[--Ws],Gs[Ws]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qs?{id:Ys,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function hi(e){if(e!==ni)return!1;if(!si)return ui(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw di(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function di(){for(var e=ri;e;)e=cs(e.nextSibling)}function fi(){ri=ni=null,si=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=w.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===j&&vi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case j:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===s?c(e,t,n,r):null;case _:return n.key===s?u(e,t,n,r):null;case j:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||M(n))return null!==s?null:h(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case j:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function m(s,i,o,l){for(var c=null,u=null,h=i,m=i=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(s,h,o[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(s,h),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===o.length)return n(s,h),si&&Xs(s,m),c;if(null===h){for(;m<o.length;m++)null!==(h=d(s,o[m],l))&&(i=a(h,i,m),null===u?c=h:u.sibling=h,u=h);return si&&Xs(s,m),c}for(h=r(s,h);m<o.length;m++)null!==(g=p(h,s,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(s,e)}),si&&Xs(s,m),c}function g(s,o,l,c){var u=M(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var h=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(s,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(s,m),o=a(b,o,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return n(s,m),si&&Xs(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(s,v.value,c))&&(o=a(v,o,g),null===h?u=v:h.sibling=v,h=v);return si&&Xs(s,g),u}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(s,e)}),si&&Xs(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===j&&vi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=gi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===E?((i=Mc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Pc(a.type,a.key,a.props,null,r.mode,l)).ref=gi(r,i,a),l.return=r,r=l)}return o(r);case _:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fc(a,r.mode,l)).return=r,r=i}return o(r);case j:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(M(a))return g(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Lc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var wi=bi(!0),xi=bi(!1),_i=Ss(null),Ei=null,Si=null,ki=null;function Ni(){ki=Si=Ei=null}function Ci(e){var t=_i.current;ks(_i),e._currentValue=t}function Ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ii(e,t){Ei=e,ki=Si=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ai(e){var t=e._currentValue;if(ki!==e)if(e={context:e,memoizedValue:t,next:null},null===Si){if(null===Ei)throw Error(i(308));Si=e,Ei.dependencies={lanes:0,firstContext:e}}else Si=Si.next=e;return t}var Ri=null;function ji(e){null===Ri?Ri=[e]:Ri.push(e)}function Di(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,ji(t)):(n.next=s.next,s.next=n),t.interleaved=n,Pi(e,r)}function Pi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mi=!1;function Oi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Pi(e,n)}return null===(s=r.interleaved)?(t.next=t,ji(r)):(t.next=s.next,s.next=t),r.interleaved=t,Pi(e,n)}function Ui(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bi(e,t,n,r){var s=e.updateQueue;Mi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var h=s.baseState;for(a=0,u=c=l=null,o=i;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=L({},h,d);break e;case 2:Mi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=s.effects)?s.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(d=o).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===u&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=h}}function $i(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var qi={},Hi=Ss(qi),Ki=Ss(qi),Gi=Ss(qi);function Wi(e){if(e===qi)throw Error(i(174));return e}function Qi(e,t){switch(Ns(Gi,t),Ns(Ki,e),Ns(Hi,qi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ks(Hi),Ns(Hi,t)}function Yi(){ks(Hi),ks(Ki),ks(Gi)}function Ji(e){Wi(Gi.current);var t=Wi(Hi.current),n=le(t,e.type);t!==n&&(Ns(Ki,e),Ns(Hi,n))}function Xi(e){Ki.current===e&&(ks(Hi),ks(Ki))}var Zi=Ss(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=w.ReactCurrentDispatcher,sa=w.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,ua=!1,ha=0,da=0;function fa(){throw Error(i(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,s,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Xa:Za,e=n(r,s),ua){a=0;do{if(ua=!1,ha=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,s)}while(ua)}if(ra.current=Ja,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ga(){var e=0!==ha;return ha=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function va(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=oa,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((ia&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=r):c=c.next=d,aa.lanes|=h,Ol|=h}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Ol|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function _a(){}function Ea(e,t){var n=aa,r=va(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,bo=!0),r=r.queue,Ma(Na.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Aa(9,ka.bind(null,n,r,s,t),void 0,null),null===Il)throw Error(i(349));0!==(30&ia)||Sa(n,t,s)}return s}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ka(e,t,n,r){t.value=n,t.getSnapshot=r,Ca(t)&&Ta(e)}function Na(e,t,n){return n(function(){Ca(t)&&Ta(e)})}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ta(e){var t=Pi(e,1);null!==t&&nc(t,e,1,-1)}function Ia(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ra(){return va().memoizedState}function ja(e,t,n,r){var s=ya();aa.flags|=e,s.memoizedState=Aa(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var s=va();r=void 0===r?null:r;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==r&&pa(r,a.deps))return void(s.memoizedState=Aa(t,n,i,r))}aa.flags|=e,s.memoizedState=Aa(1|t,n,i,r)}function Pa(e,t){return ja(8390656,8,e,t)}function Ma(e,t){return Da(2048,8,e,t)}function Oa(e,t){return Da(4,2,e,t)}function La(e,t){return Da(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4,4,Fa.bind(null,t,e),n)}function Ua(){}function za(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ba(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $a(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Ol|=n,e.baseState=!0),t)}function qa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=r}}function Ha(){return va().memoizedState}function Ka(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wa(e))Qa(t,n);else if(null!==(n=Di(e,t,n,r))){nc(n,e,r,ec()),Ya(n,t,r)}}function Ga(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wa(e))Qa(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,ji(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Di(e,t,s,r))&&(nc(n,e,r,s=ec()),Ya(n,t,r))}}function Wa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Qa(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ya(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Ja={readContext:Ai,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Xa={readContext:Ai,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Ai,useEffect:Pa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ja(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ia,useDebugValue:Ua,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ia(!1),t=e[0];return e=qa.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,s=ya();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Il)throw Error(i(349));0!==(30&ia)||Sa(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Pa(Na.bind(null,r,a,e),[e]),r.flags|=2048,Aa(9,ka.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Il.identifierPrefix;if(si){var n=Js;t=":"+t+"R"+(n=(Ys&~(1<<32-at(Ys)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ai,useCallback:za,useContext:Ai,useEffect:Ma,useImperativeHandle:Va,useInsertionEffect:Oa,useLayoutEffect:La,useMemo:Ba,useReducer:wa,useRef:Ra,useState:function(){return wa(ba)},useDebugValue:Ua,useDeferredValue:function(e){return $a(va(),oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],va().memoizedState]},useMutableSource:_a,useSyncExternalStore:Ea,useId:Ha,unstable_isNewReconciler:!1},eo={readContext:Ai,useCallback:za,useContext:Ai,useEffect:Ma,useImperativeHandle:Va,useInsertionEffect:Oa,useLayoutEffect:La,useMemo:Ba,useReducer:xa,useRef:Ra,useState:function(){return xa(ba)},useDebugValue:Ua,useDeferredValue:function(e){var t=va();return null===oa?t.memoizedState=e:$a(t,oa.memoizedState,e)},useTransition:function(){return[xa(ba)[0],va().memoizedState]},useMutableSource:_a,useSyncExternalStore:Ea,useId:Ha,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Fi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Vi(e,i,s))&&(nc(t,e,s,r),Ui(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Fi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Vi(e,i,s))&&(nc(t,e,s,r),Ui(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=Fi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Vi(e,s,r))&&(nc(t,e,r,n),Ui(t,e,r))}};function so(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function io(e,t,n){var r=!1,s=Cs,i=t.contextType;return"object"===typeof i&&null!==i?i=Ai(i):(s=js(t)?As:Ts.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Rs(e,s):Cs),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Oi(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ai(i):(i=js(t)?As:Ts.current,s.context=Rs(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),Bi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Hl=r),uo(0,t)},n}function po(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Vi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var vo=w.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?xi(t,null,n,r):wi(t,e.child,n,r)}function xo(e,t,n,r,s){n=n.render;var i=t.ref;return Ii(t,s),r=ma(e,t,n,r,i,s),n=ga(),null===e||bo?(si&&n&&ei(t),t.flags|=1,wo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qo(e,t,s))}function _o(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||jc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Eo(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return qo(e,t,s)}return t.flags|=1,(e=Dc(i,r)).ref=t.ref,e.return=t,t.child=e}function Eo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,qo(e,t,s);0!==(131072&e.flags)&&(bo=!0)}}return No(e,t,n,r,s)}function So(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ns(Dl,jl),jl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ns(Dl,jl),jl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ns(Dl,jl),jl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ns(Dl,jl),jl|=r;return wo(e,t,s,n),t.child}function ko(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,n,r,s){var i=js(n)?As:Ts.current;return i=Rs(t,i),Ii(t,s),n=ma(e,t,n,r,i,s),r=ga(),null===e||bo?(si&&r&&ei(t),t.flags|=1,wo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qo(e,t,s))}function Co(e,t,n,r,s){if(js(n)){var i=!0;Os(t)}else i=!1;if(Ii(t,s),null===t.stateNode)$o(e,t),io(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ai(c):c=Rs(t,c=js(n)?As:Ts.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Mi=!1;var d=t.memoizedState;a.state=d,Bi(t,r,a,s),l=t.memoizedState,o!==r||d!==l||Is.current||Mi?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Mi||so(t,n,o,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Li(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ai(l):l=Rs(t,l=js(n)?As:Ts.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&ao(t,a,r,l),Mi=!1,d=t.memoizedState,a.state=d,Bi(t,r,a,s);var p=t.memoizedState;o!==h||d!==p||Is.current||Mi?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=Mi||so(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return To(e,t,n,r,i,s)}function To(e,t,n,r,s,i){ko(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ls(t,n,!1),qo(e,t,i);r=t.stateNode,vo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=wi(t,e.child,null,i),t.child=wi(t,null,o,i)):wo(e,t,o,i),t.memoizedState=r.state,s&&Ls(t,n,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Ps(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ps(0,t.context,!1),Qi(e,t.containerInfo)}function Ao(e,t,n,r,s){return fi(),pi(s),t.flags|=256,wo(e,t,n,r),t.child}var Ro,jo,Do,Po,Mo={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var r,s=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ns(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Oc(l,s,0,null),e=Mc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(n),t.memoizedState=Mo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Vo(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Oc({mode:"visible",children:r.children},s,0,null),(a=Mc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&wi(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=Mo,a);if(0===(1&t.mode))return Vo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Vo(e,t,o,r=co(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Il)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Pi(e,s),nc(r,e,s,-1))}return mc(),Vo(e,t,o,r=co(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Gs[Ws++]=Ys,Gs[Ws++]=Js,Gs[Ws++]=Qs,Ys=e.id,Js=e.overflow,Qs=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Dc(r,o):(o=Mc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Oo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,s}return e=(o=e.child).sibling,s=Dc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Fo(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vo(e,t,n,r){return null!==r&&pi(r),wi(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ti(e.return,t,n)}function zo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Bo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ns(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),zo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}zo(t,!0,n,null,i);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $o(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return js(t.type)&&Ds(),Ko(t),null;case 3:return r=t.stateNode,Yi(),ks(Is),ks(Ts),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ac(ii),ii=null))),jo(e,t),Ko(t),null;case 5:Xi(t);var s=Wi(Gi.current);if(n=t.type,null!==e&&null!=t.stateNode)Do(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ko(t),null}if(e=Wi(Hi.current),hi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ds]=t,r[fs]=a,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(s=0;s<Mr.length;s++)Vr(Mr[s],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Y(r,a),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Vr("invalid",r);break;case"textarea":se(r,a),Vr("invalid",r)}for(var l in ve(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ds]=t,e[fs]=r,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),s=r;break;case"iframe":case"object":case"embed":Vr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Mr.length;s++)Vr(Mr[s],e);s=r;break;case"source":Vr("error",e),s=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),s=r;break;case"details":Vr("toggle",e),s=r;break;case"input":Y(e,r),s=Q(e,r),Vr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=L({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Vr("invalid",e)}for(a in ve(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Vr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Po(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Wi(Gi.current),Wi(Hi.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ds]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ds]=t,t.stateNode=r}return Ko(t),null;case 13:if(ks(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))di(),fi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[ds]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),a=!1}else null!==ii&&(ac(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Pl&&(Pl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Yi(),jo(e,t),null===e&&Br(t.stateNode.containerInfo),Ko(t),null;case 10:return Ci(t.type._context),Ko(t),null;case 19:if(ks(Zi),null===(a=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ho(a,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Ho(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ns(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Bl&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return Ko(t),null}else 2*Je()-a.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=Zi.current,Ns(Zi,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&jl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Wo(e,t){switch(ti(t),t.tag){case 1:return js(t.type)&&Ds(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yi(),ks(Is),ks(Ts),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xi(t),null;case 13:if(ks(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ks(Zi),null;case 4:return Yi(),null;case 10:return Ci(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},jo=function(){},Do=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Wi(Hi.current);var i,a=null;switch(n){case"input":s=Q(e,s),r=Q(e,r),a=[];break;case"select":s=L({},s,{value:void 0}),r=L({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Po=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qo=!1,Yo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&el(t,n,i)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ds],delete t[fs],delete t[ms],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Yo||Zo(n,t);case 6:var r=ul,s=hl;ul=null,dl(e,t,n),hl=s,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Bt(e)):ls(ul,n.stateNode));break;case 4:r=ul,s=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=s;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),s=s.next}while(s!==r)}dl(e,t,n);break;case 1:if(!Yo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sc(n,t,o)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,dl(e,t,n),Yo=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));fl(a,o,s),ul=null,hl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){Sc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(s,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?ge(s,d):"dangerouslySetInnerHTML"===h?he(s,d):"children"===h?de(s,d):b(s,h,d,u)}switch(l){case"input":X(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[fs]=a}catch(g){Sc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){Sc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(zl=Je())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(u=Yo)||h,ml(t,e),Yo=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Xo=e,h=e.child;null!==h;){for(d=Xo=h;null!==Xo;){switch(p=(f=Xo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,Xo=p):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{s=d.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Sc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(i(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xo;){var s=Xo,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Qo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Qo;var c=Yo;if(Qo=a,(Yo=l)&&!c)for(Xo=s;null!==Xo;)l=(a=Xo).child,22===a.tag&&null!==a.memoizedState?_l(s):null!==l?(l.return=a,Xo=l):_l(s);for(;null!==i;)Xo=i,bl(i,t,n),i=i.sibling;Xo=s,Qo=o,Yo=c}wl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Xo=i):wl(e)}}function wl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&$i(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}$i(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(i(163))}Yo||512&t.flags&&sl(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function xl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function _l(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){Sc(t,s,l)}}var i=t.return;try{sl(t)}catch(l){Sc(t,i,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){Sc(t,a,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var El,Sl=Math.ceil,kl=w.ReactCurrentDispatcher,Nl=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,Tl=0,Il=null,Al=null,Rl=0,jl=0,Dl=Ss(0),Pl=0,Ml=null,Ol=0,Ll=0,Fl=0,Vl=null,Ul=null,zl=0,Bl=1/0,$l=null,ql=!1,Hl=null,Kl=null,Gl=!1,Wl=null,Ql=0,Yl=0,Jl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Tl)?Je():-1!==Xl?Xl:Xl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Rl?Rl&-Rl:null!==mi.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(i(185));yt(e,n,r),0!==(2&Tl)&&e===Il||(e===Il&&(0===(2&Tl)&&(Ll|=n),4===Pl&&oc(e,Rl)),rc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Bl=Je()+500,Vs&&Bs()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=dt(e,e===Il?Rl:0);if(0===r)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){Vs=!0,zs(e)}(lc.bind(null,e)):zs(lc.bind(null,e)),as(function(){0===(6&Tl)&&Bs()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Xl=-1,Zl=0,0!==(6&Tl))throw Error(i(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=dt(e,e===Il?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var s=Tl;Tl|=2;var a=pc();for(Il===e&&Rl===t||($l=null,Bl=Je()+500,dc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ni(),kl.current=a,Tl=s,null!==Al?t=0:(Il=null,Rl=0,t=Pl)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(r=s,t=ic(e,s))),1===t)throw n=Ml,dc(e,0),oc(e,r),rc(e,Je()),n;if(6===t)oc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Ml,dc(e,0),oc(e,r),rc(e,Je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:xc(e,Ul,$l);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=zl+500-Je())){if(0!==dt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(xc.bind(null,e,Ul,$l),t);break}xc(e,Ul,$l);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=rs(xc.bind(null,e,Ul,$l),r);break}xc(e,Ul,$l);break;default:throw Error(i(329))}}}return rc(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function ic(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Tl))throw Error(i(327));_c();var t=dt(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ml,dc(e,0),oc(e,t),rc(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ul,$l),rc(e,Je()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Bl=Je()+500,Vs&&Bs())}}function uc(e){null!==Wl&&0===Wl.tag&&0===(6&Tl)&&_c();var t=Tl;Tl|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(Tl=t))&&Bs()}}function hc(){jl=Dl.current,ks(Dl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ds();break;case 3:Yi(),ks(Is),ks(Ts),na();break;case 5:Xi(r);break;case 4:Yi();break;case 13:case 19:ks(Zi);break;case 10:Ci(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Il=e,Al=e=Dc(e.current,null),Rl=jl=t,Pl=0,Ml=null,Fl=Ll=Ol=0,Ul=Vl=null,null!==Ri){for(t=0;t<Ri.length;t++)if(null!==(r=(n=Ri[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Ri=null}return e}function fc(e,t){for(;;){var n=Al;try{if(Ni(),ra.current=Ja,ca){for(var r=aa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ca=!1}if(ia=0,la=oa=aa=null,ua=!1,ha=0,Nl.current=null,null===n||null===n.return){Pl=1,Ml=t,Al=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,yo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),mc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),pi(lo(c,l));break e}}a=c=lo(c,l),4!==Pl&&(Pl=2),null===Vl?Vl=[a]:Vl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zi(a,fo(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zi(a,po(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(w){t=w,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function pc(){var e=kl.current;return kl.current=Ja,null===e?Ja:e}function mc(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Il||0===(268435455&Ol)&&0===(268435455&Ll)||oc(Il,Rl)}function gc(e,t){var n=Tl;Tl|=2;var r=pc();for(Il===e&&Rl===t||($l=null,dc(e,t));;)try{yc();break}catch(s){fc(e,s)}if(Ni(),Tl=n,kl.current=r,null!==Al)throw Error(i(261));return Il=null,Rl=0,Pl}function yc(){for(;null!==Al;)bc(Al)}function vc(){for(;null!==Al&&!Qe();)bc(Al)}function bc(e){var t=El(e.alternate,e,jl);e.memoizedProps=e.pendingProps,null===t?wc(e):Al=t,Nl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,jl)))return void(Al=n)}else{if(null!==(n=Wo(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Pl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Pl&&(Pl=5)}function xc(e,t,n){var r=bt,s=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Wl);if(0!==(6&Tl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Il&&(Al=Il=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ic(tt,function(){return _c(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=bt;bt=1;var l=Tl;Tl|=4,Nl.current=null,function(e,t){if(es=qt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==s&&3!==d.nodeType||(l=o+s),d!==a||0!==r&&3!==d.nodeType||(c=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++h===r&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},qt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(x){Sc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ts),qt=!!es,ts=es=null,e.current=n,vl(n,e,s),Ye(),Tl=l,bt=o,Cl.transition=a}else e.current=n;if(Gl&&(Gl=!1,Wl=e,Ql=s),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ql)throw ql=!1,e=Hl,Hl=null,e;0!==(1&Ql)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,Bs()}(e,t,n,r)}finally{Cl.transition=s,bt=r}return null}function _c(){if(null!==Wl){var e=wt(Ql),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Wl)var r=!1;else{if(e=Wl,Wl=null,Ql=0,0!==(6&Tl))throw Error(i(331));var s=Tl;for(Tl|=4,Xo=e.current;null!==Xo;){var a=Xo,o=a.child;if(0!==(16&Xo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xo=u;null!==Xo;){var h=Xo;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Xo=d;else for(;null!==Xo;){var f=(h=Xo).sibling,p=h.return;if(il(h),h===u){Xo=null;break}if(null!==f){f.return=p,Xo=f;break}Xo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(a=Xo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Xo=v;break e}Xo=a.return}}var b=e.current;for(Xo=b;null!==Xo;){var w=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Xo=w;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Sc(l,l.return,_)}if(l===o){Xo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Xo=x;break e}Xo=l.return}}if(Tl=s,Bs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(_){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function Ec(e,t,n){e=Vi(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Vi(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Rl&n)===n&&(4===Pl||3===Pl&&(130023424&Rl)===Rl&&500>Je()-zl?dc(e,0):Fl|=n),rc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Pi(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Nc(e,n)}function Ic(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function jc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)jc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case E:return Mc(n.children,s,a,t);case S:o=8,s|=8;break;case k:return(e=Rc(12,n,t,2|s)).elementType=k,e.lanes=a,e;case I:return(e=Rc(13,n,t,s)).elementType=I,e.lanes=a,e;case A:return(e=Rc(19,n,t,s)).elementType=A,e.lanes=a,e;case D:return Oc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case C:o=9;break e;case T:o=11;break e;case R:o=14;break e;case j:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Rc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,s,i,a,o,l){return e=new Vc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oi(i),e}function zc(e){if(!e)return Cs;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(js(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(js(n))return Ms(e,n,t)}return t}function Bc(e,t,n,r,s,i,a,o,l){return(e=Uc(n,r,!0,e,0,i,0,o,l)).context=zc(null),n=e.current,(i=Fi(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Vi(n,i,s),e.current.lanes=s,yt(e,s,r),rc(e,r),e}function $c(e,t,n,r){var s=t.current,i=ec(),a=tc(s);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vi(s,t,a))&&(nc(e,s,a,i),Ui(e,s,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Is.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Io(t),fi();break;case 5:Ji(t);break;case 1:js(t.type)&&Os(t);break;case 4:Qi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ns(_i,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ns(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(Ns(Zi,1&Zi.current),null!==(e=qo(e,t,n))?e.sibling:null);Ns(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ns(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return qo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,si&&0!==(1048576&t.flags)&&Zs(t,Ks,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$o(e,t),e=t.pendingProps;var s=Rs(t,Ts.current);Ii(t,n),s=ma(null,t,r,e,s,n);var a=ga();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,js(r)?(a=!0,Os(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Oi(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=To(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),wo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch($o(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return jc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===R)return 14}return 2}(r),e=to(r,e),s){case 0:t=No(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=_o(null,t,r,to(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,No(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,Co(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(Io(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Li(e,t),Bi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ao(e,t,r,n,s=lo(Error(i(423)),t));break e}if(r!==s){t=Ao(e,t,r,n,s=lo(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=xi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=qo(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return Ji(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),ko(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Lo(e,t,n);case 4:return Qi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wi(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,xo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Ns(_i,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!Is.current){t=qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ti(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ti(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ii(t,n),r=r(s=Ai(s)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),_o(e,t,r,s=to(r.type,s),n);case 15:return Eo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),$o(e,t),t.tag=1,js(r)?(e=!0,Os(t)):e=!1,Ii(t,n),io(t,r,s),oo(t,r,s,n),To(null,t,r,!0,e,n);case 19:return Bo(e,t,n);case 22:return So(e,t,n)}throw Error(i(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Wc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=qc(a);o.call(e)}}$c(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=qc(a);i.call(e)}}var a=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=a,e[ps]=a.current,Br(8===e.nodeType?e.parentNode:e),uc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=qc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[ps]=l.current,Br(8===e.nodeType?e.parentNode:e),uc(function(){$c(t,l,n,r)}),l}(n,t,e,s,r);return qc(a)}Qc.prototype.render=Wc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));$c(e,t,null,null)},Qc.prototype.unmount=Wc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){$c(null,e,null,null)}),t[ps]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Lt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0===(6&Tl)&&(Bl=Je()+500,Bs()))}break;case 13:uc(function(){var t=Pi(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},_t=function(e){if(13===e.tag){var t=Pi(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=Pi(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},St=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=xs(r);if(!s)throw Error(i(90));G(r),X(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[bs,ws,xs,Ne,Ce,cc]},tu={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{st=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(i(299));var n=!1,r="",s=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,s),e[ps]=t.current,Br(8===e.nodeType?e.parentNode:e),new Wc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ps]=t.current,Br(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},766:function(e,t){var n,r,s;r=[],n=function e(){var t,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},r=!n.document&&!!n.postMessage,s=n.IS_PAPA_WORKER||!1,i={},a=0,o={};function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=b(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new f(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){let t=this._config.newline;t||(i=this._config.quoteChar||'"',t=this._handle.guessLineEndings(e,i)),e=[...e.split(t).slice(r)].join(t)}this.isFirstChunk&&x(this._config.beforeFirstChunk)&&void 0!==(i=this._config.beforeFirstChunk(e))&&(e=i),this.isFirstChunk=!1,this._halted=!1,r=this._partialLine+e;var i=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=i.meta.cursor,this._finished||(this._partialLine=r.substring(e-this._baseIndex),this._baseIndex=e),i&&i.data&&(this._rowCount+=i.data.length),r=this._finished||this._config.preview&&this._rowCount>=this._config.preview,s)n.postMessage({results:i,workerId:o.WORKER_ID,finished:r});else if(x(this._config.chunk)&&!t){if(this._config.chunk(i,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=i=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),this._completed||!r||!x(this._config.complete)||i&&i.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||i&&i.meta.paused||this._nextChunk(),i}this._halted=!0},this._sendError=function(e){x(this._config.error)?this._config.error(e):s&&this._config.error&&n.postMessage({workerId:o.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),l.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e,n=this._config.downloadRequestHeaders;for(e in n)t.setRequestHeader(e,n[e])}var s;this._config.chunkSize&&(s=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+s));try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(e=>null!==(e=e.getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(new Error(e))}}function u(e){(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),l.call(this,e);var t,n,r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,s=(this._config.chunkSize&&(s=Math.min(this._start+this._config.chunkSize,this._input.size),e=n.call(e,this._start,s)),t.readAsText(e,this._config.encoding));r||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function h(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,n;if(!this._finished)return e=this._config.chunkSize,t=e?(n=t.substring(0,e),t.substring(e)):(n=t,""),this._finished=!t,this.parseChunk(n)}}function d(e){l.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=w(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=w(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=w(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=w(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(e){var t,n,r,s,i=Math.pow(2,53),a=-i,l=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,c=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,u=this,h=0,d=0,f=!1,g=!1,y=[],v={data:[],errors:[],meta:{}};function w(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function _(){if(v&&r&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines&&(v.data=v.data.filter(function(e){return!w(e)})),E()){if(v)if(Array.isArray(v.data[0])){for(var t=0;E()&&t<v.data.length;t++)v.data[t].forEach(n);v.data.splice(0,1)}else v.data.forEach(n);function n(t,n){x(e.transformHeader)&&(t=e.transformHeader(t,n)),y.push(t)}}function s(t,n){for(var r=e.header?{}:[],s=0;s<t.length;s++){var o=s,u=t[s];u=((t,n)=>(t=>(e.dynamicTypingFunction&&void 0===e.dynamicTyping[t]&&(e.dynamicTyping[t]=e.dynamicTypingFunction(t)),!0===(e.dynamicTyping[t]||e.dynamicTyping)))(t)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&((e=>{if(l.test(e)&&(e=parseFloat(e),a<e&&e<i))return 1})(n)?parseFloat(n):c.test(n)?new Date(n):""===n?null:n):n)(o=e.header?s>=y.length?"__parsed_extra":y[s]:o,u=e.transform?e.transform(u,o):u),"__parsed_extra"===o?(r[o]=r[o]||[],r[o].push(u)):r[o]=u}return e.header&&(s>y.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+s,d+n):s<y.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+s,d+n)),r}var u;v&&(e.header||e.dynamicTyping||e.transform)&&(u=1,!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(s),u=v.data.length):v.data=s(v.data,0),e.header&&v.meta&&(v.meta.fields=y),d+=u)}function E(){return e.header&&0===y.length}function S(e,t,n,r){e={type:e,code:t,message:n},void 0!==r&&(e.row=r),v.errors.push(e)}x(e.step)&&(s=e.step,e.step=function(t){v=t,E()?_():(_(),0!==v.data.length&&(h+=t.data.length,e.preview&&h>e.preview?n.abort():(v.data=v.data[0],s(v,u))))}),this.parse=function(s,i,a){var l=e.quoteChar||'"';return e.newline||(e.newline=this.guessLineEndings(s,l)),r=!1,e.delimiter?x(e.delimiter)&&(e.delimiter=e.delimiter(s),v.meta.delimiter=e.delimiter):((l=((t,n,r,s,i)=>{var a,l,c,u;i=i||[",","\t","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var h=0;h<i.length;h++){for(var d,f=i[h],p=0,g=0,y=0,v=(c=void 0,new m({comments:s,delimiter:f,newline:n,preview:10}).parse(t)),b=0;b<v.data.length;b++)r&&w(v.data[b])?y++:(g+=d=v.data[b].length,void 0===c?c=d:0<d&&(p+=Math.abs(d-c),c=d));0<v.data.length&&(g/=v.data.length-y),(void 0===l||p<=l)&&(void 0===u||u<g)&&1.99<g&&(l=p,a=f,u=g)}return{successful:!!(e.delimiter=a),bestDelimiter:a}})(s,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=l.bestDelimiter:(r=!0,e.delimiter=o.DefaultDelimiter),v.meta.delimiter=e.delimiter),l=b(e),e.preview&&e.header&&l.preview++,t=s,n=new m(l),v=n.parse(t,i,a),_(),f?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return f},this.pause=function(){f=!0,n.abort(),t=x(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){u.streamer._halted?(f=!1,u.streamer.parseChunk(t,!0)):setTimeout(u.resume,3)},this.aborted=function(){return g},this.abort=function(){g=!0,n.abort(),v.meta.aborted=!0,x(e.complete)&&e.complete(v),t=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576),t=new RegExp(p(t)+"([^]*?)"+p(t),"gm");var n=(e=e.replace(t,"")).split("\r");if(e=1<(t=e.split("\n")).length&&t[0].length<n[0].length,1===n.length||e)return"\n";for(var r=0,s=0;s<n.length;s++)"\n"===n[s][0]&&r++;return r>=n.length/2?"\r\n":"\r"}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t=(e=e||{}).delimiter,n=e.newline,r=e.comments,s=e.step,i=e.preview,a=e.fastMode,l=null,c=!1,u=null==e.quoteChar?'"':e.quoteChar,h=u;if(void 0!==e.escapeChar&&(h=e.escapeChar),("string"!=typeof t||-1<o.BAD_DELIMITERS.indexOf(t))&&(t=","),r===t)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<o.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var d=0,f=!1;this.parse=function(o,m,g){if("string"!=typeof o)throw new Error("Input must be a string");var y=o.length,v=t.length,b=n.length,w=r.length,_=x(s),E=[],S=[],k=[],N=d=0;if(!o)return F();if(a||!1!==a&&-1===o.indexOf(u)){for(var C=o.split(n),T=0;T<C.length;T++){if(k=C[T],d+=k.length,T!==C.length-1)d+=n.length;else if(g)return F();if(!r||k.substring(0,w)!==r){if(_){if(E=[],P(k.split(t)),V(),f)return F()}else P(k.split(t));if(i&&i<=T)return E=E.slice(0,i),F(!0)}}return F()}for(var I=o.indexOf(t,d),A=o.indexOf(n,d),R=new RegExp(p(h)+p(u),"g"),j=o.indexOf(u,d);;)if(o[d]===u)for(j=d,d++;;){if(-1===(j=o.indexOf(u,j+1)))return g||S.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:E.length,index:d}),O();if(j===y-1)return O(o.substring(d,j).replace(R,u));if(u===h&&o[j+1]===h)j++;else if(u===h||0===j||o[j-1]!==h){-1!==I&&I<j+1&&(I=o.indexOf(t,j+1));var D=M(-1===(A=-1!==A&&A<j+1?o.indexOf(n,j+1):A)?I:Math.min(I,A));if(o.substr(j+1+D,v)===t){k.push(o.substring(d,j).replace(R,u)),o[d=j+1+D+v]!==u&&(j=o.indexOf(u,d)),I=o.indexOf(t,d),A=o.indexOf(n,d);break}if(D=M(A),o.substring(j+1+D,j+1+D+b)===n){if(k.push(o.substring(d,j).replace(R,u)),L(j+1+D+b),I=o.indexOf(t,d),j=o.indexOf(u,d),_&&(V(),f))return F();if(i&&E.length>=i)return F(!0);break}S.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:E.length,index:d}),j++}}else if(r&&0===k.length&&o.substring(d,d+w)===r){if(-1===A)return F();d=A+b,A=o.indexOf(n,d),I=o.indexOf(t,d)}else if(-1!==I&&(I<A||-1===A))k.push(o.substring(d,I)),d=I+v,I=o.indexOf(t,d);else{if(-1===A)break;if(k.push(o.substring(d,A)),L(A+b),_&&(V(),f))return F();if(i&&E.length>=i)return F(!0)}return O();function P(e){E.push(e),N=d}function M(e){var t=0;return-1!==e&&(e=o.substring(j+1,e))&&""===e.trim()?e.length:t}function O(e){return g||(void 0===e&&(e=o.substring(d)),k.push(e),d=y,P(k),_&&V()),F()}function L(e){d=e,P(k),k=[],A=o.indexOf(n,d)}function F(r){if(e.header&&!m&&E.length&&!c){var s=E[0],i=Object.create(null),a=new Set(s);let t=!1;for(let n=0;n<s.length;n++){let r=s[n];if(i[r=x(e.transformHeader)?e.transformHeader(r,n):r]){let e,o=i[r];for(;e=r+"_"+o,o++,a.has(e););a.add(e),s[n]=e,i[r]++,t=!0,(l=null===l?{}:l)[e]=r}else i[r]=1,s[n]=r;a.add(r)}t&&console.warn("Duplicate headers found and renamed."),c=!0}return{data:E,errors:S,meta:{delimiter:t,linebreak:n,aborted:f,truncated:!!r,cursor:N+(m||0),renamedHeaders:l}}}function V(){s(F()),E=[],S=[]}},this.abort=function(){f=!0},this.getCharIndex=function(){return d}}function g(e){var t=e.data,n=i[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var s={abort:function(){r=!0,y(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(x(n.userStep)){for(var a=0;a<t.results.data.length&&(n.userStep({data:t.results.data[a],errors:t.results.errors,meta:t.results.meta},s),!r);a++);delete t.results}else x(n.userChunk)&&(n.userChunk(t.results,s,t.file),delete t.results)}t.finished&&!r&&y(t.workerId,t.results)}function y(e,t){var n=i[e];x(n.userComplete)&&n.userComplete(t),n.terminate(),delete i[e]}function v(){throw new Error("Not implemented.")}function b(e){if("object"!=typeof e||null===e)return e;var t,n=Array.isArray(e)?[]:{};for(t in e)n[t]=b(e[t]);return n}function w(e,t){return function(){e.apply(t,arguments)}}function x(e){return"function"==typeof e}return o.parse=function(t,r){var s=(r=r||{}).dynamicTyping||!1;if(x(s)&&(r.dynamicTypingFunction=s,s={}),r.dynamicTyping=s,r.transform=!!x(r.transform)&&r.transform,!r.worker||!o.WORKERS_SUPPORTED)return s=null,o.NODE_STREAM_INPUT,"string"==typeof t?(t=(e=>65279!==e.charCodeAt(0)?e:e.slice(1))(t),s=new(r.download?c:h)(r)):!0===t.readable&&x(t.read)&&x(t.on)?s=new d(r):(n.File&&t instanceof File||t instanceof Object)&&(s=new u(r)),s.stream(t);(s=(()=>{var t;return!!o.WORKERS_SUPPORTED&&(t=(()=>{var t=n.URL||n.webkitURL||null,r=e.toString();return o.BLOB_URL||(o.BLOB_URL=t.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))})(),(t=new n.Worker(t)).onmessage=g,t.id=a++,i[t.id]=t)})()).userStep=r.step,s.userChunk=r.chunk,s.userComplete=r.complete,s.userError=r.error,r.step=x(r.step),r.chunk=x(r.chunk),r.complete=x(r.complete),r.error=x(r.error),delete r.worker,s.postMessage({input:t,config:r,workerId:s.id})},o.unparse=function(e,t){var n=!1,r=!0,s=",",i="\r\n",a='"',l=a+a,c=!1,u=null,h=!1,d=((()=>{if("object"==typeof t){if("string"!=typeof t.delimiter||o.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(s=t.delimiter),"boolean"!=typeof t.quotes&&"function"!=typeof t.quotes&&!Array.isArray(t.quotes)||(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(i=t.newline),"string"==typeof t.quoteChar&&(a=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");u=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+a),t.escapeFormulae instanceof RegExp?h=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(h=/^[=+\-@\t\r].*$/)}})(),new RegExp(p(a),"g"));if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return f(null,e,c);if("object"==typeof e[0])return f(u||Object.keys(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||u),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),f(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function f(e,t,n){var a="",o=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),l=!Array.isArray(t[0]);if(o&&r){for(var c=0;c<e.length;c++)0<c&&(a+=s),a+=m(e[c],c);0<t.length&&(a+=i)}for(var u=0;u<t.length;u++){var h=(o?e:t[u]).length,d=!1,f=o?0===Object.keys(t[u]).length:0===t[u].length;if(n&&!o&&(d="greedy"===n?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===n&&o){for(var p=[],g=0;g<h;g++){var y=l?e[g]:g;p.push(t[u][y])}d=""===p.join("").trim()}if(!d){for(var v=0;v<h;v++){0<v&&!f&&(a+=s);var b=o&&l?e[v]:v;a+=m(t[u][b],v)}u<t.length-1&&(!n||0<h&&!f)&&(a+=i)}}return a}function m(e,t){var r,i;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(i=!1,h&&"string"==typeof e&&h.test(e)&&(e="'"+e,i=!0),r=e.toString().replace(d,l),(i=i||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||((e,t)=>{for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1})(r,o.BAD_DELIMITERS)||-1<r.indexOf(s)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?a+r+a:r)}},o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\ufeff",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!r&&!!n.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=m,o.ParserHandle=f,o.NetworkStreamer=c,o.FileStreamer=u,o.StringStreamer=h,o.ReadableStreamStreamer=d,n.jQuery&&((t=n.jQuery).fn.parse=function(e){var r=e.config||{},s=[];return this.each(function(e){if("INPUT"!==t(this).prop("tagName").toUpperCase()||"file"!==t(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)s.push({file:this.files[i],inputElem:this,instanceConfig:t.extend({},r)})}),i(),this;function i(){if(0===s.length)x(e.complete)&&e.complete();else{var n,r,i,l,c=s[0];if(x(e.before)){var u=e.before(c.file,c.inputElem);if("object"==typeof u){if("abort"===u.action)return n="AbortError",r=c.file,i=c.inputElem,l=u.reason,void(x(e.error)&&e.error({name:n},r,i,l));if("skip"===u.action)return void a();"object"==typeof u.config&&(c.instanceConfig=t.extend(c.instanceConfig,u.config))}else if("skip"===u)return void a()}var h=c.instanceConfig.complete;c.instanceConfig.complete=function(e){x(h)&&h(e,c.file,c.inputElem),a()},o.parse(c.file,c.instanceConfig)}}function a(){s.splice(0,1),i()}}),s&&(n.onmessage=function(e){e=e.data,void 0===o.WORKER_ID&&e&&(o.WORKER_ID=e.workerId),"string"==typeof e.input?n.postMessage({workerId:o.WORKER_ID,results:o.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=o.parse(e.input,e.config))&&n.postMessage({workerId:o.WORKER_ID,results:e,finished:!0})}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(h.prototype=Object.create(h.prototype)).constructor=h,(d.prototype=Object.create(l.prototype)).constructor=d,o},void 0===(s="function"===typeof n?n.apply(t,r):n)||(e.exports=s)},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(43),t=n(391);const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,i||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const o=s<e.length?n[e.charAt(s)]:64;++s;const l=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==a||null==o||null==l)throw new i;const c=t<<2|a>>4;if(r.push(c),64!==o){const e=a<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=r(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},o=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const c=()=>{try{return l().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyB59jgrSOfRf0D09D5TH-ivZXUGPbEQsRU",REACT_APP_FIREBASE_APP_ID:"1:363463917163:web:c76de01c71fda0f986bb2e",REACT_APP_FIREBASE_AUTH_DOMAIN:"pg-bma.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-FH22XF9D3Q",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"363463917163",REACT_APP_FIREBASE_PROJECT_ID:"pg-bma",REACT_APP_FIREBASE_STORAGE_BUCKET:"pg-bma.firebasestorage.app",REACT_APP_ID:'"primejet-bma-dev'}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&o(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},u=e=>c()?.emulatorHosts?.[e],h=()=>c()?.config,d=e=>c()?.[`_${e}`];class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function p(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function m(e){return(await fetch(e,{credentials:"include"})).ok}const g={};let y=!1;function v(e,t){if("undefined"===typeof window||"undefined"===typeof document||!p(window.location.host)||g[e]===t||g[e]||y)return;function n(e){return`__firebase__banner__${e}`}g[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(g))g[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{y=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function b(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function w(){const e=c()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function x(){return!w()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _(){try{return"object"===typeof indexedDB}catch(e){return!1}}class E extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,E.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S.prototype.create)}}class S{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(k,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",i=`${this.serviceName}: ${s} (${n}).`;return new E(n,i,t)}}const k=/\{\$([^}]+)}/g;function N(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(C(n)&&C(i)){if(!N(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function C(e){return null!==e&&"object"===typeof e}function T(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function I(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function A(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class R{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=j),void 0===r.error&&(r.error=j),void 0===r.complete&&(r.complete=j);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j(){}function D(e){return e&&e._delegate?e._delegate:e}class P{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const M="[DEFAULT]";class O{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new f;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:M})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const s=this.instances.get(n);return s&&e(s,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===M?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.component?this.component.multipleInstances?e:M:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class L{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new O(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const F=[];var V;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(V||(V={}));const U={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},z=V.INFO,B={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},$=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=B[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...i)};class q{constructor(e){this.name=e,this._logLevel=z,this._logHandler=$,this._userLogHandler=null,F.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in V))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?U[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...t),this._logHandler(this,V.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...t),this._logHandler(this,V.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,V.INFO,...t),this._logHandler(this,V.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,V.WARN,...t),this._logHandler(this,V.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,V.ERROR,...t),this._logHandler(this,V.ERROR,...t)}}let H,K;const G=new WeakMap,W=new WeakMap,Q=new WeakMap,Y=new WeakMap,J=new WeakMap;let X={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return W.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Q.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return te(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Z(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(K||(K=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ne(this),n),te(G.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return te(e.apply(ne(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(ne(this),t,...r);return Q.set(i,t.sort?t.sort():[t]),te(i)}}function ee(e){return"function"===typeof e?Z(e):(e instanceof IDBTransaction&&function(e){if(W.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});W.set(e,t)}(e),t=e,(H||(H=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,X):e);var t}function te(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(te(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&G.set(t,e)}).catch(()=>{}),J.set(t,e),t}(e);if(Y.has(e))return Y.get(e);const t=ee(e);return t!==e&&(Y.set(e,t),J.set(t,e)),t}const ne=e=>J.get(e);const re=["get","getKey","getAll","getAllKeys","count"],se=["put","add","delete","clear"],ie=new Map;function ae(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ie.get(t))return ie.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=se.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!re.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return ie.set(t,i),i}X=(e=>({...e,get:(t,n,r)=>ae(t,n)||e.get(t,n,r),has:(t,n)=>!!ae(t,n)||e.has(t,n)}))(X);class oe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const le="@firebase/app",ce="0.14.0",ue=new q("@firebase/app"),he="@firebase/app-compat",de="@firebase/analytics-compat",fe="@firebase/analytics",pe="@firebase/app-check-compat",me="@firebase/app-check",ge="@firebase/auth",ye="@firebase/auth-compat",ve="@firebase/database",be="@firebase/data-connect",we="@firebase/database-compat",xe="@firebase/functions",_e="@firebase/functions-compat",Ee="@firebase/installations",Se="@firebase/installations-compat",ke="@firebase/messaging",Ne="@firebase/messaging-compat",Ce="@firebase/performance",Te="@firebase/performance-compat",Ie="@firebase/remote-config",Ae="@firebase/remote-config-compat",Re="@firebase/storage",je="@firebase/storage-compat",De="@firebase/firestore",Pe="@firebase/ai",Me="@firebase/firestore-compat",Oe="firebase",Le="[DEFAULT]",Fe={[le]:"fire-core",[he]:"fire-core-compat",[fe]:"fire-analytics",[de]:"fire-analytics-compat",[me]:"fire-app-check",[pe]:"fire-app-check-compat",[ge]:"fire-auth",[ye]:"fire-auth-compat",[ve]:"fire-rtdb",[be]:"fire-data-connect",[we]:"fire-rtdb-compat",[xe]:"fire-fn",[_e]:"fire-fn-compat",[Ee]:"fire-iid",[Se]:"fire-iid-compat",[ke]:"fire-fcm",[Ne]:"fire-fcm-compat",[Ce]:"fire-perf",[Te]:"fire-perf-compat",[Ie]:"fire-rc",[Ae]:"fire-rc-compat",[Re]:"fire-gcs",[je]:"fire-gcs-compat",[De]:"fire-fst",[Me]:"fire-fst-compat",[Pe]:"fire-vertex","fire-js":"fire-js",[Oe]:"fire-js-all"},Ve=new Map,Ue=new Map,ze=new Map;function Be(e,t){try{e.container.addComponent(t)}catch(n){ue.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function $e(e){const t=e.name;if(ze.has(t))return ue.debug(`There were multiple attempts to register component ${t}.`),!1;ze.set(t,e);for(const n of Ve.values())Be(n,e);for(const n of Ue.values())Be(n,e);return!0}function qe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function He(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Ke=new S("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ge{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new P("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ke.create("app-deleted",{appName:this._name})}}const We="12.0.0";function Qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r={name:Le,automaticDataCollectionEnabled:!0,...t},s=r.name;if("string"!==typeof s||!s)throw Ke.create("bad-app-name",{appName:String(s)});if(n||(n=h()),!n)throw Ke.create("no-options");const i=Ve.get(s);if(i){if(N(n,i.options)&&N(r,i.config))return i;throw Ke.create("duplicate-app",{appName:s})}const a=new L(s);for(const l of ze.values())a.addComponent(l);const o=new Ge(n,r,a);return Ve.set(s,o),o}function Ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le;const t=Ve.get(e);if(!t&&e===Le&&h())return Qe();if(!t)throw Ke.create("no-app",{appName:e});return t}function Je(e,t,n){let r=Fe[e]??e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&e.push("and"),i&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ue.warn(e.join(" "))}$e(new P(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const Xe="firebase-heartbeat-store";let Ze=null;function et(){return Ze||(Ze=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=te(a);return r&&a.addEventListener("upgradeneeded",e=>{r(te(a.result),e.oldVersion,e.newVersion,te(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Xe)}catch(n){console.warn(n)}}}).catch(e=>{throw Ke.create("idb-open",{originalErrorMessage:e.message})})),Ze}async function tt(e,t){try{const n=(await et()).transaction(Xe,"readwrite"),r=n.objectStore(Xe);await r.put(t,nt(e)),await n.done}catch(n){if(n instanceof E)ue.warn(n.message);else{const e=Ke.create("idb-set",{originalErrorMessage:n?.message});ue.warn(e.message)}}}function nt(e){return`${e.name}!${e.options.appId}`}class rt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new it(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=st();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ue.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=st(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),at(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),at(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=a(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return ue.warn(e),""}}}function st(){return(new Date).toISOString().substring(0,10)}class it{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!_()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await et()).transaction(Xe),n=await t.objectStore(Xe).get(nt(e));return await t.done,n}catch(t){if(t instanceof E)ue.warn(t.message);else{const e=Ke.create("idb-get",{originalErrorMessage:t?.message});ue.warn(e.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return tt(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return tt(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function at(e){return a(JSON.stringify({version:2,heartbeats:e})).length}var ot;ot="",$e(new P("platform-logger",e=>new oe(e),"PRIVATE")),$e(new P("heartbeat",e=>new rt(e),"PRIVATE")),Je(le,ce,ot),Je(le,ce,"esm2020"),Je("fire-js","");function lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ct=lt,ut=new S("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ht=new q("@firebase/auth");function dt(e){if(ht.logLevel<=V.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ht.error(`Auth (${We}): ${e}`,...n)}}function ft(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw yt(e,...n)}function pt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return yt(e,...n)}function mt(e,t,n){const r={...ct(),[t]:n};return new S("auth","Firebase",r).create(t,{appName:e.name})}function gt(e){return mt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ut.create(e,...n)}function vt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw yt(t,...r)}}function bt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw dt(t),new Error(t)}function wt(e,t){e||bt(t)}function xt(){return"undefined"!==typeof self&&self.location?.href||""}function _t(){return"http:"===Et()||"https:"===Et()}function Et(){return"undefined"!==typeof self&&self.location?.protocol||null}function St(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(_t()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class kt{constructor(e,t){this.shortDelay=e,this.longDelay=t,wt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(b())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return St()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Nt(e,t){wt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Ct{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Tt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},It=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],At=new kt(3e4,6e4);function Rt(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function jt(e,t,n,r){return Dt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=T({key:e.config.apiKey,...i}).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l={method:t,headers:o,...s};return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&p(e.emulatorConfig.host)&&(l.credentials="include"),Ct.fetch()(await Mt(e,e.config.apiHost,n,a),l)})}async function Dt(e,t,n){e._canInitEmulator=!1;const r={...Tt,...t};try{const t=new Lt(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Ft(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ft(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Ft(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Ft(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw mt(e,o,a);ft(e,o)}}catch(s){if(s instanceof E)throw s;ft(e,"network-request-failed",{message:String(s)})}}async function Pt(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await jt(e,t,n,r,s);return"mfaPendingCredential"in i&&ft(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function Mt(e,t,n,r){const s=`${t}${n}?${r}`,i=e,a=i.config.emulator?Nt(e.config,s):`${e.config.apiScheme}://${s}`;if(It.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function Ot(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Lt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(pt(this.auth,"network-request-failed")),At.get())})}}function Ft(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pt(e,t,r);return s.customData._tokenResponse=n,s}function Vt(e){return void 0!==e&&void 0!==e.enterprise}class Ut{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ot(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zt(e,t){return jt(e,"GET","/v2/recaptchaConfig",Rt(e,t))}async function Bt(e,t){return jt(e,"POST","/v1/accounts:lookup",t)}function $t(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function qt(e){return 1e3*Number(e)}function Ht(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return dt("JWT malformed, contained fewer than 3 sections"),null;try{const e=o(n);return e?JSON.parse(e):(dt("Failed to decode base64 JWT payload"),null)}catch(s){return dt("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Kt(e){const t=Ht(e);return vt(t,"internal-error"),vt("undefined"!==typeof t.exp,"internal-error"),vt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Gt(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof E&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Wt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e?.code&&this.schedule(!0))}this.schedule()}}class Qt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$t(this.lastLoginAt),this.creationTime=$t(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yt(e){const t=e.auth,n=await e.getIdToken(),r=await Gt(e,Bt(t,{idToken:n}));vt(r?.users.length,t,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const i=s.providerUserInfo?.length?Jt(s.providerUserInfo):[],a=(o=e.providerData,l=i,[...o.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var o,l;const c=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!a?.length,h=!!c&&u,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Qt(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,d)}function Jt(e){return e.map(e=>{let{providerId:t,...n}=e;return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Xt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){vt(e.idToken,"internal-error"),vt("undefined"!==typeof e.idToken,"internal-error"),vt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Kt(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){vt(0!==e.length,"internal-error");const t=Kt(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(vt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Dt(e,{},async()=>{const n=T({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await Mt(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&p(e.emulatorConfig.host)&&(o.credentials="include"),Ct.fetch()(i,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Xt;return n&&(vt("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(vt("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(vt("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xt,this.toJSON())}_performRefresh(){return bt("not implemented")}}function Zt(e,t){vt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class en{constructor(e){let{uid:t,auth:n,stsTokenManager:r,...s}=e;this.providerId="firebase",this.proactiveRefresh=new Wt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Qt(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Gt(this,this.stsTokenManager.getToken(this.auth,e));return vt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=D(e),r=await n.getIdToken(t),s=Ht(r);vt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=i?.sign_in_provider;return{claims:s,token:r,authTime:$t(qt(s.auth_time)),issuedAtTime:$t(qt(s.iat)),expirationTime:$t(qt(s.exp)),signInProvider:a||null,signInSecondFactor:i?.sign_in_second_factor||null}}(this,e)}reload(){return async function(e){const t=D(e);await Yt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(vt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new en({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Yt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(He(this.auth.app))return Promise.reject(gt(this.auth));const e=await this.getIdToken();return await Gt(this,async function(e,t){return jt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,s=t.phoneNumber??void 0,i=t.photoURL??void 0,a=t.tenantId??void 0,o=t._redirectEventId??void 0,l=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:u,emailVerified:h,isAnonymous:d,providerData:f,stsTokenManager:p}=t;vt(u&&p,e,"internal-error");const m=Xt.fromJSON(this.name,p);vt("string"===typeof u,e,"internal-error"),Zt(n,e.name),Zt(r,e.name),vt("boolean"===typeof h,e,"internal-error"),vt("boolean"===typeof d,e,"internal-error"),Zt(s,e.name),Zt(i,e.name),Zt(a,e.name),Zt(o,e.name),Zt(l,e.name),Zt(c,e.name);const g=new en({uid:u,auth:e,email:r,emailVerified:h,displayName:n,isAnonymous:d,photoURL:i,phoneNumber:s,tenantId:a,stsTokenManager:m,createdAt:l,lastLoginAt:c});return f&&Array.isArray(f)&&(g.providerData=f.map(e=>({...e}))),o&&(g._redirectEventId=o),g}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Xt;r.updateFromServerResponse(t);const s=new en({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Yt(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];vt(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Jt(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!s?.length,a=new Xt;a.updateFromIdToken(n);const o=new en({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Qt(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(o,l),o}}const tn=new Map;function nn(e){wt(e instanceof Function,"Expected a class definition");let t=tn.get(e);return t?(wt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,tn.set(e,t),t)}class rn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rn.type="NONE";const sn=rn;function an(e,t,n){return`firebase:${e}:${t}:${n}`}class on{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=an(this.userKey,r.apiKey,s),this.fullPersistenceKey=an("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Bt(this.auth,{idToken:e}).catch(()=>{});return t?en._fromGetAccountInfoResponse(this.auth,t,e):null}return en._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new on(nn(sn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||nn(sn);const i=an(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(i);if(t){let n;if("string"===typeof t){const r=await Bt(e,{idToken:t}).catch(()=>{});if(!r)break;n=await en._fromGetAccountInfoResponse(e,r,t)}else n=en._fromJSON(e,t);l!==s&&(a=n),s=l;break}}catch{}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch{}})),new on(s,e,n)):new on(s,e,n)}}function ln(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(dn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(cn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pn(t))return"Blackberry";if(mn(t))return"Webos";if(un(t))return"Safari";if((t.includes("chrome/")||hn(t))&&!t.includes("edge/"))return"Chrome";if(fn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===n?.length)return n[1]}return"Other"}function cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return/firefox\//i.test(e)}function un(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:b()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return/crios\//i.test(e)}function dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return/iemobile/i.test(e)}function fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return/android/i.test(e)}function pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return/blackberry/i.test(e)}function mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return/webos/i.test(e)}function gn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function yn(){return function(){const e=b();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return gn(e)||fn(e)||mn(e)||pn(e)||/windows phone/i.test(e)||dn(e)}function bn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ln(b());break;case"Worker":t=`${ln(b())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${We}/${r}`}class wn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(s){r(s)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}class xn{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class _n{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sn(this),this.idTokenSubscription=new Sn(this),this.beforeStateQueue=new wn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ut,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=nn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await on.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(n){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Bt(this,{idToken:e}),n=await en._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(He(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const t=this.redirectUser?._redirectEventId,s=n?._redirectEventId,i=await this.tryRedirectSignIn(e);t&&t!==s||!i?.user||(n=i.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yt(e)}catch(t){if("auth/network-request-failed"!==t?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(He(this.app))return Promise.reject(gt(this));const t=e?D(e):null;return t&&vt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&vt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return He(this.app)?Promise.reject(gt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return He(this.app)?Promise.reject(gt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return jt(e,"GET","/v2/passwordPolicy",Rt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new xn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new S("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return jt(e,"POST","/v2/accounts:revokeToken",Rt(e,t))}(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&nn(e)||this._popupRedirectResolver;vt(t,this,"argument-error"),this.redirectPersistenceManager=await on.create(this,[nn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(vt(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(He(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return e?.error&&function(e){if(ht.logLevel<=V.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ht.warn(`Auth (${We}): ${e}`,...n)}}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function En(e){return D(e)}class Sn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new R(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let kn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nn(e){return kn.loadJS(e)}function Cn(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Tn{constructor(){this.enterprise=new In}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class In{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const An="NO_RECAPTCHA";class Rn{constructor(e){this.type="recaptcha-enterprise",this.auth=En(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Vt(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(An)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Tn).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{zt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Ut(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Vt(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=kn.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Nn(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function jn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new Rn(e);let a;if(s)a=An;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o={...t};if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Dn(e,t,n,r,s){if("EMAIL_PASSWORD_PROVIDER"===s){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await jn(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if("auth/missing-recaptcha-token"===s.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await jn(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const s=await jn(e,t,n);return r(e,s).catch(async s=>{if("AUDIT"===e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")&&("auth/missing-recaptcha-token"===s.code||"auth/invalid-app-credential"===s.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const s=await jn(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await jn(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function Pn(e){const t=En(e),n=await zt(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Ut(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Rn(t).verify()}}function Mn(e,t,n){const r=En(e);vt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!n?.disableWarnings,i=On(t),{host:a,port:o}=function(e){const t=On(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Ln(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ln(t)}}}(t),l=null===o?"":`:${o}`,c={url:`${i}//${a}${l}/`},u=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return vt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void vt(N(c,r.config.emulator)&&N(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,p(a)?(m(`${i}//${a}${l}`),v("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function On(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ln(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Fn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bt("not implemented")}_getIdTokenResponse(e){return bt("not implemented")}_linkToIdToken(e,t){return bt("not implemented")}_getReauthenticationResolver(e){return bt("not implemented")}}async function Vn(e,t){return jt(e,"POST","/v1/accounts:signUp",t)}async function Un(e,t){return Pt(e,"POST","/v1/accounts:signInWithPassword",Rt(e,t))}class zn extends Fn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new zn(e,t,"password")}static _fromEmailAndCode(e,t){return new zn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Dn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Un,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithEmailLink",Rt(e,t))}(e,{email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Dn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithEmailLink",Rt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Bn(e,t){return Pt(e,"POST","/v1/accounts:signInWithIdp",Rt(e,t))}class $n extends Fn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ft("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,...s}=t;if(!n||!r)return null;const i=new $n(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Bn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Bn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=T(t)}return e}}async function qn(e,t){return jt(e,"POST","/v1/accounts:sendVerificationCode",Rt(e,t))}const Hn={USER_NOT_FOUND:"user-not-found"};class Kn extends Fn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Kn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Kn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",Rt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",Rt(e,t));if(n.temporaryProof)throw Ft(e,"account-exists-with-different-credential",n);return n}(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",Rt(e,{...t,operation:"REAUTH"}),Hn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Kn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Gn{constructor(e){const t=I(A(e)),n=t.apiKey??null,r=t.oobCode??null,s=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);vt(n&&r&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=function(e){const t=I(A(e)).link,n=t?I(A(t)).deep_link_id:null,r=I(A(e)).deep_link_id;return(r?I(A(r)).link:null)||r||n||t||e}(e);try{return new Gn(t)}catch{return null}}}class Wn{constructor(){this.providerId=Wn.PROVIDER_ID}static credential(e,t){return zn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Gn.parseLink(t);return vt(n,"argument-error"),zn._fromEmailAndCode(e,n.code,n.tenantId)}}Wn.PROVIDER_ID="password",Wn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Wn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Qn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Yn extends Qn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Jn extends Yn{constructor(){super("facebook.com")}static credential(e){return $n._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Jn.credential(t.oauthAccessToken)}catch{return null}}}Jn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Jn.PROVIDER_ID="facebook.com";class Xn extends Yn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $n._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Xn.credential(n,r)}catch{return null}}}Xn.GOOGLE_SIGN_IN_METHOD="google.com",Xn.PROVIDER_ID="google.com";class Zn extends Yn{constructor(){super("github.com")}static credential(e){return $n._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Zn.credential(t.oauthAccessToken)}catch{return null}}}Zn.GITHUB_SIGN_IN_METHOD="github.com",Zn.PROVIDER_ID="github.com";class er extends Yn{constructor(){super("twitter.com")}static credential(e,t){return $n._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return er.credential(n,r)}catch{return null}}}er.TWITTER_SIGN_IN_METHOD="twitter.com",er.PROVIDER_ID="twitter.com";class tr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await en._fromIdTokenResponse(e,n,r),i=nr(n);return new tr({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=nr(n);return new tr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function nr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class rr extends E{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,rr.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new rr(e,t,n,r)}}function sr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw rr._fromErrorAndOperation(e,n,t,r);throw n})}async function ir(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Gt(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return tr._forOperation(e,"link",r)}async function ar(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(He(r.app))return Promise.reject(gt(r));const s="reauthenticate";try{const i=await Gt(e,sr(r,s,t,e),n);vt(i.idToken,r,"internal-error");const a=Ht(i.idToken);vt(a,r,"internal-error");const{sub:o}=a;return vt(e.uid===o,r,"user-mismatch"),tr._forOperation(e,s,i)}catch(i){throw"auth/user-not-found"===i?.code&&ft(r,"user-mismatch"),i}}async function or(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(He(e.app))return Promise.reject(gt(e));const r="signIn",s=await sr(e,r,t),i=await tr._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function lr(e,t){return or(En(e),t)}async function cr(e){const t=En(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function ur(e,t){return jt(e,"POST","/v2/accounts/mfaEnrollment:start",Rt(e,t))}new WeakMap;const hr="__sak";class dr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hr,"1"),this.storage.removeItem(hr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class fr extends dr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);yn()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fr.type="LOCAL";const pr=fr;function mr(e){const t=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function gr(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class yr{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(navigator.cookieEnabled??!0))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=gr(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return e?.value}return mr(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=gr(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=gr(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=mr(n);const s=setInterval(()=>{const e=mr(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}yr.type="COOKIE";class vr extends dr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vr.type="SESSION";const br=vr;class wr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new wr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!i?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function xr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}wr.receivers=[];class _r{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=xr("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Er(){return window}function Sr(){return"undefined"!==typeof Er().WorkerGlobalScope&&"function"===typeof Er().importScripts}const kr="firebaseLocalStorageDb",Nr="firebaseLocalStorage",Cr="fbase_key";class Tr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ir(e,t){return e.transaction([Nr],t?"readwrite":"readonly").objectStore(Nr)}function Ar(){const e=indexedDB.open(kr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Nr,{keyPath:Cr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Nr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(kr);return new Tr(e).toPromise()}(),t(await Ar()))})})}async function Rr(e,t,n){const r=Ir(e,!0).put({[Cr]:t,value:n});return new Tr(r).toPromise()}function jr(e,t){const n=Ir(e,!0).delete(t);return new Tr(n).toPromise()}class Dr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Ar()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wr._getInstance(Sr()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await async function(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new _r(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ar();return await Rr(e,hr,"1"),await jr(e,hr),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Rr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ir(e,!1).get(t),r=await new Tr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>jr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ir(e,!1).getAll();return new Tr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Dr.type="LOCAL";const Pr=Dr;function Mr(e,t){return jt(e,"POST","/v2/accounts/mfaSignIn:start",Rt(e,t))}Cn("rcb"),new kt(3e4,6e4);const Or="recaptcha";async function Lr(e,t,n){if(!e._getRecaptchaConfig())try{await Pn(e)}catch(r){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){vt("enroll"===t.type,e,"internal-error");const s={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Dn(e,s,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===An){vt(n?.type===Or,e,"argument-error");return ur(e,await Fr(e,t,n))}return ur(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{vt("signin"===t.type,e,"internal-error");const s=r.multiFactorHint?.uid||r.multiFactorUid;vt(s,e,"missing-multi-factor-info");const i={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Dn(e,i,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===An){vt(n?.type===Or,e,"argument-error");return Mr(e,await Fr(e,t,n))}return Mr(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},s=Dn(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===An){vt(n?.type===Or,e,"argument-error");return qn(e,await Fr(e,t,n))}return qn(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).sessionInfo}}finally{n?._reset()}}async function Fr(e,t,n){vt(n.type===Or,e,"argument-error");const r=await n.verify();vt("string"===typeof r,e,"argument-error");const s={...t};if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Vr{constructor(e){this.providerId=Vr.PROVIDER_ID,this.auth=En(e)}verifyPhoneNumber(e,t){return Lr(this.auth,e,D(t))}static credential(e,t){return Kn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Vr.credentialFromTaggedObject(t)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Kn._fromTokenResponse(n,r):null}}function Ur(e,t){return t?nn(t):(vt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Vr.PROVIDER_ID="phone",Vr.PHONE_SIGN_IN_METHOD="phone";class zr extends Fn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Br(e){return or(e.auth,new zr(e),e.bypassAuthState)}function $r(e){const{auth:t,user:n}=e;return vt(n,t,"internal-error"),ar(n,new zr(e),e.bypassAuthState)}async function qr(e){const{auth:t,user:n}=e;return vt(n,t,"internal-error"),ir(n,new zr(e),e.bypassAuthState)}class Hr{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Br;case"linkViaPopup":case"linkViaRedirect":return qr;case"reauthViaPopup":case"reauthViaRedirect":return $r;default:ft(this.auth,"internal-error")}}resolve(e){wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Kr=new kt(2e3,1e4);class Gr extends Hr{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Gr.currentPopupAction&&Gr.currentPopupAction.cancel(),Gr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return vt(e,this.auth,"internal-error"),e}async onExecution(){wt(1===this.filter.length,"Popup operations only handle one event");const e=xr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(pt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(pt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gr.currentPopupAction=null}pollUserCancellation(){const e=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pt(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Kr.get())};e()}}Gr.currentPopupAction=null;const Wr=new Map;class Qr extends Hr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Wr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Xr(t),r=Jr(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Wr.set(this.auth._key(),e)}return this.bypassAuthState||Wr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Yr(e,t){Wr.set(e._key(),t)}function Jr(e){return nn(e._redirectPersistence)}function Xr(e){return an("pendingRedirect",e.config.apiKey,e.name)}async function Zr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(He(e.app))return Promise.reject(gt(e));const r=En(e),s=Ur(r,t),i=new Qr(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class es{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ns(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ns(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(pt(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ts(e))}saveEventToCache(e){this.cachedEventUids.add(ts(e)),this.lastProcessedEventTime=Date.now()}}function ts(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ns(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===n?.code}const rs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ss=/^https?/;async function is(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return jt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(as(n))return}catch{}ft(e,"unauthorized-domain")}function as(e){const t=xt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!ss.test(n))return!1;if(rs.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const os=new kt(3e4,6e4);function ls(){const e=Er().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function cs(e){return new Promise((t,n)=>{function r(){ls(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ls(),n(pt(e,"network-request-failed"))},timeout:os.get()})}if(Er().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else{if(!Er().gapi?.load){const t=Cn("iframefcb");return Er()[t]=()=>{gapi.load?r():n(pt(e,"network-request-failed"))},Nn(`${kn.gapiScript}?onload=${t}`).catch(e=>n(e))}r()}}).catch(e=>{throw us=null,e})}let us=null;const hs=new kt(5e3,15e3),ds={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ps(e){const t=e.config;vt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Nt(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:We},s=fs.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${T(r).slice(1)}`}async function ms(e){const t=await function(e){return us=us||cs(e),us}(e),n=Er().gapi;return vt(n,e,"internal-error"),t.open({where:document.body,url:ps(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ds,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=pt(e,"network-request-failed"),i=Er().setTimeout(()=>{r(s)},hs.get());function a(){Er().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const gs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ys{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function vs(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...gs,width:r.toString(),height:s.toString(),top:i,left:a},c=b().toLowerCase();n&&(o=hn(c)?"_blank":n),cn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){return gn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:b())&&!!window.navigator?.standalone}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new ys(null);const h=window.open(t||"",o,u);vt(h,e,"popup-blocked");try{h.focus()}catch(d){}return new ys(h)}const bs="__/auth/handler",ws="emulator/auth/handler",xs=encodeURIComponent("fac");async function _s(e,t,n,r,s,i){vt(e.config.authDomain,e,"auth-domain-config-required"),vt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:We,eventId:s};if(t instanceof Qn){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Yn){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${xs}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${bs}`;return Nt(t,ws)}(e)}?${T(o).slice(1)}${c}`}const Es="webStorageSupport";const Ss=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=br,this._completeRedirectFn=Zr,this._overrideRedirectResult=Yr}async _openPopup(e,t,n,r){wt(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");return vs(e,await _s(e,t,n,xt(),r),xr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Er().location.href=e}(await _s(e,t,n,xt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(wt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await ms(e),n=new es(e);return t.register("authEvent",t=>{vt(t?.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Es,{type:Es},n=>{const r=n?.[0]?.[Es];void 0!==r&&t(!!r),ft(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=is(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vn()||un()||gn()}};var ks="@firebase/auth",Ns="1.11.0";class Cs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ts=d("authIdTokenMaxAge")||300;let Is=null;var As;kn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=pt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},As="Browser",$e(new P("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;vt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:As,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bn(As)},c=new _n(r,s,i,l);return function(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(nn);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),$e(new P("auth-internal",e=>(e=>new Cs(e))(En(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Je(ks,Ns,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(As)),Je(ks,Ns,"esm2020");var Rs,js,Ds="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ps={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return d(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new m(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);h(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new m(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),m=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,p(n,2*s+2*i),n[2*s+2*i+1]+=l*g,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*m,p(n,2*s+2*i+1),n[2*s+2*i+2]+=l*m,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,js=Ps.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},Rs=Ps.Integer=r}).apply("undefined"!==typeof Ds?Ds:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Ms,Os,Ls,Fs,Vs,Us,zs,Bs,$s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},qs={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof $s&&$s];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){s.setTimeout(()=>{throw e},0)}function S(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var k=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new N,e=>e.reset());class N{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,T=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=k.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=s.Promise.resolve(void 0);C=()=>{e.then(R)}};var R=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){E(n)}var t=k;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function j(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:O[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}h(M,D);var O={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),F=0;function V(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=$(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new V(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function K(e,t,n,r,s){if(r&&r.once)return W(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)K(e,t[i],n,r,s);return null}return n=te(n),e&&e[L]?e.K(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!1,r,s)}function G(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[q]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)W(e,t[i],n,r,s);return null}return n=te(n),e&&e[L]?e.L(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!0,r,s)}function Q(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Q(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(i=e.g[t],n,r,s))&&(U(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,s)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[q]=null)):U(e)}}}function J(e){return e in H?H[e]:H[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){j.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var s=t;x(t=new D(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,j),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends j{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){j.call(this),this.h=e,this.g={}}h(le,j);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=s.JSON.stringify,de=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){D.call(this,"d")}function be(){D.call(this,"c")}h(ve,D),h(be,D);var we={},xe=null;function _e(){return xe=xe||new ne}function Ee(e){D.call(this,we.La,e)}function Se(e){const t=_e();re(t,new Ee(t))}function ke(e,t){D.call(this,we.STAT_EVENT,e),this.stat=t}function Ne(e){const t=_e();re(t,new ke(t,e))}function Ce(e,t){D.call(this,we.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function Ae(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return he(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",h(Ee,D),we.STAT_EVENT="statevent",h(ke,D),we.Ma="timingevent",h(Ce,D),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Re,je={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function Me(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}h(Pe,pe),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Re=new Pe;var Le={},Fe={};function Ve(e,t,n){e.L=1,e.v=ht(at(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),$e(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Oe,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=K(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function He(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function We(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Yt(n)}rn(n),Ne(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(He(o),$e(o)),r.g=a}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(u){}}Me.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=d||7==t||Se(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Kt(this.g);e="";var i=r.length,a=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ne(12),Ge(this),Ke(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,We(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==d&&(this.s=4,Ne(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Ne(15),Ae(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),We(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,Ne(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(h),h.M=!0,Ne(11))}}else Ae(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Ae(this.i,this.l,o,null),We(this,o);4==d&&Ge(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=_(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),Ge(this),Ke(this)}}}catch(d){}},Me.prototype.cancel=function(){this.J=!0,Ge(this)},Me.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Se(),Ne(17)),Ge(this),this.s=2,Ke(this)):qe(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function at(e){return new it(e)}function ot(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(_t(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),kt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _t(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Et(e,t){_t(e),t=Nt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return _t(e),t=Nt(e,t),e.g.has(t)}function kt(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(Nt(e,t),d(n)),e.h+=n.length)}function Nt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Tt(){this.g=new fe}function It(e,t,n){const r=n||"";try{rt(e,function(e,n){let s=e;a(e)&&(s=he(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function jt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Lt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){_t(this),this.i=null,e=Nt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){_t(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){_t(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){_t(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(Nt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return _t(this),this.i=null,St(this,e=Nt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},h(At,pe),At.prototype.g=function(){return new Rt(this.l,this.j)},At.prototype.i=(mt={},function(){return mt}),h(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Pt(this),3==this.readyState&&jt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Lt,ne);var Ft=/^https?$/i,Vt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),$t(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(st)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Ft.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Ht(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{$t(e)}}}function $t(e,t){if(e.g){qt(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function qt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Jt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Me(e,e.j,t)).L=2,t.v=ht(at(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}hn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Jt(e){Yt(e),e.u&&(s.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||A(),T||(C(),T=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Ot(r,e.m,e.o),n=new Me(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,r,t)}function en(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),a=!1;else try{It(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||A(),T||(C(),T=!0),I.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(at(t)),n.m=null,n.P=!0,Ue(n,e)}function on(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=_e(),new Ce(r,n)),Xt(e)}else nn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),ht(r),t?function(e,t){const n=new Ie;if(s.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ct(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ct(0,0,!1,t)})}(r.toString(),n)}else Ne(2);e.G=0,e.l&&e.l.sa(t),hn(e),Jt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof it?at(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new it(null);r&&ot(a,r),t&&(a.g=t),i&&lt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Lt(new At({eb:n})):new Lt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Wt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Lt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?me(this.o):me(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Ut(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Vt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Ut(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),$t(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$t(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Wt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ne(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Me(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),x(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,s,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Mt(i)))+"&"+t:this.m&&Ot(n,this.m,i)),et(this.h,s),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),s.T=!0,Ve(s,n,null)):Ve(s,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),Yt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),Ne(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},h(yn,ve),h(vn,be),h(bn,pn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new yn(e))},bn.prototype.sa=function(e){re(this.g,new vn)},bn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Bs=qs.createWebChannelTransport=function(){return new mn},zs=qs.getStatEventTarget=function(){return _e()},Us=qs.Event=we,Vs=qs.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,Fs=qs.ErrorCode=je,De.COMPLETE="complete",Ls=qs.EventType=De,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Os=qs.WebChannel=ge,qs.FetchXmlHttpFactory=At,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,Ms=qs.XhrIo=Lt}).apply("undefined"!==typeof $s?$s:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Hs="@firebase/firestore",Ks="4.9.0";class Gs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gs.UNAUTHENTICATED=new Gs(null),Gs.GOOGLE_CREDENTIALS=new Gs("google-credentials-uid"),Gs.FIRST_PARTY=new Gs("first-party-uid"),Gs.MOCK_USER=new Gs("mock-user");let Ws="12.0.0";const Qs=new q("@firebase/firestore");function Ys(){return Qs.logLevel}function Js(e){if(Qs.logLevel<=V.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ei);Qs.debug(`Firestore (${Ws}): ${e}`,...s)}}function Xs(e){if(Qs.logLevel<=V.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ei);Qs.error(`Firestore (${Ws}): ${e}`,...s)}}function Zs(e){if(Qs.logLevel<=V.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ei);Qs.warn(`Firestore (${Ws}): ${e}`,...s)}}function ei(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ti(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,ni(e,r,n)}function ni(e,t,n){let r=`FIRESTORE (${Ws}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Xs(r),new Error(r)}function ri(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||ni(t,s,r)}function si(e,t){return e}const ii={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ai extends E{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class li{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ci{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gs.UNAUTHENTICATED))}shutdown(){}}class ui{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class hi{constructor(e){this.t=e,this.currentUser=Gs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ri(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new oi,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Js("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Js("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new oi)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Js("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ri("string"==typeof t.accessToken,31837,{l:t}),new li(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ri(null===e||"string"==typeof e,2055,{h:e}),new Gs(e)}}class di{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Gs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fi{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new di(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Gs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mi{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,He(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ri(void 0===this.o,3512);const n=e=>{null!=e.error&&Js("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,Js("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Js("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Js("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new pi(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(ri("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new pi(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function gi(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class yi{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=gi(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function vi(e,t){return e<t?-1:e>t?1:0}function bi(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),s=t.charAt(r);if(n!==s)return _i(n)===_i(s)?vi(n,s):_i(n)?1:-1}return vi(e.length,t.length)}const wi=55296,xi=57343;function _i(e){const t=e.charCodeAt(0);return t>=wi&&t<=xi}function Ei(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Si="__name__";class ki{constructor(e,t,n){void 0===t?t=0:t>e.length&&ti(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&ti(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ki.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ki?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ki.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return vi(e.length,t.length)}static compareSegments(e,t){const n=ki.isNumericId(e),r=ki.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ki.extractNumericId(e).compare(ki.extractNumericId(t)):bi(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rs.fromString(e.substring(4,e.length-2))}}class Ni extends ki{construct(e,t,n){return new Ni(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new ai(ii.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(e=>e.length>0))}return new Ni(e)}static emptyPath(){return new Ni([])}}const Ci=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ti extends ki{construct(e,t,n){return new Ti(e,t,n)}static isValidIdentifier(e){return Ci.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ti.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Si}static keyField(){return new Ti([Si])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new ai(ii.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ai(ii.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ai(ii.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new ai(ii.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ti(t)}static emptyPath(){return new Ti([])}}class Ii{constructor(e){this.path=e}static fromPath(e){return new Ii(Ni.fromString(e))}static fromName(e){return new Ii(Ni.fromString(e).popFirst(5))}static empty(){return new Ii(Ni.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ni.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ni.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ii(new Ni(e.slice()))}}function Ai(e,t,n){if(!n)throw new ai(ii.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ri(e){if(!Ii.isDocumentKey(e))throw new ai(ii.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ji(e){if(Ii.isDocumentKey(e))throw new ai(ii.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Di(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Pi(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":ti(12329,{type:typeof e})}function Mi(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ai(ii.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pi(e);throw new ai(ii.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Oi(e,t){if(t<=0)throw new ai(ii.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function Li(e,t){const n={typeString:e};return t&&(n.value=t),n}function Fi(e,t){if(!Di(e))throw new ai(ii.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(void 0!==i&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ai(ii.INVALID_ARGUMENT,n);return!0}const Vi=-62135596800,Ui=1e6;class zi{static now(){return zi.fromMillis(Date.now())}static fromDate(e){return zi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ui);return new zi(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ai(ii.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ai(ii.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Vi)throw new ai(ii.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ai(ii.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ui}_compareTo(e){return this.seconds===e.seconds?vi(this.nanoseconds,e.nanoseconds):vi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zi._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fi(e,zi._jsonSchema))return new zi(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vi;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zi._jsonSchemaVersion="firestore/timestamp/1.0",zi._jsonSchema={type:Li("string",zi._jsonSchemaVersion),seconds:Li("number"),nanoseconds:Li("number")};class Bi{static fromTimestamp(e){return new Bi(e)}static min(){return new Bi(new zi(0,0))}static max(){return new Bi(new zi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const $i=-1;class qi{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}qi.UNKNOWN_ID=-1;function Hi(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Bi.fromTimestamp(1e9===r?new zi(n+1,0):new zi(n,r));return new Gi(s,Ii.empty(),t)}function Ki(e){return new Gi(e.readTime,e.key,$i)}class Gi{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Gi(Bi.min(),Ii.empty(),$i)}static max(){return new Gi(Bi.max(),Ii.empty(),$i)}}function Wi(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ii.comparator(e.documentKey,t.documentKey),0!==n?n:vi(e.largestBatchId,t.largestBatchId))}const Qi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ji(e){if(e.code!==ii.FAILED_PRECONDITION||e.message!==Qi)throw e;Js("LocalStore","Unexpectedly lost primary lease")}class Xi{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ti(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Xi((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Xi?t:Xi.resolve(t)}catch(e){return Xi.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Xi.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Xi.reject(t)}static resolve(e){return new Xi((t,n)=>{t(e)})}static reject(e){return new Xi((t,n)=>{n(e)})}static waitFor(e){return new Xi((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Xi.resolve(!1);for(const n of e)t=t.next(e=>e?Xi.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Xi((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Xi((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function Zi(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ea(e){return"IndexedDbTransactionError"===e.name}class ta{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ta.ce=-1;const na=-1;function ra(e){return null==e}function sa(e){return 0===e&&1/e==-1/0}function ia(e){return"number"==typeof e&&Number.isInteger(e)&&!sa(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const aa="\x01";function oa(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ca(t)),t=la(e.get(n),t);return ca(t)}function la(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case aa:n+="\x01\x11";break;default:n+=t}}return n}function ca(e){return e+aa+"\x01"}const ua="remoteDocuments",ha="owner",da="mutationQueues",fa="mutations";const pa="documentMutations",ma="remoteDocumentsV14",ga="remoteDocumentGlobal",ya="targets",va="targetDocuments",ba="targetGlobal",wa="collectionParents",xa="clientMetadata",_a="bundles",Ea="namedQueries",Sa="indexConfiguration",ka="indexState",Na="indexEntries",Ca="documentOverlays",Ta="globals",Ia=[da,fa,pa,ua,ya,ha,ba,va,xa,ga,wa,_a,Ea],Aa=[da,fa,pa,ma,ya,ha,ba,va,xa,ga,wa,_a,Ea,Ca],Ra=Aa,ja=[...Ra,Sa,ka,Na];function Da(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Pa(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ma(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Oa{constructor(e,t){this.comparator=e,this.root=t||Fa.EMPTY}insert(e,t){return new Oa(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fa.BLACK,null,null))}remove(e){return new Oa(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new La(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new La(this.root,e,this.comparator,!1)}getReverseIterator(){return new La(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new La(this.root,e,this.comparator,!0)}}class La{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fa{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Fa.RED,this.left=null!=r?r:Fa.EMPTY,this.right=null!=s?s:Fa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Fa(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Fa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Fa.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ti(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ti(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ti(27949);return e+(this.isRed()?0:1)}}Fa.EMPTY=null,Fa.RED=!0,Fa.BLACK=!1,Fa.EMPTY=new class{constructor(){this.size=0}get key(){throw ti(57766)}get value(){throw ti(16141)}get color(){throw ti(16727)}get left(){throw ti(29726)}get right(){throw ti(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new Fa(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Va{constructor(e){this.comparator=e,this.data=new Oa(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ua(this.data.getIterator())}getIteratorFrom(e){return new Ua(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Va))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Va(this.comparator);return t.data=e,t}}class Ua{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class za{constructor(e){this.fields=e,e.sort(Ti.comparator)}static empty(){return new za([])}unionWith(e){let t=new Va(Ti.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new za(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ei(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Ba extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $a{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ba("Invalid base64 string: "+e):e}}(e);return new $a(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new $a(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$a.EMPTY_BYTE_STRING=new $a("");const qa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ha(e){if(ri(!!e,39018),"string"==typeof e){let t=0;const n=qa.exec(e);if(ri(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ka(e.seconds),nanos:Ka(e.nanos)}}function Ka(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ga(e){return"string"==typeof e?$a.fromBase64String(e):$a.fromUint8Array(e)}const Wa="server_timestamp",Qa="__type__",Ya="__previous_value__",Ja="__local_write_time__";function Xa(e){const t=(e?.mapValue?.fields||{})[Qa]?.stringValue;return t===Wa}function Za(e){const t=e.mapValue.fields[Ya];return Xa(t)?Za(t):t}function eo(e){const t=Ha(e.mapValue.fields[Ja].timestampValue);return new zi(t.seconds,t.nanos)}class to{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const no="(default)";class ro{constructor(e,t){this.projectId=e,this.database=t||no}static empty(){return new ro("","")}get isDefaultDatabase(){return this.database===no}isEqual(e){return e instanceof ro&&e.projectId===this.projectId&&e.database===this.database}}const so="__type__",io="__max__",ao={mapValue:{fields:{__type__:{stringValue:io}}}},oo="__vector__",lo="value";function co(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xa(e)?4:Co(e)?9007199254740991:ko(e)?10:11:ti(28295,{value:e})}function uo(e,t){if(e===t)return!0;const n=co(e);if(n!==co(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return eo(e).isEqual(eo(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ha(e.timestampValue),r=Ha(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ga(e.bytesValue).isEqual(Ga(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ka(e.geoPointValue.latitude)===Ka(t.geoPointValue.latitude)&&Ka(e.geoPointValue.longitude)===Ka(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ka(e.integerValue)===Ka(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ka(e.doubleValue),r=Ka(t.doubleValue);return n===r?sa(n)===sa(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ei(e.arrayValue.values||[],t.arrayValue.values||[],uo);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Da(n)!==Da(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!uo(n[s],r[s])))return!1;return!0}(e,t);default:return ti(52216,{left:e})}}function ho(e,t){return void 0!==(e.values||[]).find(e=>uo(e,t))}function fo(e,t){if(e===t)return 0;const n=co(e),r=co(t);if(n!==r)return vi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vi(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ka(e.integerValue||e.doubleValue),r=Ka(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return po(e.timestampValue,t.timestampValue);case 4:return po(eo(e),eo(t));case 5:return bi(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ga(e),r=Ga(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=vi(n[s],r[s]);if(0!==e)return e}return vi(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=vi(Ka(e.latitude),Ka(t.latitude));return 0!==n?n:vi(Ka(e.longitude),Ka(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return mo(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=t.fields||{},s=n[lo]?.arrayValue,i=r[lo]?.arrayValue,a=vi(s?.values?.length||0,i?.values?.length||0);return 0!==a?a:mo(s,i)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ao.mapValue&&t===ao.mapValue)return 0;if(e===ao.mapValue)return 1;if(t===ao.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=bi(r[a],i[a]);if(0!==e)return e;const t=fo(n[r[a]],s[i[a]]);if(0!==t)return t}return vi(r.length,i.length)}(e.mapValue,t.mapValue);default:throw ti(23264,{he:n})}}function po(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return vi(e,t);const n=Ha(e),r=Ha(t),s=vi(n.seconds,r.seconds);return 0!==s?s:vi(n.nanos,r.nanos)}function mo(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=fo(n[s],r[s]);if(e)return e}return vi(n.length,r.length)}function go(e){return yo(e)}function yo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ha(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ga(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ii.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=yo(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${yo(e.fields[s])}`;return n+"}"}(e.mapValue):ti(61005,{value:e})}function vo(e){switch(co(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Za(e);return t?16+vo(t):16;case 5:return 2*e.stringValue.length;case 6:return Ga(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+vo(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Pa(e.fields,(e,n)=>{t+=e.length+vo(n)}),t}(e.mapValue);default:throw ti(13486,{value:e})}}function bo(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function wo(e){return!!e&&"integerValue"in e}function xo(e){return!!e&&"arrayValue"in e}function _o(e){return!!e&&"nullValue"in e}function Eo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function So(e){return!!e&&"mapValue"in e}function ko(e){const t=(e?.mapValue?.fields||{})[so]?.stringValue;return t===oo}function No(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Pa(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=No(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=No(e.arrayValue.values[n]);return t}return{...e}}function Co(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===io}class To{constructor(e){this.value=e}static empty(){return new To({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!So(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=No(t)}setAll(e){let t=Ti.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=No(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());So(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return uo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];So(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Pa(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new To(No(this.value))}}function Io(e){const t=[];return Pa(e.fields,(e,n)=>{const r=new Ti([e]);if(So(n)){const e=Io(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new za(t)}class Ao{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Ao(e,0,Bi.min(),Bi.min(),Bi.min(),To.empty(),0)}static newFoundDocument(e,t,n,r){return new Ao(e,1,t,Bi.min(),n,r,0)}static newNoDocument(e,t){return new Ao(e,2,t,Bi.min(),Bi.min(),To.empty(),0)}static newUnknownDocument(e,t){return new Ao(e,3,t,Bi.min(),Bi.min(),To.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Bi.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=To.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=To.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bi.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ao&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ao(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ro{constructor(e,t){this.position=e,this.inclusive=t}}function jo(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?Ii.comparator(Ii.fromName(a.referenceValue),n.key):fo(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Do(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!uo(e.position[n],t.position[n]))return!1;return!0}class Po{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Mo(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Oo{}class Lo extends Oo{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ho(e,t,n):"array-contains"===t?new Qo(e,n):"in"===t?new Yo(e,n):"not-in"===t?new Jo(e,n):"array-contains-any"===t?new Xo(e,n):new Lo(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ko(e,n):new Go(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(fo(t,this.value)):null!==t&&co(this.value)===co(t)&&this.matchesComparison(fo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ti(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fo extends Oo{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Fo(e,t)}matches(e){return Vo(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vo(e){return"and"===e.op}function Uo(e){return zo(e)&&Vo(e)}function zo(e){for(const t of e.filters)if(t instanceof Fo)return!1;return!0}function Bo(e){if(e instanceof Lo)return e.field.canonicalString()+e.op.toString()+go(e.value);if(Uo(e))return e.filters.map(e=>Bo(e)).join(",");{const t=e.filters.map(e=>Bo(e)).join(",");return`${e.op}(${t})`}}function $o(e,t){return e instanceof Lo?function(e,t){return t instanceof Lo&&e.op===t.op&&e.field.isEqual(t.field)&&uo(e.value,t.value)}(e,t):e instanceof Fo?function(e,t){return t instanceof Fo&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&$o(n,t.filters[r]),!0)}(e,t):void ti(19439)}function qo(e){return e instanceof Lo?function(e){return`${e.field.canonicalString()} ${e.op} ${go(e.value)}`}(e):e instanceof Fo?function(e){return e.op.toString()+" {"+e.getFilters().map(qo).join(" ,")+"}"}(e):"Filter"}class Ho extends Lo{constructor(e,t,n){super(e,t,n),this.key=Ii.fromName(n.referenceValue)}matches(e){const t=Ii.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ko extends Lo{constructor(e,t){super(e,"in",t),this.keys=Wo("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Go extends Lo{constructor(e,t){super(e,"not-in",t),this.keys=Wo("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Wo(e,t){return(t.arrayValue?.values||[]).map(e=>Ii.fromName(e.referenceValue))}class Qo extends Lo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xo(t)&&ho(t.arrayValue,this.value)}}class Yo extends Lo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ho(this.value.arrayValue,t)}}class Jo extends Lo{constructor(e,t){super(e,"not-in",t)}matches(e){if(ho(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!ho(this.value.arrayValue,t)}}class Xo extends Lo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>ho(this.value.arrayValue,e))}}class Zo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Te=null}}function el(e){return new Zo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function tl(e){const t=si(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Bo(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ra(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>go(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>go(e)).join(",")),t.Te=e}return t.Te}function nl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Mo(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!$o(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Do(e.startAt,t.startAt)&&Do(e.endAt,t.endAt)}function rl(e){return Ii.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class sl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function il(e,t,n,r,s,i,a,o){return new sl(e,t,n,r,s,i,a,o)}function al(e){return new sl(e)}function ol(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ll(e){return null!==e.collectionGroup}function cl(e){const t=si(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Va(Ti.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Po(r,n))}),e.has(Ti.keyField().canonicalString())||t.Ie.push(new Po(Ti.keyField(),n))}return t.Ie}function ul(e){const t=si(e);return t.Ee||(t.Ee=hl(t,cl(e))),t.Ee}function hl(e,t){if("F"===e.limitType)return el(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Po(e.field,t)});const n=e.endAt?new Ro(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ro(e.startAt.position,e.startAt.inclusive):null;return el(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function dl(e,t){const n=e.filters.concat([t]);return new sl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function fl(e,t,n){return new sl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function pl(e,t){return nl(ul(e),ul(t))&&e.limitType===t.limitType}function ml(e){return`${tl(ul(e))}|lt:${e.limitType}`}function gl(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>qo(e)).join(", ")}]`),ra(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>go(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>go(e)).join(",")),`Target(${t})`}(ul(e))}; limitType=${e.limitType})`}function yl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ii.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of cl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=jo(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,cl(e),t))&&!(e.endAt&&!function(e,t,n){const r=jo(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,cl(e),t))}(e,t)}function vl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function bl(e){return(t,n)=>{let r=!1;for(const s of cl(e)){const e=wl(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function wl(e,t,n){const r=e.field.isKeyField()?Ii.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?fo(r,s):ti(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ti(19790,{direction:e.dir})}}class xl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Ma(this.inner)}size(){return this.innerSize}}const _l=new Oa(Ii.comparator);function El(){return _l}const Sl=new Oa(Ii.comparator);function kl(){let e=Sl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Nl(e){let t=Sl;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Cl(){return Il()}function Tl(){return Il()}function Il(){return new xl(e=>e.toString(),(e,t)=>e.isEqual(t))}const Al=new Oa(Ii.comparator),Rl=new Va(Ii.comparator);function jl(){let e=Rl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const Dl=new Va(vi);function Pl(){return Dl}function Ml(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sa(t)?"-0":t}}function Ol(e){return{integerValue:""+e}}function Ll(e,t){return ia(t)?Ol(t):Ml(e,t)}class Fl{constructor(){this._=void 0}}function Vl(e,t,n){return e instanceof Bl?function(e,t){const n={fields:{[Qa]:{stringValue:Wa},[Ja]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Xa(t)&&(t=Za(t)),t&&(n.fields[Ya]=t),{mapValue:n}}(n,t):e instanceof $l?ql(e,t):e instanceof Hl?Kl(e,t):function(e,t){const n=zl(e,t),r=Wl(n)+Wl(e.Ae);return wo(n)&&wo(e.Ae)?Ol(r):Ml(e.serializer,r)}(e,t)}function Ul(e,t,n){return e instanceof $l?ql(e,t):e instanceof Hl?Kl(e,t):n}function zl(e,t){return e instanceof Gl?function(e){return wo(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Bl extends Fl{}class $l extends Fl{constructor(e){super(),this.elements=e}}function ql(e,t){const n=Ql(t);for(const r of e.elements)n.some(e=>uo(e,r))||n.push(r);return{arrayValue:{values:n}}}class Hl extends Fl{constructor(e){super(),this.elements=e}}function Kl(e,t){let n=Ql(t);for(const r of e.elements)n=n.filter(e=>!uo(e,r));return{arrayValue:{values:n}}}class Gl extends Fl{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Wl(e){return Ka(e.integerValue||e.doubleValue)}function Ql(e){return xo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Yl{constructor(e,t){this.field=e,this.transform=t}}class Jl{constructor(e,t){this.version=e,this.transformResults=t}}class Xl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xl}static exists(e){return new Xl(void 0,e)}static updateTime(e){return new Xl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ec{}function tc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new hc(e.key,Xl.none()):new ac(e.key,e.data,Xl.none());{const n=e.data,r=To.empty();let s=new Va(Ti.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new oc(e.key,r,new za(s.toArray()),Xl.none())}}function nc(e,t,n){e instanceof ac?function(e,t,n){const r=e.value.clone(),s=cc(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof oc?function(e,t,n){if(!Zl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=cc(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(lc(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function rc(e,t,n,r){return e instanceof ac?function(e,t,n,r){if(!Zl(e.precondition,t))return n;const s=e.value.clone(),i=uc(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof oc?function(e,t,n,r){if(!Zl(e.precondition,t))return n;const s=uc(e.fieldTransforms,r,t),i=t.data;return i.setAll(lc(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Zl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function sc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=zl(r.transform,e||null);null!=s&&(null===n&&(n=To.empty()),n.set(r.field,s))}return n||null}function ic(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ei(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof $l&&t instanceof $l||e instanceof Hl&&t instanceof Hl?Ei(e.elements,t.elements,uo):e instanceof Gl&&t instanceof Gl?uo(e.Ae,t.Ae):e instanceof Bl&&t instanceof Bl}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ac extends ec{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class oc extends ec{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function cc(e,t,n){const r=new Map;ri(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,Ul(a,o,n[s]))}return r}function uc(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Vl(e,i,t))}return r}class hc extends ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dc extends ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&nc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=rc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=rc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Tl();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=tc(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Bi.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jl())}isEqual(e){return this.batchId===e.batchId&&Ei(this.mutations,e.mutations,(e,t)=>ic(e,t))&&Ei(this.baseMutations,e.baseMutations,(e,t)=>ic(e,t))}}class pc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ri(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Al;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new pc(e,t,n,r)}}class mc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gc{constructor(e,t){this.count=e,this.unchangedNames=t}}var yc,vc;function bc(e){switch(e){case ii.OK:return ti(64938);case ii.CANCELLED:case ii.UNKNOWN:case ii.DEADLINE_EXCEEDED:case ii.RESOURCE_EXHAUSTED:case ii.INTERNAL:case ii.UNAVAILABLE:case ii.UNAUTHENTICATED:return!1;case ii.INVALID_ARGUMENT:case ii.NOT_FOUND:case ii.ALREADY_EXISTS:case ii.PERMISSION_DENIED:case ii.FAILED_PRECONDITION:case ii.ABORTED:case ii.OUT_OF_RANGE:case ii.UNIMPLEMENTED:case ii.DATA_LOSS:return!0;default:return ti(15467,{code:e})}}function wc(e){if(void 0===e)return Xs("GRPC error has no .code"),ii.UNKNOWN;switch(e){case yc.OK:return ii.OK;case yc.CANCELLED:return ii.CANCELLED;case yc.UNKNOWN:return ii.UNKNOWN;case yc.DEADLINE_EXCEEDED:return ii.DEADLINE_EXCEEDED;case yc.RESOURCE_EXHAUSTED:return ii.RESOURCE_EXHAUSTED;case yc.INTERNAL:return ii.INTERNAL;case yc.UNAVAILABLE:return ii.UNAVAILABLE;case yc.UNAUTHENTICATED:return ii.UNAUTHENTICATED;case yc.INVALID_ARGUMENT:return ii.INVALID_ARGUMENT;case yc.NOT_FOUND:return ii.NOT_FOUND;case yc.ALREADY_EXISTS:return ii.ALREADY_EXISTS;case yc.PERMISSION_DENIED:return ii.PERMISSION_DENIED;case yc.FAILED_PRECONDITION:return ii.FAILED_PRECONDITION;case yc.ABORTED:return ii.ABORTED;case yc.OUT_OF_RANGE:return ii.OUT_OF_RANGE;case yc.UNIMPLEMENTED:return ii.UNIMPLEMENTED;case yc.DATA_LOSS:return ii.DATA_LOSS;default:return ti(39323,{code:e})}}(vc=yc||(yc={}))[vc.OK=0]="OK",vc[vc.CANCELLED=1]="CANCELLED",vc[vc.UNKNOWN=2]="UNKNOWN",vc[vc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vc[vc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vc[vc.NOT_FOUND=5]="NOT_FOUND",vc[vc.ALREADY_EXISTS=6]="ALREADY_EXISTS",vc[vc.PERMISSION_DENIED=7]="PERMISSION_DENIED",vc[vc.UNAUTHENTICATED=16]="UNAUTHENTICATED",vc[vc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vc[vc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vc[vc.ABORTED=10]="ABORTED",vc[vc.OUT_OF_RANGE=11]="OUT_OF_RANGE",vc[vc.UNIMPLEMENTED=12]="UNIMPLEMENTED",vc[vc.INTERNAL=13]="INTERNAL",vc[vc.UNAVAILABLE=14]="UNAVAILABLE",vc[vc.DATA_LOSS=15]="DATA_LOSS";let xc=null;function _c(){return new TextEncoder}const Ec=new Rs([4294967295,4294967295],0);function Sc(e){const t=_c().encode(e),n=new js;return n.update(t),new Uint8Array(n.digest())}function kc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Rs([n,r],0),new Rs([s,i],0)]}class Nc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Cc(`Invalid padding: ${t}`);if(n<0)throw new Cc(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Cc(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Cc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Rs.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Rs.fromNumber(n)));return 1===r.compare(Ec)&&(r=new Rs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Sc(e),[n,r]=kc(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Nc(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=Sc(e),[n,r]=kc(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tc{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Tc(Bi.min(),r,new Oa(vi),El(),jl())}}class Ic{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ic(n,t,jl(),jl(),jl())}}class Ac{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Rc{constructor(e,t){this.targetId=e,this.Ce=t}}class jc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$a.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Dc{constructor(){this.ve=0,this.Fe=Oc(),this.Me=$a.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=jl(),t=jl(),n=jl();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ti(38017,{changeType:s})}}),new Ic(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Oc()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ri(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Pc{constructor(e){this.Ge=e,this.ze=new Map,this.je=El(),this.Je=Mc(),this.He=Mc(),this.Ye=new Oa(vi)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:ti(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(rl(s))if(0===n){const e=new Ii(s.path);this.et(t,e,Ao.newNoDocument(e,Bi.min()))}else ri(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}xc?.lt(function(e,t,n,r,s){const i={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},a=t.unchangedNames;return a&&(i.bloomFilter={applied:0===s,hashCount:a?.hashCount??0,bitmapLength:a?.bits?.bitmap?.length??0,padding:a?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),i}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=Ga(n).toUint8Array()}catch(e){if(e instanceof Ba)return Zs("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Nc(i,r,s)}catch(e){return Zs(e instanceof Cc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Ge.ht(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const s=this.ot(r);if(s){if(n.current&&rl(s.target)){const t=new Ii(s.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Ao.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=jl();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Tc(e,t,this.Ye,this.je,n);return this.je=El(),this.Je=Mc(),this.He=Mc(),this.Ye=new Oa(vi),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Dc,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Va(vi),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Va(vi),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Js("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dc),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Mc(){return new Oa(Ii.comparator)}function Oc(){return new Oa(Ii.comparator)}const Lc={asc:"ASCENDING",desc:"DESCENDING"},Fc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vc={and:"AND",or:"OR"};class Uc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zc(e,t){return e.useProto3Json||ra(t)?t:{value:t}}function Bc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function $c(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function qc(e,t){return Bc(e,t.toTimestamp())}function Hc(e){return ri(!!e,49232),Bi.fromTimestamp(function(e){const t=Ha(e);return new zi(t.seconds,t.nanos)}(e))}function Kc(e,t){return Gc(e,t).canonicalString()}function Gc(e,t){const n=function(e){return new Ni(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Wc(e){const t=Ni.fromString(e);return ri(pu(t),10190,{key:t.toString()}),t}function Qc(e,t){return Kc(e.databaseId,t.path)}function Yc(e,t){const n=Wc(t);if(n.get(1)!==e.databaseId.projectId)throw new ai(ii.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ai(ii.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ii(eu(n))}function Jc(e,t){return Kc(e.databaseId,t)}function Xc(e){const t=Wc(e);return 4===t.length?Ni.emptyPath():eu(t)}function Zc(e){return new Ni(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function eu(e){return ri(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function tu(e,t,n){return{name:Qc(e,t),fields:n.value.mapValue.fields}}function nu(e,t){let n;if(t instanceof ac)n={update:tu(e,t.key,t.value)};else if(t instanceof hc)n={delete:Qc(e,t.key)};else if(t instanceof oc)n={update:tu(e,t.key,t.data),updateMask:fu(t.fieldMask)};else{if(!(t instanceof dc))return ti(16599,{Vt:t.type});n={verify:Qc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Bl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $l)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Hl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Gl)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw ti(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:qc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ti(27497)}(e,t.precondition)),n}function ru(e,t){return{documents:[Jc(e,t.path)]}}function su(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Jc(e,s);const i=function(e){if(0!==e.length)return du(Fo.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:uu(e.field),direction:ou(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=zc(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:s}}function iu(e){let t=Xc(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ri(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=au(e);return t instanceof Fo&&Uo(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Po(hu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,ra(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ro(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ro(n,t)}(n.endAt)),il(t,s,a,i,o,"F",l,c)}function au(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=hu(e.unaryFilter.field);return Lo.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=hu(e.unaryFilter.field);return Lo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=hu(e.unaryFilter.field);return Lo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=hu(e.unaryFilter.field);return Lo.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ti(61313);default:return ti(60726)}}(e):void 0!==e.fieldFilter?function(e){return Lo.create(hu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ti(58110);default:return ti(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Fo.create(e.compositeFilter.filters.map(e=>au(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ti(1026)}}(e.compositeFilter.op))}(e):ti(30097,{filter:e})}function ou(e){return Lc[e]}function lu(e){return Fc[e]}function cu(e){return Vc[e]}function uu(e){return{fieldPath:e.canonicalString()}}function hu(e){return Ti.fromServerFormat(e.fieldPath)}function du(e){return e instanceof Lo?function(e){if("=="===e.op){if(Eo(e.value))return{unaryFilter:{field:uu(e.field),op:"IS_NAN"}};if(_o(e.value))return{unaryFilter:{field:uu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Eo(e.value))return{unaryFilter:{field:uu(e.field),op:"IS_NOT_NAN"}};if(_o(e.value))return{unaryFilter:{field:uu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uu(e.field),op:lu(e.op),value:e.value}}}(e):e instanceof Fo?function(e){const t=e.getFilters().map(e=>du(e));return 1===t.length?t[0]:{compositeFilter:{op:cu(e.op),filters:t}}}(e):ti(54877,{filter:e})}function fu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function pu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class mu{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Bi.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Bi.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:$a.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new mu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gu{constructor(e){this.yt=e}}function yu(e){const t=iu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?fl(t,t.limit,"L"):t}class vu{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ka(e.integerValue));else if("doubleValue"in e){const n=Ka(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),sa(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Ha(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ga(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Co(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ko(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ti(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const r=lo,s=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Ka(s)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Ii.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}vu.Kt=new vu;class bu{constructor(){this.Cn=new wu}addToCollectionParentIndex(e,t){return this.Cn.add(t),Xi.resolve()}getCollectionParents(e,t){return Xi.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Xi.resolve()}deleteFieldIndex(e,t){return Xi.resolve()}deleteAllFieldIndexes(e){return Xi.resolve()}createTargetIndexes(e,t){return Xi.resolve()}getDocumentsMatchingTarget(e,t){return Xi.resolve(null)}getIndexType(e,t){return Xi.resolve(0)}getFieldIndexes(e,t){return Xi.resolve([])}getNextCollectionGroupToUpdate(e){return Xi.resolve(null)}getMinOffset(e,t){return Xi.resolve(Gi.min())}getMinOffsetFromCollectionGroup(e,t){return Xi.resolve(Gi.min())}updateCollectionGroup(e,t,n){return Xi.resolve()}updateIndexEntries(e,t){return Xi.resolve()}}class wu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Va(Ni.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Va(Ni.comparator)).toArray()}}new Uint8Array(0);const xu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_u=41943040;class Eu{static withCacheSize(e){return new Eu(e,Eu.DEFAULT_COLLECTION_PERCENTILE,Eu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Eu.DEFAULT_COLLECTION_PERCENTILE=10,Eu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Eu.DEFAULT=new Eu(_u,Eu.DEFAULT_COLLECTION_PERCENTILE,Eu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Eu.DISABLED=new Eu(-1,0,0);class Su{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Su(0)}static cr(){return new Su(-1)}}const ku="LruGarbageCollector",Nu=1048576;function Cu(e,t){let[n,r]=e,[s,i]=t;const a=vi(n,s);return 0===a?vi(r,i):a}class Tu{constructor(e){this.Ir=e,this.buffer=new Va(Cu),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Cu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Iu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Js(ku,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ea(e)?Js(ku,"Ignoring IndexedDB error during garbage collection: ",e):await Ji(e)}await this.Vr(3e5)})}}class Au{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Xi.resolve(ta.ce);const n=new Tu(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Js("LruGarbageCollector","Garbage collection skipped; disabled"),Xi.resolve(xu)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Js("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xu):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Js("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Ys()<=V.DEBUG&&Js("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-c}ms\n\tDetermined least recently used ${r} in `+(a-i)+"ms\n"+`\tRemoved ${s} targets in `+(o-a)+"ms\n"+`\tRemoved ${e} documents in `+(l-o)+"ms\n"+`Total Duration: ${l-c}ms`),Xi.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function Ru(e,t){return new Au(e,t)}class ju{constructor(){this.changes=new xl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ao.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Xi.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Du{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Pu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&rc(n.mutation,e,za.empty(),zi.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,jl()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jl();const r=Cl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=kl();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Cl();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,jl()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=El();const i=Il(),a=Il();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof oc)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),rc(a.mutation,t,a.mutation.getFieldMask(),zi.now())):i.set(t.key,za.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>a.set(e,new Du(t,i.get(e)??null))),a))}recalculateAndSaveOverlays(e,t){const n=Il();let r=new Oa((e,t)=>e-t),s=jl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||za.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||jl()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Tl();l.forEach(e=>{if(!s.has(e)){const r=tc(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Xi.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ii.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ll(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Xi.resolve(Cl());let a=$i,o=s;return i.next(t=>Xi.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?Xi.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,jl())).next(e=>({batchId:a,changes:Nl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ii(t)).next(e=>{let t=kl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=kl();return this.indexManager.getCollectionParents(e,s).next(a=>Xi.forEach(a,a=>{const o=function(e,t){return new sl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ao.newInvalidDocument(r)))});let n=kl();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&rc(i.mutation,r,za.empty(),zi.now()),yl(t,r)&&(n=n.insert(e,r))}),n})}}class Mu{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Xi.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Hc(e.createTime)}}(t)),Xi.resolve()}getNamedQuery(e,t){return Xi.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:yu(e.bundledQuery),readTime:Hc(e.readTime)}}(t)),Xi.resolve()}}class Ou{constructor(){this.overlays=new Oa(Ii.comparator),this.qr=new Map}getOverlay(e,t){return Xi.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Cl();return Xi.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Xi.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Xi.resolve()}getOverlaysForCollection(e,t,n){const r=Cl(),s=t.length+1,i=new Ii(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Xi.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Oa((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Cl(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Cl(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Xi.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new mc(t,n));let s=this.qr.get(t);void 0===s&&(s=jl(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}class Lu{constructor(){this.sessionToken=$a.EMPTY_BYTE_STRING}getSessionToken(e){return Xi.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Xi.resolve()}}class Fu{constructor(){this.Qr=new Va(Vu.$r),this.Ur=new Va(Vu.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Vu(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Vu(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Ii(new Ni([])),n=new Vu(t,e),r=new Vu(t,e+1),s=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),s.push(e.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ii(new Ni([])),n=new Vu(t,e),r=new Vu(t,e+1);let s=jl();return this.Ur.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Vu(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Vu{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ii.comparator(e.key,t.key)||vi(e.Yr,t.Yr)}static Kr(e,t){return vi(e.Yr,t.Yr)||Ii.comparator(e.key,t.key)}}class Uu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Va(Vu.$r)}checkEmpty(e){return Xi.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new fc(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Zr=this.Zr.add(new Vu(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Xi.resolve(i)}lookupMutationBatch(e,t){return Xi.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),s=r<0?0:r;return Xi.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Xi.resolve(0===this.mutationQueue.length?na:this.tr-1)}getAllMutationBatches(e){return Xi.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Vu(t,0),r=new Vu(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);s.push(t)}),Xi.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Va(vi);return t.forEach(e=>{const t=new Vu(e,0),r=new Vu(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Xi.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Ii.isDocumentKey(s)||(s=s.child(""));const i=new Vu(new Ii(s),0);let a=new Va(vi);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},i),Xi.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){ri(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Xi.forEach(t.mutations,r=>{const s=new Vu(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Vu(t,0),r=this.Zr.firstAfterOrEqual(n);return Xi.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Xi.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class zu{constructor(e){this.ri=e,this.docs=new Oa(Ii.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Xi.resolve(n?n.document.mutableCopy():Ao.newInvalidDocument(t))}getEntries(e,t){let n=El();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ao.newInvalidDocument(e))}),Xi.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=El();const i=t.path,a=new Ii(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Wi(Ki(a),n)<=0||(r.has(a.key)||yl(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return Xi.resolve(s)}getAllFromCollectionGroup(e,t,n,r){ti(9500)}ii(e,t){return Xi.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Bu(this)}getSize(e){return Xi.resolve(this.size)}}class Bu extends ju{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Xi.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class $u{constructor(e){this.persistence=e,this.si=new xl(e=>tl(e),nl),this.lastRemoteSnapshotVersion=Bi.min(),this.highestTargetId=0,this.oi=0,this._i=new Fu,this.targetCount=0,this.ai=Su.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Xi.resolve()}getLastRemoteSnapshotVersion(e){return Xi.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xi.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Xi.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Xi.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Su(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Xi.resolve()}updateTargetData(e,t){return this.Pr(t),Xi.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Xi.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.si.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Xi.waitFor(s).next(()=>r)}getTargetCount(e){return Xi.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Xi.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Xi.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Xi.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Xi.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Xi.resolve(n)}containsKey(e,t){return Xi.resolve(this._i.containsKey(t))}}class qu{constructor(e,t){this.ui={},this.overlays={},this.ci=new ta(0),this.li=!1,this.li=!0,this.hi=new Lu,this.referenceDelegate=e(this),this.Pi=new $u(this),this.indexManager=new bu,this.remoteDocumentCache=function(e){return new zu(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new gu(t),this.Ii=new Mu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ou,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Uu(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Js("MemoryPersistence","Starting transaction:",e);const r=new Hu(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Xi.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Hu extends Yi{constructor(e){super(),this.currentSequenceNumber=e}}class Ku{constructor(e){this.persistence=e,this.Ri=new Fu,this.Vi=null}static mi(e){return new Ku(e)}get fi(){if(this.Vi)return this.Vi;throw ti(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Xi.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Xi.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Xi.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xi.forEach(this.fi,n=>{const r=Ii.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Bi.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Xi.or([()=>Xi.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Gu{constructor(e,t){this.persistence=e,this.pi=new xl(e=>oa(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Ru(this,t)}static mi(e,t){return new Gu(e,t)}Ei(){}di(e){return Xi.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Xi.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Xi.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,s.removeEntry(r,Bi.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Xi.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Xi.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Xi.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Xi.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vo(e.data.value)),t}br(e,t,n){return Xi.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Xi.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Wu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=jl(),r=jl();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Wu(e,t.fromCache,n,r)}}class Qu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Yu{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=x()?8:Zi(b())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ys(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ws(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Qu;return this.Ss(e,t,n).next(r=>{if(s.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>s.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Ys()<=V.DEBUG&&Js("QueryEngine","SDK will not create cache indexes for query:",gl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Xi.resolve()):(Ys()<=V.DEBUG&&Js("QueryEngine","Query:",gl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Ys()<=V.DEBUG&&Js("QueryEngine","The SDK decides to create cache indexes for query:",gl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ul(t))):Xi.resolve())}ys(e,t){if(ol(t))return Xi.resolve(null);let n=ul(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=fl(t,null,"F"),n=ul(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=jl(...r);return this.ps.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,r);return this.Cs(t,i,s,n.readTime)?this.ys(e,fl(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,r){return ol(t)||r.isEqual(Bi.min())?Xi.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(t,s);return this.Cs(t,i,n,r)?Xi.resolve(null):(Ys()<=V.DEBUG&&Js("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gl(t)),this.vs(e,i,t,Hi(r,$i)).next(e=>e))})}Ds(e,t){let n=new Va(bl(e));return t.forEach((t,r)=>{yl(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return Ys()<=V.DEBUG&&Js("QueryEngine","Using full collection scan to execute query:",gl(t)),this.ps.getDocumentsMatchingQuery(e,t,Gi.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Ju="LocalStore";class Xu{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Oa(vi),this.xs=new xl(e=>tl(e),nl),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pu(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Zu(e,t,n,r){return new Xu(e,t,n,r)}async function eh(e,t){const n=si(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=jl();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:s,addedBatchIds:i}))})})}function th(e){const t=si(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function nh(e,t,n){let r=jl(),s=jl();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=El();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Bi.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Js(Ju,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{ks:r,qs:s}})}function rh(e,t){const n=si(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=na),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function sh(e,t){const n=si(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(s=>s?(r=s,Xi.resolve(r)):n.Pi.allocateTargetId(e).next(s=>(r=new mu(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function ih(e,t,n){const r=si(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!ea(e))throw e;Js(Ju,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function ah(e,t,n){const r=si(e);let s=Bi.min(),i=jl();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=si(e),s=r.xs.get(n);return void 0!==s?Xi.resolve(r.Ms.get(s)):r.Pi.getTargetData(t,n)}(r,e,ul(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?s:Bi.min(),n?i:jl())).next(e=>(oh(r,vl(t),e),{documents:e,Qs:i})))}function oh(e,t,n){let r=e.Os.get(t)||Bi.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class lh{constructor(){this.activeTargetIds=Pl()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ch{constructor(){this.Mo=new lh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new lh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uh{Oo(e){}shutdown(){}}const hh="ConnectivityMonitor";class dh{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Js(hh,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Js(hh,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let fh=null;function ph(){return null===fh?fh=268435456+Math.round(2147483648*Math.random()):fh++,"0x"+fh.toString(16)}const mh="RestConnection",gh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yh{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===no?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,s){const i=ph(),a=this.zo(e,t.toUriEncodedString());Js(mh,`Sending RPC '${e}' ${i}:`,a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,s);const{host:l}=new URL(a),c=p(l);return this.Jo(e,a,o,n,c).then(t=>(Js(mh,`Received RPC '${e}' ${i}: `,t),t),t=>{throw Zs(mh,`RPC '${e}' ${i} failed with error: `,t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,s,i){return this.Go(e,t,n,r,s)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ws,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=gh[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class vh{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const bh="WebChannelConnection";class wh extends yh{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=ph();return new Promise((s,a)=>{const o=new Ms;o.setWithCredentials(!0),o.listenOnce(Ls.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Fs.NO_ERROR:const t=o.getResponseJson();Js(bh,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Fs.TIMEOUT:Js(bh,`RPC '${e}' ${i} timed out`),a(new ai(ii.DEADLINE_EXCEEDED,"Request time out"));break;case Fs.HTTP_ERROR:const n=o.getStatus();if(Js(bh,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ii).indexOf(t)>=0?t:ii.UNKNOWN}(t.status);a(new ai(e,t.message))}else a(new ai(ii.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ai(ii.UNAVAILABLE,"Connection failed."));break;default:ti(9055,{l_:e,streamId:i,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{Js(bh,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);Js(bh,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=ph(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Bs(),a=zs(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");Js(bh,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=i.createWebChannel(c,o);this.I_(u);let h=!1,d=!1;const f=new vh({Yo:t=>{d?Js(bh,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Js(bh,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),Js(bh,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Os.EventType.OPEN,()=>{d||(Js(bh,`RPC '${e}' stream ${r} transport opened.`),f.o_())}),p(u,Os.EventType.CLOSE,()=>{d||(d=!0,Js(bh,`RPC '${e}' stream ${r} transport closed`),f.a_(),this.E_(u))}),p(u,Os.EventType.ERROR,t=>{d||(d=!0,Zs(bh,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.a_(new ai(ii.UNAVAILABLE,"The operation could not be completed")))}),p(u,Os.EventType.MESSAGE,t=>{if(!d){const n=t.data[0];ri(!!n,16349);const s=n,i=s?.error||s[0]?.error;if(i){Js(bh,`RPC '${e}' stream ${r} received error:`,i);const t=i.status;let n=function(e){const t=yc[e];if(void 0!==t)return wc(t)}(t),s=i.message;void 0===n&&(n=ii.INTERNAL,s="Unknown error status: "+t+" with message "+i.message),d=!0,f.a_(new ai(n,s)),u.close()}else Js(bh,`RPC '${e}' stream ${r} received:`,n),f.u_(n)}}),p(a,Us.STAT_EVENT,t=>{t.stat===Vs.PROXY?Js(bh,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Vs.NOPROXY&&Js(bh,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function xh(){return"undefined"!=typeof document?document:null}function _h(e){return new Uc(e,!0)}class Eh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Js("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Sh="PersistentStream";class kh{constructor(e,t,n,r,s,i,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Eh(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===ii.RESOURCE_EXHAUSTED?(Xs(t.toString()),Xs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ii.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new ai(ii.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Js(Sh,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Js(Sh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Nh extends kh{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ti(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(ri(void 0===t||"string"==typeof t,58123),$a.fromBase64String(t||"")):(ri(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),$a.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?ii.UNKNOWN:wc(e.code);return new ai(t,e.message||"")}(a);n=new jc(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Yc(e,r.document.name),i=Hc(r.document.updateTime),a=r.document.createTime?Hc(r.document.createTime):Bi.min(),o=new To({mapValue:{fields:r.document.fields}}),l=Ao.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ac(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Yc(e,r.document),i=r.readTime?Hc(r.readTime):Bi.min(),a=Ao.newNoDocument(s,i),o=r.removedTargetIds||[];n=new Ac([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Yc(e,r.document),i=r.removedTargetIds||[];n=new Ac([],i,s,null)}else{if(!("filter"in t))return ti(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new gc(r,s),a=e.targetId;n=new Rc(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Bi.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Bi.min():t.readTime?Hc(t.readTime):Bi.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Zc(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=rl(r)?{documents:ru(e,r)}:{query:su(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=$c(e,t.resumeToken);const r=zc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Bi.min())>0){n.readTime=Bc(e,t.snapshotVersion.toTimestamp());const r=zc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ti(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Zc(this.serializer),t.removeTarget=e,this.q_(t)}}class Ch extends kh{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ri(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ri(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){ri(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(ri(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Hc(e.updateTime):Hc(t);return n.isEqual(Bi.min())&&(n=Hc(t)),new Jl(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Hc(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Zc(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>nu(this.serializer,e))};this.q_(t)}}class Th{}class Ih extends Th{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ai(ii.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Go(e,Gc(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ii.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ai(ii.UNKNOWN,e.toString())})}Ho(e,t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Ho(e,Gc(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ii.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ai(ii.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Ah{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xs(t),this.aa=!1):Js("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Rh="RemoteStore";class jh{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{zh(this)&&(Js(Rh,"Restarting streams for network reachability change."),await async function(e){const t=si(e);t.Ea.add(4),await Ph(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Dh(t)}(this))})}),this.Ra=new Ah(n,r)}}async function Dh(e){if(zh(e))for(const t of e.da)await t(!0)}async function Ph(e){for(const t of e.da)await t(!1)}function Mh(e,t){const n=si(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Uh(n)?Vh(n):ad(n).O_()&&Lh(n,t))}function Oh(e,t){const n=si(e),r=ad(n);n.Ia.delete(t),r.O_()&&Fh(n,t),0===n.Ia.size&&(r.O_()?r.L_():zh(n)&&n.Ra.set("Unknown"))}function Lh(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Bi.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ad(e).Y_(t)}function Fh(e,t){e.Va.Ue(t),ad(e).Z_(t)}function Vh(e){e.Va=new Pc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),ad(e).start(),e.Ra.ua()}function Uh(e){return zh(e)&&!ad(e).x_()&&e.Ia.size>0}function zh(e){return 0===si(e).Ea.size}function Bh(e){e.Va=void 0}async function $h(e){e.Ra.set("Online")}async function qh(e){e.Ia.forEach((t,n)=>{Lh(e,t)})}async function Hh(e,t){Bh(e),Uh(e)?(e.Ra.ha(t),Vh(e)):e.Ra.set("Unknown")}async function Kh(e,t,n){if(e.Ra.set("Online"),t instanceof jc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Js(Rh,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Gh(e,n)}else if(t instanceof Ac?e.Va.Ze(t):t instanceof Rc?e.Va.st(t):e.Va.tt(t),!n.isEqual(Bi.min()))try{const t=await th(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ia.get(r);s&&e.Ia.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken($a.EMPTY_BYTE_STRING,r.snapshotVersion)),Fh(e,t);const s=new mu(r.target,t,n,r.sequenceNumber);Lh(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Js(Rh,"Failed to raise snapshot:",t),await Gh(e,t)}}async function Gh(e,t,n){if(!ea(t))throw t;e.Ea.add(1),await Ph(e),e.Ra.set("Offline"),n||(n=()=>th(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Js(Rh,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Dh(e)})}function Wh(e,t){return t().catch(n=>Gh(e,n,t))}async function Qh(e){const t=si(e),n=od(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:na;for(;Yh(t);)try{const e=await rh(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Jh(t,e)}catch(e){await Gh(t,e)}Xh(t)&&Zh(t)}function Yh(e){return zh(e)&&e.Ta.length<10}function Jh(e,t){e.Ta.push(t);const n=od(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Xh(e){return zh(e)&&!od(e).x_()&&e.Ta.length>0}function Zh(e){od(e).start()}async function ed(e){od(e).ra()}async function td(e){const t=od(e);for(const n of e.Ta)t.ea(n.mutations)}async function nd(e,t,n){const r=e.Ta.shift(),s=pc.from(r,t,n);await Wh(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Qh(e)}async function rd(e,t){t&&od(e).X_&&await async function(e,t){if(function(e){return bc(e)&&e!==ii.ABORTED}(t.code)){const n=e.Ta.shift();od(e).B_(),await Wh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Qh(e)}}(e,t),Xh(e)&&Zh(e)}async function sd(e,t){const n=si(e);n.asyncQueue.verifyOperationInProgress(),Js(Rh,"RemoteStore received new credentials");const r=zh(n);n.Ea.add(3),await Ph(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Dh(n)}async function id(e,t){const n=si(e);t?(n.Ea.delete(2),await Dh(n)):t||(n.Ea.add(2),await Ph(n),n.Ra.set("Unknown"))}function ad(e){return e.ma||(e.ma=function(e,t,n){const r=si(e);return r.sa(),new Nh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:$h.bind(null,e),t_:qh.bind(null,e),r_:Hh.bind(null,e),H_:Kh.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Uh(e)?Vh(e):e.Ra.set("Unknown")):(await e.ma.stop(),Bh(e))})),e.ma}function od(e){return e.fa||(e.fa=function(e,t,n){const r=si(e);return r.sa(),new Ch(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:ed.bind(null,e),r_:rd.bind(null,e),ta:td.bind(null,e),na:nd.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Qh(e)):(await e.fa.stop(),e.Ta.length>0&&(Js(Rh,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class ld{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new ld(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ai(ii.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cd(e,t){if(Xs("AsyncQueue",`${t}: ${e}`),ea(e))return new ai(ii.UNAVAILABLE,`${t}: ${e}`);throw e}class ud{static emptySet(e){return new ud(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ii.comparator(t.key,n.key):(e,t)=>Ii.comparator(e.key,t.key),this.keyedMap=kl(),this.sortedSet=new Oa(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ud))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ud;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class hd{constructor(){this.ga=new Oa(Ii.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ti(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class dd{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new dd(e,t,ud.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class fd{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class pd{constructor(){this.queries=md(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=si(e),r=n.queries;n.queries=md(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new ai(ii.ABORTED,"Firestore shutting down"))}}function md(){return new xl(e=>ml(e),pl)}async function gd(e,t){const n=si(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new fd,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=cd(e,`Initialization of query '${gl(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&wd(n)}async function yd(e,t){const n=si(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vd(e,t){const n=si(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(s)&&(r=!0);t.wa=s}}r&&wd(n)}function bd(e,t,n){const r=si(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function wd(e){e.Ca.forEach(e=>{e.next()})}var xd,_d;(_d=xd||(xd={})).Ma="default",_d.Cache="cache";class Ed{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new dd(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xd.Cache}}class Sd{constructor(e){this.key=e}}class kd{constructor(e){this.key=e}}class Nd{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=jl(),this.mutatedKeys=jl(),this.eu=bl(e),this.tu=new ud(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new hd,r=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=yl(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=d?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ti(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=r??!1;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==i.length||l?{snapshot:new dd(this.query,e.tu,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hd,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=jl(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new kd(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Sd(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=jl();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return dd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Cd="SyncEngine";class Td{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Id{constructor(e){this.key=e,this.hu=!1}}class Ad{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new xl(e=>ml(e),pl),this.Iu=new Map,this.Eu=new Set,this.du=new Oa(Ii.comparator),this.Au=new Map,this.Ru=new Fu,this.Vu={},this.mu=new Map,this.fu=Su.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Rd(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Xd(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Dd(r,t,n,!0),s}async function jd(e,t){const n=Xd(e);await Dd(n,t,!0,!1)}async function Dd(e,t,n,r){const s=await sh(e.localStore,ul(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await Pd(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&Mh(e.remoteStore,s),o}async function Pd(e,t,n,r,s){e.pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.ru(n);s.Cs&&(s=await ah(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return Kd(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const i=await ah(e.localStore,t,!0),a=new Nd(t,i.Qs),o=a.ru(i.documents),l=Ic.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Kd(e,n,c.au);const u=new Td(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Md(e,t,n){const r=si(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(e=>!pl(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ih(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Oh(r.remoteStore,s.targetId),qd(r,s.targetId)}).catch(Ji)):(qd(r,s.targetId),await ih(r.localStore,s.targetId,!0))}async function Od(e,t){const n=si(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Oh(n.remoteStore,r.targetId))}async function Ld(e,t){const n=si(e);try{const e=await function(e,t){const n=si(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken($a.EMPTY_BYTE_STRING,Bi.min()).withLastLimboFreeSnapshotVersion(Bi.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&a.push(n.Pi.updateTargetData(e,c))});let o=El(),l=jl();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(nh(e,i,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(Bi.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Xi.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(ri(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?ri(r.hu,14607):e.removedDocuments.size>0&&(ri(r.hu,42227),r.hu=!1))}),await Qd(n,e,t)}catch(e){await Ji(e)}}function Fd(e,t,n){const r=si(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=si(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.Sa)s.va(t)&&(r=!0)}),r&&wd(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Vd(e,t,n){const r=si(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let e=new Oa(Ii.comparator);e=e.insert(i,Ao.newNoDocument(i,Bi.min()));const n=jl().add(i),s=new Tc(Bi.min(),new Map,new Oa(vi),e,n);await Ld(r,s),r.du=r.du.remove(i),r.Au.delete(t),Wd(r)}else await ih(r.localStore,t,!1).then(()=>qd(r,t,n)).catch(Ji)}async function Ud(e,t){const n=si(e),r=t.batch.batchId;try{const e=await function(e,t){const n=si(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=Xi.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);ri(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=jl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);$d(n,r,null),Bd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qd(n,e)}catch(e){await Ji(e)}}async function zd(e,t,n){const r=si(e);try{const e=await function(e,t){const n=si(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(ri(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);$d(r,t,n),Bd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Qd(r,e)}catch(n){await Ji(n)}}function Bd(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function $d(e,t,n){const r=si(e);let s=r.Vu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function qd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Hd(e,t)})}function Hd(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Oh(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Wd(e))}function Kd(e,t,n){for(const r of n)r instanceof Sd?(e.Ru.addReference(r.key,t),Gd(e,r)):r instanceof kd?(Js(Cd,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Hd(e,r.key)):ti(19791,{wu:r})}function Gd(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Js(Cd,"New document in limbo: "+n),e.Eu.add(r),Wd(e))}function Wd(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Ii(Ni.fromString(t)),r=e.fu.next();e.Au.set(r,new Id(n)),e.du=e.du.insert(n,r),Mh(e.remoteStore,new mu(ul(al(n.path)),r,"TargetPurposeLimboResolution",ta.ce))}}async function Qd(e,t,n){const r=si(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){const t=e?!e.fromCache:n?.targetChanges.get(o.targetId)?.current;r.sharedClientState.updateQueryState(o.targetId,t?"current":"not-current")}if(e){s.push(e);const t=Wu.As(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(e,t){const n=si(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Xi.forEach(t,t=>Xi.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Xi.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!ea(e))throw e;Js(Ju,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,s)}}}(r.localStore,i))}async function Yd(e,t){const n=si(e);if(!n.currentUser.isEqual(t)){Js(Cd,"User change. New user:",t.toKey());const e=await eh(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new ai(ii.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Qd(n,e.Ls)}}function Jd(e,t){const n=si(e),r=n.Au.get(t);if(r&&r.hu)return jl().add(r.key);{let e=jl();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Xd(e){const t=si(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ld.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Vd.bind(null,t),t.Pu.H_=vd.bind(null,t.eventManager),t.Pu.yu=bd.bind(null,t.eventManager),t}function Zd(e){const t=si(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ud.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zd.bind(null,t),t}class ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_h(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Zu(this.persistence,new Yu,e.initialUser,this.serializer)}Cu(e){return new qu(Ku.mi,this.serializer)}Du(e){return new ch}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ef.provider={build:()=>new ef};class tf extends ef{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ri(this.persistence.referenceDelegate instanceof Gu,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Iu(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Eu.withCacheSize(this.cacheSizeBytes):Eu.DEFAULT;return new qu(e=>Gu.mi(e,t),this.serializer)}}class nf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Fd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Yd.bind(null,this.syncEngine),await id(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new pd}createDatastore(e){const t=_h(e.databaseInfo.databaseId),n=function(e){return new wh(e)}(e.databaseInfo);return function(e,t,n,r){return new Ih(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new jh(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>Fd(this.syncEngine,e,0),dh.v()?new dh:new uh)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Ad(e,t,n,r,s,i);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){const t=si(e);Js(Rh,"RemoteStore shutting down."),t.Ea.add(5),await Ph(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}nf.provider={build:()=>new nf};class rf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class sf{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ai(ii.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=si(e),r={documents:t.map(e=>Qc(n.serializer,e))},s=await n.Ho("BatchGetDocuments",n.serializer.databaseId,Ni.emptyPath(),r,t.length),i=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){ri(!!t.found,43571),t.found.name,t.found.updateTime;const n=Yc(e,t.found.name),r=Hc(t.found.updateTime),s=t.found.createTime?Hc(t.found.createTime):Bi.min(),i=new To({mapValue:{fields:t.found.fields}});return Ao.newFoundDocument(n,r,s,i)}(e,t):"missing"in t?function(e,t){ri(!!t.missing,3894),ri(!!t.readTime,22933);const n=Yc(e,t.missing),r=Hc(t.readTime);return Ao.newNoDocument(n,r)}(e,t):ti(7234,{result:t})}(n.serializer,e);i.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=i.get(e.toString());ri(!!t,55234,{key:e}),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new hc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=Ii.fromPath(t);this.mutations.push(new dc(n,this.precondition(n)))}),await async function(e,t){const n=si(e),r={writes:t.map(e=>nu(n.serializer,e))};await n.Go("Commit",n.serializer.databaseId,Ni.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ti(50498,{Gu:e.constructor.name});t=Bi.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ai(ii.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Bi.min())?Xl.exists(!1):Xl.updateTime(t):Xl.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Bi.min()))throw new ai(ii.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xl.updateTime(t)}return Xl.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class af{constructor(e,t,n,r,s){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=s,this.zu=n.maxAttempts,this.M_=new Eh(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new sf(this.datastore),t=this.Hu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Yu(e)}))}).catch(e=>{this.Yu(e)})})}Hu(e){try{const t=this.updateFunction(e);return!ra(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!bc(t)}return!1}}const of="FirestoreClient";class lf{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Gs.UNAUTHENTICATED,this.clientId=yi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{Js(of,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Js(of,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=cd(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function cf(e,t){e.asyncQueue.verifyOperationInProgress(),Js(of,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await eh(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function uf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await hf(e);Js(of,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>sd(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>sd(t.remoteStore,n)),e._onlineComponents=t}async function hf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Js(of,"Using user provided OfflineComponentProvider");try{await cf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===ii.FAILED_PRECONDITION||e.code===ii.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Zs("Error using user provided cache. Falling back to memory cache: "+n),await cf(e,new ef)}}else Js(of,"Using default OfflineComponentProvider"),await cf(e,new tf(void 0));return e._offlineComponents}async function df(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Js(of,"Using user provided OnlineComponentProvider"),await uf(e,e._uninitializedComponentsProvider._online)):(Js(of,"Using default OnlineComponentProvider"),await uf(e,new nf))),e._onlineComponents}function ff(e){return df(e).then(e=>e.syncEngine)}function pf(e){return df(e).then(e=>e.datastore)}async function mf(e){const t=await df(e),n=t.eventManager;return n.onListen=Rd.bind(null,t.syncEngine),n.onUnlisten=Md.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=jd.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Od.bind(null,t.syncEngine),n}function gf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new oi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new rf({next:o=>{i.Nu(),t.enqueueAndForget(()=>yd(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new ai(ii.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new ai(ii.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Ed(al(n.path),i,{includeMetadataChanges:!0,qa:!0});return gd(e,a)}(await mf(e),e.asyncQueue,t,n,r)),r.promise}function yf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new oi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new rf({next:n=>{i.Nu(),t.enqueueAndForget(()=>yd(e,a)),n.fromCache&&"server"===r.source?s.reject(new ai(ii.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Ed(n,i,{includeMetadataChanges:!0,qa:!0});return gd(e,a)}(await mf(e),e.asyncQueue,t,n,r)),r.promise}function vf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const bf=new Map,wf="firestore.googleapis.com",xf=!0;class _f{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new ai(ii.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wf,this.ssl=xf}else this.host=e.host,this.ssl=e.ssl??xf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=_u;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Nu)throw new ai(ii.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ai(ii.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vf(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ai(ii.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ai(ii.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ai(ii.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ef{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _f({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ai(ii.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ai(ii.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _f(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ci;switch(e.type){case"firstParty":return new fi(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ai(ii.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bf.get(e);t&&(Js("ComponentProvider","Removing Datastore"),bf.delete(e),t.terminate())}(this),Promise.resolve()}}function Sf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Mi(e,Ef);const s=p(t),i=e._getSettings(),o={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(m(`https://${l}`),v("Firestore",!0)),i.host!==wf&&i.host!==l&&Zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!N(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Gs.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(i)),""].join(".")}(r.mockUserToken,e._app?.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ai(ii.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Gs(s)}e._authCredentials=new ui(new li(t,n))}}class kf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new kf(this.firestore,e,this._query)}}class Nf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nf(this.firestore,e,this._key)}toJSON(){return{type:Nf._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Fi(t,Nf._jsonSchema))return new Nf(e,n||null,new Ii(Ni.fromString(t.referencePath)))}}Nf._jsonSchemaVersion="firestore/documentReference/1.0",Nf._jsonSchema={type:Li("string",Nf._jsonSchemaVersion),referencePath:Li("string")};class Cf extends kf{constructor(e,t,n){super(e,t,al(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nf(this.firestore,null,new Ii(e))}withConverter(e){return new Cf(this.firestore,e,this._path)}}function Tf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=D(e),Ai("collection","path",t),e instanceof Ef){const n=Ni.fromString(t,...r);return ji(n),new Cf(e,null,n)}{if(!(e instanceof Nf||e instanceof Cf))throw new ai(ii.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ni.fromString(t,...r));return ji(n),new Cf(e.firestore,null,n)}}function If(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=D(e),1===arguments.length&&(t=yi.newId()),Ai("doc","path",t),e instanceof Ef){const n=Ni.fromString(t,...r);return Ri(n),new Nf(e,null,new Ii(n))}{if(!(e instanceof Nf||e instanceof Cf))throw new ai(ii.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ni.fromString(t,...r));return Ri(n),new Nf(e.firestore,e instanceof Cf?e.converter:null,new Ii(n))}}const Af="AsyncQueue";class Rf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Eh(this,"async_queue_retry"),this._c=()=>{const e=xh();e&&Js(Af,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=xh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=xh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new oi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ea(e))throw e;Js(Af,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Xs("INTERNAL UNHANDLED ERROR: ",jf(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=ld.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&ti(47125,{Pc:jf(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function jf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Df(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Pf extends Ef{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Rf,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rf(e),this._firestoreClient=void 0,await e}}}function Mf(e){if(e._terminated)throw new ai(ii.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Of(e),e._firestoreClient}function Of(e){const t=e._freezeSettings(),n=function(e,t,n,r){return new to(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,vf(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new lf(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}class Lf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lf($a.fromBase64String(e))}catch(e){throw new ai(ii.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Lf($a.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Lf._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fi(e,Lf._jsonSchema))return Lf.fromBase64String(e.bytes)}}Lf._jsonSchemaVersion="firestore/bytes/1.0",Lf._jsonSchema={type:Li("string",Lf._jsonSchemaVersion),bytes:Li("string")};class Ff{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ai(ii.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ti(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vf{constructor(e){this._methodName=e}}class Uf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ai(ii.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ai(ii.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return vi(this._lat,e._lat)||vi(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Uf._jsonSchemaVersion}}static fromJSON(e){if(Fi(e,Uf._jsonSchema))return new Uf(e.latitude,e.longitude)}}Uf._jsonSchemaVersion="firestore/geoPoint/1.0",Uf._jsonSchema={type:Li("string",Uf._jsonSchemaVersion),latitude:Li("number"),longitude:Li("number")};class zf{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:zf._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fi(e,zf._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new zf(e.vectorValues);throw new ai(ii.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zf._jsonSchemaVersion="firestore/vectorValue/1.0",zf._jsonSchema={type:Li("string",zf._jsonSchemaVersion),vectorValues:Li("object")};const Bf=/^__.*__$/;class $f{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new oc(e,this.data,this.fieldMask,t,this.fieldTransforms):new ac(e,this.data,t,this.fieldTransforms)}}class qf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new oc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Hf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ti(40011,{Ac:e})}}class Kf{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return lp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Hf(this.Ac)&&Bf.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Gf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||_h(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Kf({Ac:e,methodName:t,Dc:n,path:Ti.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wf(e){const t=e._freezeSettings(),n=_h(e._databaseId);return new Gf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Qf(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);sp("Data must be an object, but it was:",a,r);const o=np(r,a);let l,c;if(i.merge)l=new za(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=ip(t,r,n);if(!a.contains(s))throw new ai(ii.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);cp(e,s)||e.push(s)}l=new za(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new $f(new To(o),l,c)}class Yf extends Vf{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yf}}class Jf extends Vf{_toFieldTransform(e){return new Yl(e.path,new Bl)}isEqual(e){return e instanceof Jf}}function Xf(e,t,n,r){const s=e.Cc(1,t,n);sp("Data must be an object, but it was:",s,r);const i=[],a=To.empty();Pa(r,(e,r)=>{const o=op(t,e,n);r=D(r);const l=s.yc(o);if(r instanceof Yf)i.push(o);else{const e=tp(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new za(i);return new qf(a,o,s.fieldTransforms)}function Zf(e,t,n,r,s,i){const a=e.Cc(1,t,n),o=[ip(t,r,n)],l=[s];if(i.length%2!=0)throw new ai(ii.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)o.push(ip(t,i[d])),l.push(i[d+1]);const c=[],u=To.empty();for(let d=o.length-1;d>=0;--d)if(!cp(c,o[d])){const e=o[d];let t=l[d];t=D(t);const n=a.yc(e);if(t instanceof Yf)c.push(e);else{const r=tp(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new za(c);return new qf(u,h,a.fieldTransforms)}function ep(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return tp(n,e.Cc(r?4:3,t))}function tp(e,t){if(rp(e=D(e)))return sp("Unsupported field value:",t,e),np(e,t);if(e instanceof Vf)return function(e,t){if(!Hf(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=tp(s,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=D(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ll(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=zi.fromDate(e);return{timestampValue:Bc(t.serializer,n)}}if(e instanceof zi){const n=new zi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Bc(t.serializer,n)}}if(e instanceof Uf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Lf)return{bytesValue:$c(t.serializer,e._byteString)};if(e instanceof Nf){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Kc(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof zf)return function(e,t){return{mapValue:{fields:{[so]:{stringValue:oo},[lo]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Ml(t.serializer,e)})}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${Pi(e)}`)}(e,t)}function np(e,t){const n={};return Ma(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pa(e,(e,r)=>{const s=tp(r,t.mc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function rp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof zi||e instanceof Uf||e instanceof Lf||e instanceof Nf||e instanceof Vf||e instanceof zf)}function sp(e,t,n){if(!rp(n)||!Di(n)){const r=Pi(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function ip(e,t,n){if((t=D(t))instanceof Ff)return t._internalPath;if("string"==typeof t)return op(e,t);throw lp("Field path arguments must be of type string or ",e,!1,void 0,n)}const ap=new RegExp("[~\\*/\\[\\]]");function op(e,t,n){if(t.search(ap)>=0)throw lp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ff(...t.split("."))._internalPath}catch(r){throw lp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function lp(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new ai(ii.INVALID_ARGUMENT,o+e+l)}function cp(e,t){return e.some(e=>e.isEqual(t))}class up{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hp extends up{data(){return super.data()}}function dp(e,t){return"string"==typeof t?op(e,t):t instanceof Ff?t._internalPath:t._delegate._internalPath}function fp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ai(ii.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pp{}class mp extends pp{}function gp(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof pp&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof bp).length,n=e.filter(e=>e instanceof yp).length;if(t>1||t>0&&n>0)throw new ai(ii.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class yp extends mp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new yp(e,t,n)}_apply(e){const t=this._parse(e);return Tp(e._query,t),new kf(e.firestore,e.converter,dl(e._query,t))}_parse(e){const t=Wf(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new ai(ii.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){Cp(a,i);const t=[];for(const n of a)t.push(Np(r,e,n));o={arrayValue:{values:t}}}else o=Np(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Cp(a,i),o=ep(n,t,a,"in"===i||"not-in"===i);return Lo.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function vp(e,t,n){const r=t,s=dp("where",e);return yp._create(s,r,n)}class bp extends pp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bp(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Fo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Tp(n,s),n=dl(n,s)}(e._query,t),new kf(e.firestore,e.converter,dl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class wp extends mp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wp(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ai(ii.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ai(ii.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Po(t,n)}(e._query,this._field,this._direction);return new kf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new sl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function xp(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=dp("orderBy",e);return wp._create(n,t)}class _p extends mp{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new _p(e,t,n)}_apply(e){return new kf(e.firestore,e.converter,fl(e._query,this._limit,this._limitType))}}function Ep(e){return Oi("limit",e),_p._create("limit",e,"F")}class Sp extends mp{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Sp(e,t,n)}_apply(e){const t=kp(e,this.type,this._docOrFields,this._inclusive);return new kf(e.firestore,e.converter,function(e,t){return new sl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function kp(e,t,n,r){if(n[0]=D(n[0]),n[0]instanceof up)return function(e,t,n,r,s){if(!r)throw new ai(ii.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const i=[];for(const a of cl(e))if(a.field.isKeyField())i.push(bo(t,r.key));else{const e=r.data.field(a.field);if(Xa(e))throw new ai(ii.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=a.field.canonicalString();throw new ai(ii.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}i.push(e)}return new Ro(i,s)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const s=Wf(e.firestore);return function(e,t,n,r,s,i){const a=e.explicitOrderBy;if(s.length>a.length)throw new ai(ii.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const o=[];for(let l=0;l<s.length;l++){const i=s[l];if(a[l].field.isKeyField()){if("string"!=typeof i)throw new ai(ii.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof i}`);if(!ll(e)&&-1!==i.indexOf("/"))throw new ai(ii.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${i}' contains a slash.`);const n=e.path.child(Ni.fromString(i));if(!Ii.isDocumentKey(n))throw new ai(ii.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const s=new Ii(n);o.push(bo(t,s))}else{const e=ep(n,r,i);o.push(e)}}return new Ro(o,i)}(e._query,e.firestore._databaseId,s,t,n,r)}}function Np(e,t,n){if("string"==typeof(n=D(n))){if(""===n)throw new ai(ii.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ll(t)&&-1!==n.indexOf("/"))throw new ai(ii.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ni.fromString(n));if(!Ii.isDocumentKey(r))throw new ai(ii.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bo(e,new Ii(r))}if(n instanceof Nf)return bo(e,n._key);throw new ai(ii.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pi(n)}.`)}function Cp(e,t){if(!Array.isArray(e)||0===e.length)throw new ai(ii.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Tp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ai(ii.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ai(ii.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Ip{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ka(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ti(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Pa(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){const t=e.fields?.[lo].arrayValue?.values?.map(e=>Ka(e.doubleValue));return new zf(t)}convertGeoPoint(e){return new Uf(Ka(e.latitude),Ka(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Za(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(eo(e));default:return null}}convertTimestamp(e){const t=Ha(e);return new zi(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ni.fromString(e);ri(pu(n),9688,{name:e});const r=new ro(n.get(1),n.get(3)),s=new Ii(n.popFirst(5));return r.isEqual(t)||Xs(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Ap(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Rp extends Ip{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nf(this.firestore,null,t)}}class jp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dp extends up{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Pp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(dp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ai(ii.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Dp._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Dp._jsonSchemaVersion="firestore/documentSnapshot/1.0",Dp._jsonSchema={type:Li("string",Dp._jsonSchemaVersion),bundleSource:Li("string","DocumentSnapshot"),bundleName:Li("string"),bundle:Li("string")};class Pp extends Dp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Mp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new jp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Pp(this._firestore,this._userDataWriter,n.key,n,new jp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ai(ii.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Pp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new jp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Pp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new jp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Op(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ai(ii.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yi.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Op(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ti(61501,{type:e})}}function Lp(e){e=Mi(e,Nf);const t=Mi(e.firestore,Pf);return gf(Mf(t),e._key).then(n=>Kp(t,e,n))}Mp._jsonSchemaVersion="firestore/querySnapshot/1.0",Mp._jsonSchema={type:Li("string",Mp._jsonSchemaVersion),bundleSource:Li("string","QuerySnapshot"),bundleName:Li("string"),bundle:Li("string")};class Fp extends Ip{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nf(this.firestore,null,t)}}function Vp(e){e=Mi(e,kf);const t=Mi(e.firestore,Pf),n=Mf(t),r=new Fp(t);return fp(e._query),yf(n,e._query).then(n=>new Mp(t,r,e,n))}function Up(e,t,n){e=Mi(e,Nf);const r=Mi(e.firestore,Pf),s=Ap(e.converter,t,n);return Hp(r,[Qf(Wf(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Xl.none())])}function zp(e,t,n){e=Mi(e,Nf);const r=Mi(e.firestore,Pf),s=Wf(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=D(t))||t instanceof Ff?Zf(s,"updateDoc",e._key,t,n,o):Xf(s,"updateDoc",e._key,t),Hp(r,[i.toMutation(e._key,Xl.exists(!0))])}function Bp(e){return Hp(Mi(e.firestore,Pf),[new hc(e._key,Xl.none())])}function $p(e,t){const n=Mi(e.firestore,Pf),r=If(e),s=Ap(e.converter,t);return Hp(n,[Qf(Wf(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Xl.exists(!1))]).then(()=>r)}function qp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=D(e);let s={includeMetadataChanges:!1,source:"default"},i=0;"object"!=typeof n[i]||Df(n[i])||(s=n[i++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Df(n[i])){const e=n[i];n[i]=e.next?.bind(e),n[i+1]=e.error?.bind(e),n[i+2]=e.complete?.bind(e)}let o,l,c;if(e instanceof Nf)l=Mi(e.firestore,Pf),c=al(e._key.path),o={next:t=>{n[i]&&n[i](Kp(l,e,t))},error:n[i+1],complete:n[i+2]};else{const t=Mi(e,kf);l=Mi(t.firestore,Pf),c=t._query;const r=new Fp(l);o={next:e=>{n[i]&&n[i](new Mp(l,r,t,e))},error:n[i+1],complete:n[i+2]},fp(e._query)}return function(e,t,n,r){const s=new rf(r),i=new Ed(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>gd(await mf(e),i)),()=>{s.Nu(),e.asyncQueue.enqueueAndForget(async()=>yd(await mf(e),i))}}(Mf(l),c,a,o)}function Hp(e,t){return function(e,t){const n=new oi;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Zd(e);try{const e=await function(e,t){const n=si(e),r=zi.now(),s=t.reduce((e,t)=>e.add(t.key),jl());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=El(),l=jl();return n.Ns.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=sc(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new oc(e.key,t,Io(t.value.mapValue),Xl.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Nl(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Oa(vi)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Qd(r,e.changes),await Qh(r.remoteStore)}catch(e){const t=cd(e,"Failed to persist write");n.reject(t)}}(await ff(e),t,n)),n.promise}(Mf(e),t)}function Kp(e,t,n){const r=n.docs.get(t._key),s=new Fp(e);return new Dp(e,s,t._key,r,new jp(n.hasPendingWrites,n.fromCache),t.converter)}const Gp={maxAttempts:5};class Wp{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wf(e)}set(e,t,n){this._verifyNotCommitted();const r=Qp(e,this._firestore),s=Ap(r.converter,t,n),i=Qf(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,Xl.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Qp(e,this._firestore);let s;for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return s="string"==typeof(t=D(t))||t instanceof Ff?Zf(this._dataReader,"WriteBatch.update",r._key,t,n,a):Xf(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(s.toMutation(r._key,Xl.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qp(e,this._firestore);return this._mutations=this._mutations.concat(new hc(t._key,Xl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ai(ii.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qp(e,t){if((e=D(e)).firestore!==t)throw new ai(ii.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Yp{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wf(e)}get(e){const t=Qp(e,this._firestore),n=new Rp(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return ti(24041);const r=e[0];if(r.isFoundDocument())return new up(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new up(this._firestore,n,t._key,null,t.converter);throw ti(18433,{doc:r})})}set(e,t,n){const r=Qp(e,this._firestore),s=Ap(r.converter,t,n),i=Qf(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,n);return this._transaction.set(r._key,i),this}update(e,t,n){const r=Qp(e,this._firestore);let s;for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return s="string"==typeof(t=D(t))||t instanceof Ff?Zf(this._dataReader,"Transaction.update",r._key,t,n,a):Xf(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,s),this}delete(e){const t=Qp(e,this._firestore);return this._transaction.delete(t._key),this}}class Jp extends Yp{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qp(e,this._firestore),n=new Fp(this._firestore);return super.get(e).then(e=>new Dp(this._firestore,n,t._key,e._document,new jp(!1,!1),t.converter))}}function Xp(){return new Jf("serverTimestamp")}function Zp(e){return Mf(e=Mi(e,Pf)),new Wp(e,t=>Hp(e,t))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ws=e}(We),$e(new P("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new Pf(new hi(e.getProvider("auth-internal")),new mi(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ai(ii.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ro(e.options.projectId,t)}(i,r),i);return s={useFetchStreams:t,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Je(Hs,Ks,e),Je(Hs,Ks,"esm2020")}();Je("firebase","12.0.0","app");const em=Qe({apiKey:"AIzaSyB59jgrSOfRf0D09D5TH-ivZXUGPbEQsRU",authDomain:"pg-bma.firebaseapp.com",projectId:"pg-bma",storageBucket:"pg-bma.firebasestorage.app",messagingSenderId:"363463917163",appId:"1:363463917163:web:c76de01c71fda0f986bb2e"}),tm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();const t=qe(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=qe(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(N(n.getOptions(),t??{}))return e;ft(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ss,persistence:[Pr,pr,br]}),r=d("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ts)return;const r=t?.token;Is!==r&&(Is=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){D(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){D(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=u("auth");return i&&Mn(n,`http://${i}`),n}(em),nm=function(e,t){const n="object"==typeof e?e:Ye(),r="string"==typeof e?e:t||no,s=qe(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Sf(s,...e)}return s}(em),rm='"primejet-bma-dev',sm=async(e,t)=>{if(!e||!t)throw new Error("Email and password are required.");return await function(e,t,n){return He(e.app)?Promise.reject(gt(e)):lr(D(e),Wn.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&cr(e),t})}(tm,e,t)},im=e=>function(e,t,n,r){return D(e).onAuthStateChanged(t,n,r)}(tm,async t=>{if(t&&!t.isAnonymous){const n=await(async e=>{const t=If(nm,`artifacts/${rm}/users`,e),n=await Lp(t);return n.exists()?n.data():null})(t.uid);if(n)e({...t,...n});else{const n=await(async(e,t)=>{const n=If(nm,`artifacts/${rm}/users`,e),r={email:t,role:"Cashier",status:"active",createdAt:Xp()};return await Up(n,r),r})(t.uid,t.email);e({...t,...n})}}else e(null)});var am=n(579);const om=(0,e.createContext)({user:null,loading:!0}),lm=t=>{let{children:n}=t;const[r,s]=(0,e.useState)(null),[i,a]=(0,e.useState)(!0);(0,e.useEffect)(()=>{const e=im(e=>{s(e),a(!1)});return e},[]);const o={user:r,loading:i};return(0,am.jsx)(om.Provider,{value:o,children:!i&&n})},cm=()=>(0,e.useContext)(om),um=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("DEBUG"===e)return;const r=`%c[${e}]%c ${t}`;let s="color: gray;";switch(e){case"INFO":s="color: #1E90FF; font-weight: bold;";break;case"WARN":s="color: #FFD700; font-weight: bold;";break;case"ERROR":s="color: #DC143C; font-weight: bold;"}console.log(r,s,"color: inherit;",n)};class hm extends e.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){um("ERROR","Uncaught application error",{message:e.message,stack:e.stack,componentStack:t.componentStack})}render(){return this.state.hasError?(0,am.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100 text-center",children:(0,am.jsxs)("div",{children:[(0,am.jsx)("h1",{className:"text-2xl font-bold text-red-600",children:"Something went wrong."}),(0,am.jsx)("p",{className:"text-gray-700 mt-2",children:"An unexpected error has occurred. The development team has been notified."}),(0,am.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Reload Page"})]})}):this.props.children}}const dm=hm,fm=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&n.indexOf(e)===t).join(" ")};var pm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const mm=(0,e.forwardRef)((t,n)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:c,...u}=t;return(0,e.createElement)("svg",{ref:n,...pm,width:s,height:s,stroke:r,strokeWidth:a?24*Number(i)/Number(s):i,className:fm("lucide",o),...u},[...c.map(t=>{let[n,r]=t;return(0,e.createElement)(n,r)}),...Array.isArray(l)?l:[l]])}),gm=(t,n)=>{const r=(0,e.forwardRef)((r,s)=>{let{className:i,...a}=r;return(0,e.createElement)(mm,{ref:s,iconNode:n,className:fm(`lucide-${o=t,o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,i),...a});var o});return r.displayName=`${t}`,r},ym=gm("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),vm=gm("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),bm=gm("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),wm=gm("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]),xm=gm("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),_m=gm("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),Em=gm("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Sm=gm("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),km=gm("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),Nm=gm("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Cm=gm("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),Tm=gm("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]),Im=gm("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),Am=gm("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Rm=gm("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),jm=gm("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Dm=gm("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Pm=gm("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]),Mm={ADMIN:"Admin",FINANCE_LEAD:"Finance Lead",MANAGER:"Manager",CASHIER:"Cashier"},Om=["Logistics & Fuel","Maintenance & Repairs","Utilities (Electricity, Water)","Salaries & Wages","Office Supplies","Marketing & Advertising","Taxes & Levies","Other"],Lm=[{id:"Dashboard",icon:ym,label:"Dashboard",module:"Home",roles:[Mm.ADMIN,Mm.FINANCE_LEAD,Mm.MANAGER,Mm.CASHIER]},{id:"FinancialStatements",icon:vm,label:"Financials",module:"Finance",roles:[Mm.ADMIN,Mm.FINANCE_LEAD]},{id:"RevenueAssurance",icon:bm,label:"Revenue Assurance",module:"Finance",roles:[Mm.ADMIN,Mm.FINANCE_LEAD]},{id:"AssetAndLoan",icon:wm,label:"Assets & Loans",module:"Finance",roles:[Mm.ADMIN,Mm.FINANCE_LEAD]},{id:"AssetAndLoan",icon:wm,label:"Assets & Loans",module:"Finance",roles:[Mm.ADMIN,Mm.FINANCE_LEAD]},{id:"TaxCompliance",icon:xm,label:"Tax Compliance",module:"Finance",roles:[Mm.ADMIN,Mm.FINANCE_LEAD]},{id:"PlantStatus",icon:_m,label:"Plant Status",module:"Operations",roles:[Mm.ADMIN,Mm.MANAGER]},{id:"Inventory",icon:Em,label:"Inventory",module:"Operations",roles:[Mm.ADMIN,Mm.MANAGER,Mm.CASHIER]},{id:"Logistics",icon:Sm,label:"Logistics",module:"Operations",roles:[Mm.ADMIN,Mm.MANAGER]},{id:"SalesAnalytics",icon:km,label:"Sales Analytics",module:"Sales",roles:[Mm.ADMIN,Mm.FINANCE_LEAD,Mm.MANAGER]},{id:"CustomerHub",icon:Nm,label:"Customer Hub",module:"Sales",roles:[Mm.ADMIN,Mm.MANAGER]},{id:"TransactionHistory",icon:Cm,label:"Transaction History",module:"Data Entry",roles:[Mm.ADMIN,Mm.FINANCE_LEAD,Mm.MANAGER]},{id:"DailyLog",icon:Tm,label:"Daily Transaction Log (POS)",module:"Data Entry",roles:[Mm.ADMIN,Mm.CASHIER]},{id:"ApprovalQueue",icon:Im,label:"Approval Queue",module:"Data Entry",roles:[Mm.ADMIN,Mm.MANAGER]},{id:"UserManagement",icon:Am,label:"User Management",module:"Admin",roles:[Mm.ADMIN]},{id:"Configuration",icon:Rm,label:"Configuration",module:"Admin",roles:[Mm.ADMIN]},{id:"DataMigration",icon:jm,label:"Data Migration",module:"Admin",roles:[Mm.ADMIN]},{id:"AuditLog",icon:Dm,label:"Audit Log",module:"Admin",roles:[Mm.ADMIN]},{id:"AppLogViewer",icon:Pm,label:"Application Logs",module:"Admin",roles:[Mm.ADMIN]}],Fm=gm("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),Vm=gm("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),Um=gm("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),zm=e=>{let{item:t,activeView:n,setActiveView:r,isExpanded:s}=e;const{user:i}=cm();return!t.roles||i&&t.roles.includes(i.role)?(0,am.jsx)("li",{className:"px-4 py-1",children:(0,am.jsxs)("button",{onClick:()=>r(t.id),className:"flex items-center p-2 text-sm rounded-lg transition-colors duration-200 w-full text-left "+(n===t.id?"bg-blue-500 text-white shadow-md":"text-gray-600 hover:bg-gray-200"),children:[(0,am.jsx)(t.icon,{size:20}),s&&(0,am.jsx)("span",{className:"ml-4 font-medium",children:t.label})]})}):null};function Bm(t){let{activeView:n,setActiveView:r}=t;const[s,i]=(0,e.useState)(!0),{user:a}=cm(),o=[...new Set(Lm.map(e=>e.module))];return(0,am.jsxs)("aside",{className:"flex flex-col h-screen bg-white shadow-lg transition-all duration-300 ease-in-out "+(s?"w-64":"w-20"),children:[(0,am.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[s&&(0,am.jsx)("span",{className:"text-xl font-bold text-gray-800",children:"PrimeJet BMA"}),(0,am.jsx)("button",{onClick:()=>i(!s),className:"p-2 rounded-lg hover:bg-gray-200",children:s?(0,am.jsx)(Fm,{size:20}):(0,am.jsx)(Vm,{size:20})})]}),(0,am.jsx)("nav",{className:"flex-1 overflow-y-auto",children:o.map(e=>(0,am.jsxs)("div",{children:[s&&(0,am.jsx)("h3",{className:"px-4 pt-4 pb-2 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:e}),(0,am.jsx)("ul",{children:Lm.filter(t=>t.module===e).map(e=>(0,am.jsx)(zm,{item:e,activeView:n,setActiveView:r,isExpanded:s},e.id))})]},e))}),(0,am.jsx)("div",{className:"p-4 border-t",children:a&&(0,am.jsxs)("div",{className:"flex items-center justify-between",children:[(0,am.jsxs)("div",{className:"flex items-center",children:[(0,am.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:a.email?a.email[0].toUpperCase():"A"}),s&&(0,am.jsxs)("div",{className:"ml-3",children:[(0,am.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:a.role||"User"}),(0,am.jsx)("p",{className:"text-xs text-gray-500 truncate",children:a.email||"No email"})]})]}),s&&(0,am.jsx)("button",{onClick:async()=>{try{await function(e){return D(e).signOut()}(tm)}catch(e){console.error("Error signing out:",e)}},className:"p-2 rounded-lg text-gray-500 hover:bg-red-100 hover:text-red-600",title:"Logout",children:(0,am.jsx)(Um,{size:20})})]})})]})}function $m(e){let{activeView:t}=e;const n=Lm.find(e=>e.id===t),r=n?n.label:"Dashboard";return(0,am.jsx)("header",{className:"flex items-center justify-between p-4 bg-white border-b",children:(0,am.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:r})})}function qm(e){let{children:t}=e;return(0,am.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-4 md:p-8",children:t})}function Hm(e){let{children:t,onClick:n,type:r="button",variant:s="primary",disabled:i=!1,icon:a,className:o=""}=e;return(0,am.jsxs)("button",{type:r,onClick:n,disabled:i,className:`flex items-center justify-center font-bold py-2 px-4 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-blue-500 text-white hover:bg-blue-600",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300",danger:"bg-red-500 text-white hover:bg-red-600"}[s]} ${o}`,children:[a&&(0,am.jsx)(a,{size:20,className:"mr-2"}),t]})}function Km(e){let{children:t,className:n="",id:r=""}=e;return(0,am.jsx)("div",{id:r,className:`bg-white p-6 rounded-lg shadow-md ${n}`,children:t})}const Gm=gm("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);function Wm(){const[t,n]=(0,e.useState)(""),[r,s]=(0,e.useState)(""),[i,a]=(0,e.useState)(""),[o,l]=(0,e.useState)(!1);return(0,am.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,am.jsxs)("div",{className:"w-full max-w-md p-4",children:[(0,am.jsx)("h1",{className:"text-3xl font-bold text-center text-gray-800 mb-6",children:"PrimeJet BMA Login"}),(0,am.jsx)(Km,{children:(0,am.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),a(""),l(!0);try{await sm(t,r)}catch(n){"auth/user-not-found"===n.code||"auth/wrong-password"===n.code||"auth/invalid-credential"===n.code?a("Login failed. Please check your credentials."):a("An unexpected error occurred. Please try again."),console.error("Login Error:",n)}finally{l(!1)}},className:"space-y-6",children:[(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email Address"}),(0,am.jsx)("input",{type:"email",value:t,onChange:e=>n(e.target.value),className:"mt-1 w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:"you@example.com"})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,am.jsx)("input",{type:"password",value:r,onChange:e=>s(e.target.value),className:"mt-1 w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]}),i&&(0,am.jsx)("p",{className:"text-red-500 text-sm text-center",children:i}),(0,am.jsx)("div",{children:(0,am.jsx)(Hm,{type:"submit",disabled:o,className:"w-full",icon:Gm,children:o?"Logging in...":"Login"})})]})})]})})}function Qm(e){let{title:t,subtitle:n}=e;return(0,am.jsxs)("div",{className:"mb-6",children:[(0,am.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:t}),n&&(0,am.jsx)("p",{className:"text-md text-gray-500 mt-1",children:n})]})}const Ym=gm("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function Jm(){return(0,am.jsxs)("div",{className:"text-center",children:[(0,am.jsx)(Ym,{className:"mx-auto text-yellow-500",size:64}),(0,am.jsx)(Qm,{title:"404 - Page Not Found",subtitle:"The page you are looking for does not exist."})]})}const Xm=t=>{const[n,r]=(0,e.useState)([]),[s,i]=(0,e.useState)(!0),[a,o]=(0,e.useState)(null);return(0,e.useEffect)(()=>{if(!t)return r([]),void i(!1);const e=qp(t,e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));r(t),i(!1)},e=>{console.error("Firestore query error:",e),o("Error fetching data from Firestore."),i(!1)});return()=>e()},[t]),{docs:n,loading:s,error:a}},Zm=async(e,t,n)=>{const{dailySummaryId:r,...s}=e;if(!r)throw new Error("A daily summary ID is required to log transactions.");if("expense"===n){return $p(Tf(nm,`artifacts/${rm}/data_entries`),{type:"expense",...s,dailySummaryId:r,date:new Date(s.date),status:"pending",submittedBy:{uid:t.uid,email:t.email},submittedAt:Xp(),amount:parseFloat(s.amount)})}if("sale"===n)return await function(e,t,n){e=Mi(e,Pf);const r={...Gp,...n};return function(e){if(e.maxAttempts<1)throw new ai(ii.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new oi;return e.asyncQueue.enqueueAndForget(async()=>{const s=await pf(e);new af(e.asyncQueue,s,n,t,r).ju()}),r.promise}(Mf(e),n=>t(new Jp(e,n)),r)}(nm,async n=>{const r=gp(Tf(nm,`artifacts/${rm}/stock_ins`),vp("remainingKg",">",0),xp("createdAt","asc"),Ep(1)),s=await Vp(r);if(s.empty)throw new Error("No stock available to sell from. Please log a new stock-in.");const i=s.docs[0],a=i.ref,o=i.data(),l=parseFloat(e.kgSold)||0;if(l>o.remainingKg)throw new Error(`Sale quantity (${l} kg) exceeds available stock in current batch (${o.remainingKg} kg).`);const c=If(Tf(nm,`artifacts/${rm}/data_entries`)),u={type:"sale",...e,date:new Date(e.date),status:"pending",submittedBy:{uid:t.uid,email:t.email},submittedAt:Xp(),revenue:parseFloat(e.revenue),kgSold:l,batchId:i.id};n.set(c,u);const h=o.remainingKg-l;return n.update(a,{remainingKg:h}),c.id})},eg=(e,t)=>{const n=Tf(nm,`artifacts/${rm}/daily_summaries`),r=parseFloat(e.posAmount)||0,s=parseFloat(e.cashAmount)||0,i={posAmount:r,cashAmount:s,totalRevenue:r+s},a={openingMeterA:parseFloat(e.openingMeterA)||0,closingMeterA:parseFloat(e.closingMeterA)||0,openingMeterB:parseFloat(e.openingMeterB)||0,closingMeterB:parseFloat(e.closingMeterB)||0,pricePerKg:parseFloat(e.pricePerKg)||0},o=e.expenses.map(e=>({description:e.description,category:e.category,amount:parseFloat(e.amount)||0,date:new Date(e.date)})).filter(e=>e.description&&e.amount>0);return $p(n,{date:new Date(e.date),branchId:e.branchId,cashierName:e.cashierName,sales:i,meters:a,expenses:o,submittedBy:{uid:t.uid,email:t.email},createdAt:Xp(),status:"approved"})},tg=async()=>{const e=gp(Tf(nm,`artifacts/${rm}/data_entries`),vp("status","==","approved")),t=(await Vp(e)).docs.map(e=>e.data()),n=gp(Tf(nm,`artifacts/${rm}/daily_summaries`),vp("status","==","approved")),r=(await Vp(n)).docs.map(e=>e.data()),s=[];return t.forEach(e=>{"sale"===e.type?s.push({type:"sale",date:e.date,revenue:e.revenue,kgSold:e.kgSold,branchId:e.branchId,source:"live"}):"expense"===e.type&&s.push({type:"expense",date:e.date,amount:e.amount,branchId:e.branchId,source:"live"})}),r.forEach(e=>{if(e.sales&&e.sales.totalRevenue>0){const t=(e.meters.closingMeterA||0)-(e.meters.openingMeterA||0),n=(e.meters.closingMeterB||0)-(e.meters.openingMeterB||0);s.push({type:"sale",date:e.date,revenue:e.sales.totalRevenue,kgSold:t+n,branchId:e.branchId,source:"historical"})}e.expenses&&e.expenses.length>0&&e.expenses.forEach(t=>s.push({type:"expense",date:e.date,amount:t.amount,branchId:e.branchId,source:"historical"}))}),s},ng=()=>gp(Tf(nm,`artifacts/${rm}/assets`)),rg=()=>gp(Tf(nm,`artifacts/${rm}/stock_ins`)),sg=()=>gp(Tf(nm,`artifacts/${rm}/plants`),xp("name")),ig=()=>gp(Tf(nm,`artifacts/${rm}/loans`),xp("name")),ag=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{branchId:n,type:r,startDate:s,endDate:i,limitSize:a=25}=e;let o=Tf(nm,`artifacts/${rm}/data_entries`);if(o=gp(o,vp("status","==","approved")),n&&"all"!==n&&(o=gp(o,vp("branchId","==",n))),r&&"all"!==r&&(o=gp(o,vp("type","==",r))),s){const e=new Date(s);e.setHours(0,0,0,0),o=gp(o,vp("date",">=",e))}if(i){const e=new Date(i);e.setHours(23,59,59,999),o=gp(o,vp("date","<=",e))}return o=gp(o,xp("date","desc")),t&&(o=gp(o,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Sp._create("startAfter",t,!1)}(t))),o=gp(o,Ep(a)),o},og=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NGN";return new Intl.NumberFormat("en-NG",{style:"currency",currency:t,minimumFractionDigits:0}).format(e||0)},lg=e=>{if(!e)return"N/A";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"numeric"}).format(t)};function cg(e){let{title:t,value:n,icon:r,color:s}=e;return(0,am.jsx)("div",{className:`bg-gradient-to-br ${{green:"from-green-500 to-green-600",blue:"from-blue-500 to-blue-600",indigo:"from-indigo-500 to-indigo-600",purple:"from-purple-500 to-purple-600"}[s]} text-white p-6 rounded-xl shadow-lg`,children:(0,am.jsxs)("div",{className:"flex justify-between items-start",children:[(0,am.jsxs)("div",{className:"flex flex-col",children:[(0,am.jsx)("p",{className:"text-sm font-medium opacity-80",children:t}),(0,am.jsx)("p",{className:"text-3xl font-bold mt-1",children:n})]}),(0,am.jsx)("div",{className:"p-3 bg-white bg-opacity-20 rounded-lg",children:(0,am.jsx)(r,{size:24})})]})})}const ug=gm("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function hg(){const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)(!0),{docs:i,loading:a}=Xm(rg()),{docs:o,loading:l}=Xm(gp(Tf(nm,`artifacts/${rm}/vans`),vp("status","==","On Delivery"))),{docs:c,loading:u}=Xm(sg());(0,e.useEffect)(()=>{(async()=>{um("DEBUG","Dashboard: Starting unified data fetch for KPIs.",{component:"Dashboard"}),s(!0);try{const e=await tg();n(e),um("DEBUG",`Dashboard: Unified data fetch complete. Found ${e.length} records.`,{recordCount:e.length})}catch(e){um("ERROR","Dashboard: Failed to fetch unified data.",{error:e.message,stack:e.stack})}finally{s(!1)}})()},[]);const h=(0,e.useMemo)(()=>{um("DEBUG","Dashboard: Recalculating KPI data.",{component:"Dashboard"});const e=t.filter(e=>"sale"===e.type),n=e.reduce((e,t)=>e+t.revenue,0),r=e.reduce((e,t)=>e+t.kgSold,0),s=i.reduce((e,t)=>e+(t.quantityKg||0),0);return{totalRevenue:n,totalKgSold:r,currentStock:s-r}},[t,i]),d=r||a||l||u;return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(Qm,{title:"Executive Dashboard",subtitle:"A real-time, unified overview of the PrimeJet business."}),(0,am.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,am.jsx)(cg,{title:"Total Revenue",value:d?"...":og(h.totalRevenue),icon:ug,color:"green"}),(0,am.jsx)(cg,{title:"Bulk LPG Stock",value:d?"...":`${Math.round(h.currentStock).toLocaleString()} kg`,icon:_m,color:"indigo"}),(0,am.jsx)(cg,{title:"Total LPG Sold",value:d?"...":`${Math.round(h.totalKgSold).toLocaleString()} kg`,icon:Em,color:"blue"}),(0,am.jsx)(cg,{title:"Active Deliveries",value:d?"...":o.length,icon:Sm,color:"purple"})]}),(0,am.jsxs)(Km,{children:[(0,am.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Live Plant Status"}),d?(0,am.jsx)("p",{children:"Loading plant data..."}):(0,am.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map(e=>(0,am.jsxs)("div",{className:"border p-3 rounded-lg",children:[(0,am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,am.jsx)("p",{className:"font-bold",children:e.name}),(0,am.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full "+("Online"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})]}),(0,am.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Uptime: ",e.uptime,"%"]})]},e.id))})]})]})}const dg=e=>{let{data:t,totals:n}=e},fg=e=>{let{data:t}=e},pg=e=>{let{data:t}=e};function mg(){const[t,n]=(0,e.useState)("income"),[r,s]=(0,e.useState)([]),[i,a]=(0,e.useState)(!0),[o,l]=(0,e.useState)("all"),{docs:c,loading:u}=Xm(ng()),{docs:h,loading:d}=Xm(ig()),{docs:f,loading:p}=Xm(sg());(0,e.useEffect)(()=>{(async()=>{um("DEBUG","FinancialStatements: Starting data fetch.",{component:"FinancialStatements"}),a(!0);try{const e=await tg();s(e),um("DEBUG",`FinancialStatements: Data fetch complete. Found ${e.length} unified records.`,{recordCount:e.length})}catch(e){um("ERROR","FinancialStatements: Failed to fetch unified data.",{error:e.message,stack:e.stack})}finally{a(!1)}})()},[]);const m=(0,e.useMemo)(()=>{const e="all"===o?r:r.filter(e=>e.branchId===o);if(um("DEBUG",`FinancialStatements: Filtered data for branch '${o}'. ${e.length} records remain.`,{selectedBranch:o,recordCount:e.length}),0===e.length||u||d)return u||d||um("WARN","FinancialStatements: Financial calculation skipped due to zero records or loading assets/loans.",{component:"FinancialStatements"}),null;um("DEBUG","FinancialStatements: Starting financial calculations.",{component:"FinancialStatements"});const t={},n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.forEach(e=>{if(!e.date||"function"!==typeof e.date.toDate)return;const r=e.date.toDate(),s=`${r.getFullYear()}-${r.getMonth()}`;t[s]||(t[s]={label:`${n[r.getMonth()]} '${String(r.getFullYear()).slice(2)}`,year:r.getFullYear(),month:r.getMonth(),revenue:0,opCosts:0}),"sale"===e.type?t[s].revenue+=e.revenue:"expense"===e.type&&(t[s].opCosts+=e.amount)});const s=Object.values(t).map(e=>{const t=.773*e.revenue,n=e.revenue-t,r=n-e.opCosts;return{...e,cogs:t,grossProfit:n,netProfit:r}}).sort((e,t)=>e.year!==t.year?e.year-t.year:e.month-t.month),i=s.reduce((e,t)=>(e.revenue+=t.revenue,e.cogs+=t.cogs,e.grossProfit+=t.grossProfit,e.opCosts+=t.opCosts,e.netProfit+=t.netProfit,e),{revenue:0,cogs:0,grossProfit:0,opCosts:0,netProfit:0}),a=c.reduce((e,t)=>e+t.cost,0),l=.1*a,f=a-l,p=h.reduce((e,t)=>e+t.principal,0),m=2e7,g=i.netProfit,y=m+g,v=p+m,b=a,w=i.netProfit+l,x=w-b+v,_={assets:{current:{cash:x,inventory:85e5,total:x+85e5},fixed:{gross:a,depreciation:l,net:f},total:x+85e5+f},liabilities:{loans:p,total:p},equity:{shareCapital:m,retainedEarnings:g,total:y},totalLiabilitiesAndEquity:p+y},E={operating:w,investing:b,financing:v,netCashFlow:x};return um("DEBUG","FinancialStatements: Financial data successfully calculated.",{result:"OK"}),{incomeData:s,incomeTotals:i,balanceSheet:_,cashFlow:E}},[r,c,h,o,u,d]);return i||u||d||p?(0,am.jsx)(Qm,{title:"Financial Statements",subtitle:"Loading and unifying financial data..."}):(0,am.jsxs)(am.Fragment,{children:[(0,am.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,am.jsx)(Qm,{title:"Financial Statements",subtitle:"Live financial health of your business."}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"text-sm font-medium mr-2",children:"Branch:"}),(0,am.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"p-2 border rounded-md bg-white",children:[(0,am.jsx)("option",{value:"all",children:"All Branches"}),f.map(e=>(0,am.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),m?(0,am.jsxs)(Km,{children:[(0,am.jsx)("div",{className:"border-b border-gray-200",children:(0,am.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,am.jsx)("button",{onClick:()=>n("income"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm "+("income"===t?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Income Statement"}),(0,am.jsx)("button",{onClick:()=>n("balance"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm "+("balance"===t?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Balance Sheet"}),(0,am.jsx)("button",{onClick:()=>n("cashflow"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm "+("cashflow"===t?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Cash Flow"})]})}),"income"===t&&(0,am.jsx)(dg,{data:m.incomeData,totals:m.incomeTotals}),"balance"===t&&(0,am.jsx)(fg,{data:m.balanceSheet}),"cashflow"===t&&(0,am.jsx)(pg,{data:m.cashFlow})]}):(0,am.jsx)(Km,{children:(0,am.jsx)("p",{className:"text-center p-8 text-gray-500",children:"Could not calculate financial data. Please ensure you have sales, asset, and loan records in the system."})})]})}function gg(e){let{children:t,title:n,onClose:r}=e;return(0,am.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,am.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md",children:[(0,am.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:n}),t]})})}const yg=gm("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),vg=gm("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),bg=gm("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function wg(t){let{notification:n,setNotification:r}=t;if((0,e.useEffect)(()=>{if(n.show){const e=setTimeout(()=>r({show:!1,message:"",type:"success"}),4e3);return()=>clearTimeout(e)}},[n,r]),!n.show)return null;const s="success"===n.type?yg:vg;return(0,am.jsxs)("div",{className:`fixed top-5 right-5 z-50 flex items-center p-4 rounded-lg shadow-lg text-white ${{success:"bg-green-500",error:"bg-red-500"}[n.type]}`,children:[(0,am.jsx)(s,{size:20,className:"mr-3"}),(0,am.jsx)("p",{children:n.message}),(0,am.jsx)("button",{onClick:()=>r({show:!1}),className:"ml-4 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:(0,am.jsx)(bg,{size:18})})]})}const xg=gm("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),_g=gm("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Eg=gm("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Sg=t=>{let{onSuccess:n,onError:r}=t;const[s,i]=(0,e.useState)({name:"",type:"Plant",cost:"",purchaseDate:(new Date).toISOString().split("T")[0]}),[a,o]=(0,e.useState)(!1),l=e=>i({...s,[e.target.name]:e.target.value});return(0,am.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0);try{await(t=s,$p(Tf(nm,`artifacts/${rm}/assets`),{...t,cost:parseFloat(t.cost),purchaseDate:new Date(t.purchaseDate),createdAt:Xp()})),n("Asset added successfully!")}catch(i){r("Failed to add asset.")}finally{o(!1)}var t},className:"space-y-4",children:[(0,am.jsx)("input",{type:"text",name:"name",value:s.name,onChange:l,placeholder:"e.g., Plant 1",className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0}),(0,am.jsx)("input",{type:"number",name:"cost",value:s.cost,onChange:l,placeholder:"e.g., 18000000",className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0}),(0,am.jsxs)("select",{name:"type",value:s.type,onChange:l,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm bg-white",children:[(0,am.jsx)("option",{children:"Plant"}),(0,am.jsx)("option",{children:"Delivery Van"}),(0,am.jsx)("option",{children:"Bobtail Truck"}),(0,am.jsx)("option",{children:"Other"})]}),(0,am.jsx)("input",{type:"date",name:"purchaseDate",value:s.purchaseDate,onChange:l,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"}),(0,am.jsx)("div",{className:"flex justify-end pt-2",children:(0,am.jsx)(Hm,{type:"submit",disabled:a,children:a?"Adding...":"Add Asset"})})]})},kg=t=>{let{onSuccess:n,onError:r}=t;const[s,i]=(0,e.useState)({name:"",principal:"",interestRate:"10",term:"3"}),[a,o]=(0,e.useState)(!1),l=e=>i({...s,[e.target.name]:e.target.value});return(0,am.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0);try{await(t=s,$p(Tf(nm,`artifacts/${rm}/loans`),{...t,principal:parseFloat(t.principal),interestRate:parseFloat(t.interestRate),term:parseInt(t.term,10),createdAt:Xp()})),n(`Loan "${s.name}" added successfully.`)}catch(i){r("Failed to add loan.")}finally{o(!1)}var t},className:"space-y-4",children:[(0,am.jsx)("input",{type:"text",name:"name",value:s.name,onChange:l,placeholder:"Loan Name (e.g., Plant & Van Loan)",className:"w-full p-2 border rounded-md",required:!0}),(0,am.jsx)("input",{type:"number",name:"principal",value:s.principal,onChange:l,placeholder:"Principal Amount (\u20a6)",className:"w-full p-2 border rounded-md",required:!0}),(0,am.jsxs)("div",{className:"flex gap-4",children:[(0,am.jsx)("input",{type:"number",name:"interestRate",value:s.interestRate,onChange:l,placeholder:"Interest Rate (%)",className:"w-full p-2 border rounded-md",required:!0}),(0,am.jsx)("input",{type:"number",name:"term",value:s.term,onChange:l,placeholder:"Term (Years)",className:"w-full p-2 border rounded-md",required:!0})]}),(0,am.jsx)("div",{className:"flex justify-end pt-2",children:(0,am.jsx)(Hm,{type:"submit",disabled:a,children:"Add Loan"})})]})};function Ng(){const[t,n]=(0,e.useState)(!1),[r,s]=(0,e.useState)(!1),[i,a]=(0,e.useState)({show:!1,message:"",type:"success"}),{docs:o,loading:l}=Xm(ng()),{docs:c,loading:u}=Xm(ig()),h=(0,e.useMemo)(()=>o.reduce((e,t)=>e+t.cost,0),[o]),d=(0,e.useMemo)(()=>o.reduce((e,t)=>e+.1*t.cost,0),[o]),f=e=>{a({show:!0,message:e,type:"success"}),n(!1),s(!1)},p=e=>a({show:!0,message:e,type:"error"}),m=async(e,t)=>{window.confirm(`Are you sure you want to remove the loan "${t}"?`)&&(await(e=>Bp(If(nm,`artifacts/${rm}/loans`,e)))(e),f(`Loan "${t}" removed.`))};return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(wg,{notification:i,setNotification:a}),t&&(0,am.jsx)(gg,{title:"Add New Fixed Asset",onClose:()=>n(!1),children:(0,am.jsx)(Sg,{onSuccess:f,onError:p})}),r&&(0,am.jsx)(gg,{title:"Add New Loan",onClose:()=>s(!1),children:(0,am.jsx)(kg,{onSuccess:f,onError:p})}),(0,am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,am.jsx)(Qm,{title:"Assets & Loans",subtitle:"Manage fixed assets and track loan liabilities."}),(0,am.jsx)(Hm,{onClick:()=>n(!0),icon:xg,children:"Add Asset"})]}),(0,am.jsxs)("h3",{className:"text-xl font-semibold text-gray-700 mt-6 mb-4 flex items-center",children:[(0,am.jsx)(wm,{className:"mr-3"})," Fixed Asset Ledger"]}),(0,am.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,am.jsxs)(Km,{children:[(0,am.jsx)("h4",{className:"text-gray-500 text-sm font-medium",children:"Total Asset Value"}),(0,am.jsx)("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:l?"...":og(h)})]}),(0,am.jsxs)(Km,{children:[(0,am.jsx)("h4",{className:"text-gray-500 text-sm font-medium",children:"Est. Annual Depreciation (10%)"}),(0,am.jsx)("p",{className:"text-3xl font-bold text-red-600 mt-1",children:l?"...":og(d)})]})]}),(0,am.jsx)(Km,{children:l?(0,am.jsx)("p",{children:"Loading assets..."}):(0,am.jsxs)("table",{className:"w-full text-left",children:[(0,am.jsx)("thead",{children:(0,am.jsxs)("tr",{className:"border-b bg-gray-50",children:[(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Asset Name"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Type"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Purchase Date"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600 text-right",children:"Cost"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600 text-right",children:"Annual Depreciation"})]})}),(0,am.jsx)("tbody",{children:o.map(e=>(0,am.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,am.jsx)("td",{className:"p-4 font-medium",children:e.name}),(0,am.jsx)("td",{className:"p-4",children:e.type}),(0,am.jsx)("td",{className:"p-4",children:lg(e.purchaseDate)}),(0,am.jsx)("td",{className:"p-4 text-right",children:og(e.cost)}),(0,am.jsx)("td",{className:"p-4 text-right text-red-600",children:og(.1*e.cost)})]},e.id))})]})}),(0,am.jsxs)("div",{className:"flex justify-between items-center mt-8 mb-4",children:[(0,am.jsxs)("h3",{className:"text-xl font-semibold text-gray-700 flex items-center",children:[(0,am.jsx)(_g,{className:"mr-3"})," Loan Management"]}),(0,am.jsx)(Hm,{onClick:()=>s(!0),icon:xg,variant:"secondary",children:"Add Loan"})]}),(0,am.jsx)(Km,{children:u?(0,am.jsx)("p",{children:"Loading loans..."}):(0,am.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:c.map(e=>(0,am.jsxs)(Km,{children:[(0,am.jsxs)("div",{className:"flex justify-between items-start",children:[(0,am.jsx)("h4",{className:"text-lg font-bold text-gray-800",children:e.name}),(0,am.jsx)(Hm,{onClick:()=>m(e.id,e.name),variant:"danger",icon:Eg})]}),(0,am.jsxs)("div",{className:"space-y-2 text-sm mt-2",children:[(0,am.jsxs)("div",{className:"flex justify-between",children:[(0,am.jsx)("span",{children:"Principal:"})," ",(0,am.jsx)("span",{className:"font-semibold",children:og(e.principal)})]}),(0,am.jsxs)("div",{className:"flex justify-between",children:[(0,am.jsx)("span",{children:"Interest Rate:"})," ",(0,am.jsxs)("span",{className:"font-semibold",children:[e.interestRate,"%"]})]}),(0,am.jsxs)("div",{className:"flex justify-between",children:[(0,am.jsx)("span",{children:"Term:"})," ",(0,am.jsxs)("span",{className:"font-semibold",children:[e.term," years"]})]})]})]},e.id))})})]})}const Cg=gm("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);function Tg(){const{docs:t,loading:n}=Xm(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";const t=[vp("status","==","approved")];return e&&"all"!==e&&t.push(vp("branchId","==",e)),gp(Tf(nm,`artifacts/${rm}/data_entries`),...t)}()),r=(0,e.useMemo)(()=>{if(!t)return null;const e=t.reduce((e,t)=>("sale"===t.type?e.totalRevenue+=t.revenue:"expense"===t.type&&(e.totalExpenses+=t.amount),e),{totalRevenue:0,totalExpenses:0}),n=.075*e.totalRevenue;return{...e,vatPayable:n}},[t]);return n?(0,am.jsx)(Qm,{title:"Tax Compliance Report",subtitle:"Loading financial data..."}):r?(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)("style",{children:"\n                @media print {\n                    body * {\n                        visibility: hidden;\n                    }\n                    #print-section, #print-section * {\n                        visibility: visible;\n                    }\n                    #print-section {\n                        position: absolute;\n                        left: 0;\n                        top: 0;\n                        width: 100%;\n                    }\n                    .no-print {\n                        display: none;\n                    }\n                }\n            "}),(0,am.jsxs)("div",{className:"flex justify-between items-center no-print",children:[(0,am.jsx)(Qm,{title:"Tax Compliance Report",subtitle:"Generate reports formatted for FIRS/CAC submission."}),(0,am.jsx)(Hm,{onClick:()=>{window.print()},icon:Cg,children:"Print Report"})]}),(0,am.jsx)(Km,{id:"print-section",children:(0,am.jsxs)("div",{className:"p-4 md:p-8",children:[(0,am.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,am.jsxs)("div",{children:[(0,am.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"PrimeJet Gas LLC"}),(0,am.jsx)("p",{className:"text-sm text-gray-500",children:"RC: 1234567"}),(0,am.jsx)("p",{className:"text-sm text-gray-500",children:"Lagos, Nigeria"})]}),(0,am.jsxs)("div",{className:"text-right",children:[(0,am.jsx)("h3",{className:"text-xl font-semibold text-gray-600",children:"Official Tax Summary"}),(0,am.jsxs)("p",{className:"text-sm text-gray-500",children:["For Period Ending: ",(new Date).toLocaleDateString("en-GB")]})]})]}),(0,am.jsxs)("div",{className:"space-y-4",children:[(0,am.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-4 rounded-lg",children:[(0,am.jsx)("span",{className:"font-medium text-gray-600",children:"Total Revenue (Gross)"}),(0,am.jsx)("span",{className:"font-bold text-lg text-gray-800",children:og(r.totalRevenue)})]}),(0,am.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-4 rounded-lg",children:[(0,am.jsx)("span",{className:"font-medium text-gray-600",children:"Total Operational Expenses"}),(0,am.jsx)("span",{className:"font-bold text-lg text-gray-800",children:og(r.totalExpenses)})]}),(0,am.jsxs)("div",{className:"flex justify-between items-center bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,am.jsx)("span",{className:"font-medium text-blue-800",children:"Value-Added Tax (VAT) at 7.5%"}),(0,am.jsx)("span",{className:"font-bold text-lg text-blue-800",children:og(r.vatPayable)})]})]}),(0,am.jsxs)("div",{className:"mt-8 p-4 bg-green-50 border-l-4 border-green-500 rounded-r-lg",children:[(0,am.jsx)("h4",{className:"font-bold text-green-800",children:"Pioneer Status Eligibility"}),(0,am.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"As a company with Pioneer Status, PrimeJet Gas LLC is eligible for a 0% Corporate Income Tax rate for the initial period. This report is provided for VAT and other compliance records."})]}),(0,am.jsxs)("div",{className:"mt-12 pt-4 border-t text-center text-xs text-gray-400",children:[(0,am.jsxs)("p",{children:["Generated on ",(new Date).toString()]}),(0,am.jsx)("p",{children:"This is a system-generated document from the PrimeJet Business Management Application."})]})]})})]}):(0,am.jsx)("p",{children:"Could not calculate tax data."})}const Ig=e=>{let{plant:t}=e;const n={Online:{bg:"bg-green-100",text:"text-green-800",border:"border-green-500"},Warning:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-500"},Offline:{bg:"bg-red-100",text:"text-red-800",border:"border-red-500"}}[t.status]||{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-500"},r=t.outputToday/t.capacity*100;return(0,am.jsxs)(Km,{className:`border-l-4 ${n.border}`,children:[(0,am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,am.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:t.name}),(0,am.jsx)("span",{className:`px-3 py-1 text-sm font-semibold rounded-full ${n.bg} ${n.text}`,children:t.status})]}),(0,am.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4 text-center",children:[(0,am.jsxs)("div",{children:[(0,am.jsx)("p",{className:"text-xs text-gray-500 uppercase",children:"Uptime"}),(0,am.jsxs)("p",{className:`text-2xl font-bold ${n.text}`,children:[t.uptime,"%"]})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("p",{className:"text-xs text-gray-500 uppercase",children:"Output Today"}),(0,am.jsxs)("p",{className:"text-2xl font-bold text-gray-700",children:[t.outputToday," kg"]})]})]}),(0,am.jsxs)("div",{className:"mt-4",children:[(0,am.jsxs)("p",{className:"text-xs text-gray-500 text-right",children:[t.capacity," kg Capacity"]}),(0,am.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-1",children:(0,am.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${r}%`}})})]})]})};function Ag(){const{docs:e,loading:t}=Xm(sg());return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(Qm,{title:"Multi-Plant Dashboard",subtitle:"Real-time operational status of all plant locations."}),t?(0,am.jsx)("p",{children:"Loading plant status..."}):(0,am.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.length>0?e.map(e=>(0,am.jsx)(Ig,{plant:e},e.id)):(0,am.jsx)("p",{className:"text-gray-500",children:"No plant data found. Please add plants in the admin configuration."})})]})}function Rg(t){let{onClose:n,onSuccess:r}=t;const{user:s}=cm(),[i,a]=(0,e.useState)({quantityKg:"2500",supplier:"Refinery",purchaseDate:(new Date).toISOString().split("T")[0],costPerKg:"",targetSalePricePerKg:""}),[o,l]=(0,e.useState)(!1),c=e=>a({...i,[e.target.name]:e.target.value});return(0,am.jsx)(gg,{title:"Log Bulk LPG Purchase",onClose:n,children:(0,am.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(!0);try{await((e,t)=>{const n=Tf(nm,`artifacts/${rm}/stock_ins`),r=parseFloat(e.quantityKg)||0;return $p(n,{quantityKg:r,costPerKg:parseFloat(e.costPerKg)||0,targetSalePricePerKg:parseFloat(e.targetSalePricePerKg)||0,remainingKg:r,purchaseDate:new Date(e.purchaseDate),supplier:e.supplier,loggedBy:{uid:t.uid,email:t.email},createdAt:Xp()})})(i,s),r(`Successfully logged a stock-in of ${i.quantityKg} kg.`),n()}catch(t){console.error("Stock-in Error:",t),r("Failed to log stock-in.","error")}finally{l(!1)}},className:"space-y-4",children:[(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity (kg)"}),(0,am.jsx)("input",{type:"number",name:"quantityKg",value:i.quantityKg,onChange:c,className:"mt-1 w-full p-2 border rounded-md",required:!0})]}),(0,am.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cost Price / kg (\u20a6)"}),(0,am.jsx)("input",{type:"number",name:"costPerKg",value:i.costPerKg,onChange:c,className:"mt-1 w-full p-2 border rounded-md",placeholder:"e.g., 850",required:!0})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Target Sale Price / kg (\u20a6)"}),(0,am.jsx)("input",{type:"number",name:"targetSalePricePerKg",value:i.targetSalePricePerKg,onChange:c,className:"mt-1 w-full p-2 border rounded-md",placeholder:"e.g., 1100",required:!0})]})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Supplier"}),(0,am.jsx)("input",{type:"text",name:"supplier",value:i.supplier,onChange:c,className:"mt-1 w-full p-2 border rounded-md",required:!0})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Purchase Date"}),(0,am.jsx)("input",{type:"date",name:"purchaseDate",value:i.purchaseDate,onChange:c,className:"mt-1 w-full p-2 border rounded-md",required:!0})]}),(0,am.jsx)("div",{className:"flex justify-end pt-4",children:(0,am.jsx)(Hm,{type:"submit",disabled:o,children:o?"Logging...":"Confirm Stock-In"})})]})})}const jg=e=>{let{percentage:t,stockKg:n}=e;const r=2*Math.PI*52,s=r-t/100*r;let i="stroke-green-500";return t<50&&(i="stroke-yellow-500"),t<25&&(i="stroke-red-500"),(0,am.jsxs)("div",{className:"relative w-48 h-48",children:[(0,am.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 120 120",children:[(0,am.jsx)("circle",{className:"stroke-current text-gray-200",strokeWidth:"10",fill:"transparent",r:"52",cx:"60",cy:"60"}),(0,am.jsx)("circle",{className:`stroke-current ${i} transform -rotate-90 origin-center`,strokeWidth:"10",strokeLinecap:"round",fill:"transparent",r:"52",cx:"60",cy:"60",style:{strokeDasharray:r,strokeDashoffset:s,transition:"stroke-dashoffset 0.5s ease-in-out"}})]}),(0,am.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,am.jsx)("span",{className:"text-3xl font-bold text-gray-800",children:Math.round(n).toLocaleString()}),(0,am.jsx)("span",{className:"text-sm text-gray-500",children:"kg remaining"})]})]})},Dg=t=>{let{onSuccess:n,onError:r}=t;const[s,i]=(0,e.useState)({size:"12.5 kg",quantity:""}),[a,o]=(0,e.useState)(!1),l=e=>i({...s,[e.target.name]:e.target.value});return(0,am.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0);try{await(t=s,$p(Tf(nm,`artifacts/${rm}/cylinders`),{...t,quantity:parseInt(t.quantity,10),createdAt:Xp()})),n(`${s.quantity} x ${s.size} cylinders added.`),i({size:"12.5 kg",quantity:""})}catch(a){r("Failed to add cylinders.")}finally{o(!1)}var t},className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,am.jsx)("input",{type:"text",name:"size",value:s.size,onChange:l,placeholder:"Cylinder Size (e.g., 12.5 kg)",className:"w-full p-2 border rounded-md",required:!0}),(0,am.jsx)("input",{type:"number",name:"quantity",value:s.quantity,onChange:l,placeholder:"Quantity",className:"w-full p-2 border rounded-md",required:!0}),(0,am.jsx)(Hm,{type:"submit",disabled:a,icon:xg,className:"w-full",children:"Add Batch"})]})};function Pg(){const[t,n]=(0,e.useState)(!1),[r,s]=(0,e.useState)({show:!1,message:"",type:"success"}),[i,a]=(0,e.useState)([]),[o,l]=(0,e.useState)(!0),{docs:c,loading:u}=Xm(rg()),{docs:h,loading:d}=Xm(gp(Tf(nm,`artifacts/${rm}/cylinders`),xp("size")));(0,e.useEffect)(()=>{(async()=>{l(!0);const e=await tg();a(e),l(!1)})()},[]);const f=(0,e.useMemo)(()=>{const e=c.reduce((e,t)=>e+(t.quantityKg||0),0),t=i.filter(e=>"sale"===e.type).reduce((e,t)=>e+(t.kgSold||0),0),n=e-t,r=Math.max(e,2e4);return{bulkStock:{current:n,percentage:r>0?n/r*100:0}}},[i,c]),p=e=>s({show:!0,message:e,type:"success"}),m=async(e,t)=>{window.confirm(`Are you sure you want to remove the cylinder batch "${t}"?`)&&(await(e=>Bp(If(nm,`artifacts/${rm}/cylinders`,e)))(e),p(`Cylinder batch "${t}" removed.`))},g=o||u||d;return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(wg,{notification:r,setNotification:s}),t&&(0,am.jsx)(Rg,{onClose:()=>n(!1),onSuccess:p}),(0,am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,am.jsx)(Qm,{title:"Inventory Command Center",subtitle:"Live tracking of bulk LPG and company assets."}),(0,am.jsx)(Hm,{onClick:()=>n(!0),icon:xg,children:"Log Stock-In"})]}),(0,am.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,am.jsx)("div",{className:"lg:col-span-1",children:(0,am.jsxs)(Km,{className:"flex flex-col items-center justify-center",children:[(0,am.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Bulk LPG Stock"}),g?(0,am.jsx)("p",{children:"Calculating..."}):(0,am.jsx)(jg,{percentage:f.bulkStock.percentage,stockKg:f.bulkStock.current})]})}),(0,am.jsx)("div",{className:"lg:col-span-2",children:(0,am.jsxs)(Km,{children:[(0,am.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Cylinder Assets (Total Owned)"}),g?(0,am.jsx)("p",{children:"Loading asset data..."}):(0,am.jsx)("div",{className:"overflow-x-auto",children:(0,am.jsxs)("table",{className:"w-full text-left",children:[(0,am.jsx)("thead",{children:(0,am.jsxs)("tr",{className:"border-b bg-gray-50",children:[(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Cylinder Size"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600 text-right",children:"Total Quantity"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600 text-right",children:"Actions"})]})}),(0,am.jsx)("tbody",{children:h.map(e=>(0,am.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,am.jsx)("td",{className:"p-4 font-medium",children:e.size}),(0,am.jsx)("td",{className:"p-4 text-right font-semibold",children:e.quantity.toLocaleString()}),(0,am.jsx)("td",{className:"p-4 text-right",children:(0,am.jsx)(Hm,{onClick:()=>m(e.id,e.size),variant:"danger",icon:Eg})})]},e.id))})]})}),(0,am.jsx)("div",{className:"border-t mt-4 pt-4",children:(0,am.jsx)(Dg,{onSuccess:p,onError:e=>s({show:!0,message:e,type:"error"})})})]})})]})]})}const Mg=gm("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Og=gm("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);function Lg(){const{docs:t,loading:n}=Xm(gp(Tf(nm,`artifacts/${rm}/vans`),xp("vanNumber"))),{docs:r,loading:s}=Xm(gp(Tf(nm,`artifacts/${rm}/delivery_orders`),vp("status","==","unassigned"))),[i,a]=(0,e.useState)(""),[o,l]=(0,e.useState)(""),[c,u]=(0,e.useState)({show:!1,message:"",type:"success"});(0,e.useEffect)(()=>{r.length>0&&!i&&a(r[0].id)},[r,i]),(0,e.useEffect)(()=>{const e=t.find(e=>"Idle"===e.status);e&&!o&&l(e.id)},[t,o]);const h=e=>{let{status:t}=e;return(0,am.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${{Idle:"bg-green-100 text-green-800","On Delivery":"bg-blue-100 text-blue-800",Returning:"bg-yellow-100 text-yellow-800"}[t]}`,children:t})},d=n||s,f=t.filter(e=>"Idle"===e.status);return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(wg,{notification:c,setNotification:u}),(0,am.jsx)(Qm,{title:"Logistics & Dispatch Hub",subtitle:"Monitor your delivery fleet and assign runs in real-time."}),(0,am.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,am.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,am.jsxs)(Km,{children:[(0,am.jsxs)("h3",{className:"text-lg font-semibold text-gray-700 mb-4 flex items-center",children:[(0,am.jsx)(Mg,{className:"mr-2"})," Fleet Map"]}),(0,am.jsx)("div",{className:"bg-gray-200 h-96 rounded-md flex items-center justify-center",children:(0,am.jsx)("p",{className:"text-gray-500",children:"Live map integration will be here."})})]}),(0,am.jsxs)(Km,{children:[(0,am.jsxs)("h3",{className:"text-lg font-semibold text-gray-700 mb-4 flex items-center",children:[(0,am.jsx)(Sm,{className:"mr-2"})," Van Status"]}),d?(0,am.jsx)("p",{children:"Loading van status..."}):(0,am.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(e=>(0,am.jsxs)("div",{className:"border p-3 rounded-lg flex justify-between items-center",children:[(0,am.jsxs)("div",{children:[(0,am.jsxs)("p",{className:"font-bold",children:[`Van ${e.vanNumber}`,(0,am.jsxs)("span",{className:"font-normal text-gray-600 text-sm",children:[" - ",e.driver]})]}),(0,am.jsx)("p",{className:"text-sm text-gray-500",children:"Idle"===e.status?e.location:e.destination})]}),(0,am.jsx)(h,{status:e.status})]},e.id))})]})]}),(0,am.jsx)("div",{className:"lg:col-span-1",children:(0,am.jsxs)(Km,{children:[(0,am.jsxs)("h3",{className:"text-lg font-semibold text-gray-700 mb-4 flex items-center",children:[(0,am.jsx)(Og,{className:"mr-2"})," Assign Delivery Run"]}),d?(0,am.jsx)("p",{children:"Loading orders..."}):(0,am.jsxs)("div",{className:"space-y-4",children:[(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"1. Select Unassigned Order"}),(0,am.jsx)("select",{value:i,onChange:e=>a(e.target.value),className:"mt-1 w-full p-2 border rounded-md bg-white",children:r.length>0?r.map(e=>(0,am.jsx)("option",{value:e.id,children:`${e.id} - ${e.customerName} (${e.area})`},e.id)):(0,am.jsx)("option",{children:"No unassigned orders"})})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"2. Select Available Van"}),(0,am.jsx)("select",{value:o,onChange:e=>l(e.target.value),className:"mt-1 w-full p-2 border rounded-md bg-white",children:f.length>0?f.map(e=>(0,am.jsx)("option",{value:e.id,children:`Van ${e.vanNumber} - ${e.driver}`},e.id)):(0,am.jsx)("option",{children:"No vans available"})})]}),(0,am.jsx)("div",{className:"pt-2",children:(0,am.jsx)(Hm,{onClick:async()=>{if(!i||!o)return void u({show:!0,message:"Please select an order and an available van.",type:"error"});const e=r.find(e=>e.id===i);try{await((e,t,n)=>{const r=If(nm,`artifacts/${rm}/vans`,e),s=If(nm,`artifacts/${rm}/delivery_orders`,t),i=Zp(nm);return i.update(r,{status:"On Delivery",currentOrderId:t,destination:n.area}),i.update(s,{status:"assigned",vanId:e}),i.commit()})(o,i,e),u({show:!0,message:`Order ${i} assigned to Van ${o}.`,type:"success"}),a(""),l("")}catch(t){console.error("Assignment Error:",t),u({show:!0,message:"Failed to assign run.",type:"error"})}},disabled:!i||!o||d,icon:yg,className:"w-full",children:"Assign Run"})})]})]})})]})]})}function Fg(e){let{data:t,title:n}=e;if(!t||0===t.length)return(0,am.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No data available to display the chart."});const r=Math.max(...t.map(e=>e.value)),s=Array.from({length:6},(e,t)=>{const n=r/5*t;return n>1e6?`${(n/1e6).toFixed(1)}M`:n>1e3?`${(n/1e3).toFixed(0)}k`:n.toFixed(0)}).reverse();return(0,am.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md w-full",children:[(0,am.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:n}),(0,am.jsxs)("div",{className:"flex",style:{height:"300px"},children:[(0,am.jsx)("div",{className:"flex flex-col justify-between text-right pr-4 text-xs text-gray-500",children:s.map(e=>(0,am.jsx)("div",{children:e},e))}),(0,am.jsx)("div",{className:"w-full flex justify-around items-end border-l border-b border-gray-200 pl-2",children:t.map((e,t)=>(0,am.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-end px-1 group",children:[(0,am.jsx)("div",{className:"w-full bg-blue-400 hover:bg-blue-600 rounded-t-md transition-all",style:{height:e.value/r*100+"%"},children:(0,am.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-white text-xs text-center p-1 bg-gray-800 rounded-md -mt-8",children:og(e.value)})}),(0,am.jsx)("div",{className:"mt-2 text-xs text-gray-600",children:e.label})]},t))})]})]})}function Vg(){const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)(!0);(0,e.useEffect)(()=>{(async()=>{um("DEBUG","SalesAnalytics: Starting data fetch.",{component:"SalesAnalytics"}),s(!0);try{const e=await tg();n(e.filter(e=>"sale"===e.type)),um("DEBUG",`SalesAnalytics: Data fetch complete. Found ${e.length} total records, ${e.filter(e=>"sale"===e.type).length} are sales.`,{recordCount:e.length})}catch(e){um("ERROR","SalesAnalytics: Failed to fetch data.",{error:e.message})}finally{s(!1)}})()},[]);const i=(0,e.useMemo)(()=>{if(um("DEBUG","SalesAnalytics: Recalculating analytics data.",{recordCount:t.length}),0===t.length)return um("WARN","SalesAnalytics: Calculation skipped, no sales data available.",{component:"SalesAnalytics"}),{monthlyRevenue:[],totalRevenue:0,totalKgSold:0};const e={},n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.forEach(t=>{const r=t.date.toDate(),s=`${r.getFullYear()}-${r.getMonth()}`;e[s]||(e[s]={label:`${n[r.getMonth()]} '${String(r.getFullYear()).slice(2)}`,value:0,year:r.getFullYear(),month:r.getMonth()}),e[s].value+=t.revenue});const r=Object.values(e).sort((e,t)=>e.year!==t.year?e.year-t.year:e.month-t.month),s=t.reduce((e,t)=>e+t.revenue,0),i=t.reduce((e,t)=>e+t.kgSold,0);return{monthlyRevenue:r,totalRevenue:s,totalKgSold:i}},[t]);return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(Qm,{title:"Sales Analytics",subtitle:"Visualize sales performance across all channels."}),(0,am.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,am.jsx)(cg,{title:"Total Revenue (All Time)",value:r?"...":og(i.totalRevenue),icon:ug,color:"blue"}),(0,am.jsx)(cg,{title:"Total LPG Sold (All Time)",value:r?"...":`${i.totalKgSold.toLocaleString()} kg`,icon:Em,color:"green"})]}),(0,am.jsx)(Fg,{data:i.monthlyRevenue,title:"Monthly Revenue (\u20a6)"})]})}const Ug=gm("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),zg=gm("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Bg=gm("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),$g=gm("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),qg=gm("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Hg=gm("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Kg=t=>{let{onSuccess:n,onError:r}=t;const[s,i]=(0,e.useState)({name:"",phone:"",email:"",type:"Individual"}),[a,o]=(0,e.useState)(!1),l=e=>i({...s,[e.target.name]:e.target.value});return(0,am.jsx)(gg,{title:"Add New Customer",onClose:()=>n(),children:(0,am.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0);try{await(t=s,$p(Tf(nm,`artifacts/${rm}/customers`),{...t,createdAt:Xp()})),n(`Customer "${s.name}" added successfully.`)}catch(i){r("Failed to add customer.")}finally{o(!1)}var t},className:"space-y-4",children:[(0,am.jsx)("input",{type:"text",name:"name",value:s.name,onChange:l,placeholder:"Full Name / Company Name",className:"mt-1 w-full p-2 border rounded-md",required:!0}),(0,am.jsx)("input",{type:"tel",name:"phone",value:s.phone,onChange:l,placeholder:"Phone Number",className:"mt-1 w-full p-2 border rounded-md",required:!0}),(0,am.jsx)("input",{type:"email",name:"email",value:s.email,onChange:l,placeholder:"Email Address",className:"mt-1 w-full p-2 border rounded-md"}),(0,am.jsx)("div",{className:"flex justify-end pt-4",children:(0,am.jsx)(Hm,{type:"submit",disabled:a,children:a?"Adding...":"Add Customer"})})]})})},Gg=t=>{let{customer:n,user:r}=t;const[s,i]=(0,e.useState)(""),a=(0,e.useMemo)(()=>{return(e=n.id)?gp(Tf(nm,`artifacts/${rm}/customers/${e}/notes`),xp("createdAt","desc")):null;var e},[n.id]),{docs:o,loading:l,error:c}=Xm(a);(0,e.useEffect)(()=>{c&&um("ERROR","CustomerHub: Failed to fetch customer notes.",{error:c,customerId:n.id})},[c,n.id]);return(0,am.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,am.jsxs)("h4",{className:"font-semibold text-gray-700 flex items-center mb-2",children:[(0,am.jsx)(Ug,{className:"mr-2"}),"Internal Notes"]}),(0,am.jsxs)("div",{className:"flex gap-2",children:[(0,am.jsx)("textarea",{value:s,onChange:e=>i(e.target.value),placeholder:"Add a new note...",className:"flex-grow p-2 border rounded-md text-sm"}),(0,am.jsx)(Hm,{onClick:async()=>{if(s.trim())try{await((e,t,n)=>$p(Tf(nm,`artifacts/${rm}/customers/${e}/notes`),{text:t,createdAt:Xp(),author:{uid:n.uid,email:n.email}}))(n.id,s,r),um("INFO","CustomerHub: New note added.",{customerId:n.id}),i("")}catch(c){um("ERROR","CustomerHub: Failed to add note.",{error:c.message,customerId:n.id})}},children:"Save"})]}),(0,am.jsx)("div",{className:"mt-2 space-y-2 max-h-40 overflow-y-auto",children:l?(0,am.jsx)("p",{children:"Loading notes..."}):o.map(e=>(0,am.jsxs)("div",{className:"bg-yellow-50 p-2 rounded-md text-xs",children:[(0,am.jsx)("p",{children:e.text}),(0,am.jsxs)("p",{className:"text-right text-gray-500 mt-1",children:["- ",e.author.email," on ",lg(e.createdAt)]})]},e.id))})]})},Wg=t=>{let{customer:n,onClose:r}=t;const{user:s}=cm(),i=(0,e.useMemo)(()=>{return e=n.id,gp(Tf(nm,`artifacts/${rm}/data_entries`),vp("status","==","approved"),vp("type","==","sale"),vp("customerId","==",e));var e},[n.id]),{docs:a,loading:o,error:l}=Xm(i);return(0,e.useEffect)(()=>{l&&um("ERROR","CustomerHub: Failed to fetch sales for customer.",{error:l,customerId:n.id})},[l,n.id]),(0,am.jsx)(gg,{title:"Customer Details",onClose:r,children:(0,am.jsxs)("div",{className:"space-y-4",children:[(0,am.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,am.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center",children:[(0,am.jsx)(zg,{className:"mr-2"}),n.name]}),(0,am.jsxs)("p",{className:"text-sm text-gray-600 flex items-center mt-1",children:[(0,am.jsx)(Bg,{size:14,className:"mr-2"}),n.phone]}),(0,am.jsxs)("p",{className:"text-sm text-gray-600 flex items-center",children:[(0,am.jsx)($g,{size:14,className:"mr-2"}),n.email||"N/A"]})]}),(0,am.jsxs)("div",{children:[(0,am.jsxs)("h4",{className:"font-semibold text-gray-700 flex items-center",children:[(0,am.jsx)(qg,{className:"mr-2"}),"Order History"]}),o?(0,am.jsx)("p",{children:"Loading order history..."}):(0,am.jsx)("div",{className:"mt-2 space-y-2 max-h-64 overflow-y-auto",children:a.length>0?a.map(e=>(0,am.jsxs)("div",{className:"flex justify-between text-sm border-b pb-1",children:[(0,am.jsx)("span",{children:lg(e.date)}),(0,am.jsxs)("span",{children:[e.kgSold," kg"]}),(0,am.jsx)("span",{className:"font-semibold",children:og(e.revenue)})]},e.id)):(0,am.jsx)("p",{className:"text-sm text-gray-500",children:"No approved orders found for this customer."})})]}),(0,am.jsx)(Gg,{customer:n,user:s})]})})};function Qg(){const[t,n]=(0,e.useState)(!1),[r,s]=(0,e.useState)(null),[i,a]=(0,e.useState)(""),[o,l]=(0,e.useState)({show:!1,message:"",type:"success"}),{docs:c,loading:u,error:h}=Xm(gp(Tf(nm,`artifacts/${rm}/customers`),xp("name")));(0,e.useEffect)(()=>{um("DEBUG","CustomerHub: Component did mount.",{component:"CustomerHub"})},[]),(0,e.useEffect)(()=>{h&&um("ERROR","CustomerHub: Failed to fetch customer list.",{error:h})},[h]);const d=(0,e.useMemo)(()=>(um("DEBUG","CustomerHub: Filtering customer list.",{searchTerm:i,customerCount:c.length}),c.filter(e=>{var t,n;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(i.toLowerCase()))||(null===(n=e.phone)||void 0===n?void 0:n.includes(i))})),[c,i]);return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(wg,{notification:o,setNotification:l}),t&&(0,am.jsx)(Kg,{onClose:()=>n(!1),onSuccess:e=>l({show:!0,message:e,type:"success"})}),r&&(0,am.jsx)(Wg,{customer:r,onClose:()=>s(null)}),(0,am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,am.jsx)(Qm,{title:"Customer Hub (CRM)",subtitle:"Manage customer information and view order history."}),(0,am.jsx)(Hm,{onClick:()=>n(!0),icon:xg,children:"Add Customer"})]}),(0,am.jsxs)(Km,{children:[(0,am.jsx)("div",{className:"flex justify-between mb-4",children:(0,am.jsxs)("div",{className:"relative",children:[(0,am.jsx)(Hg,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,am.jsx)("input",{type:"text",placeholder:"Search by name or phone...",value:i,onChange:e=>a(e.target.value),className:"pl-10 p-2 border rounded-md"})]})}),u?(0,am.jsx)("p",{children:"Loading customers..."}):(0,am.jsx)("div",{className:"overflow-x-auto",children:(0,am.jsxs)("table",{className:"w-full text-left",children:[(0,am.jsx)("thead",{children:(0,am.jsxs)("tr",{className:"border-b bg-gray-50",children:[(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Name"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Phone"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Email"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Actions"})]})}),(0,am.jsx)("tbody",{children:d.map(e=>(0,am.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,am.jsx)("td",{className:"p-4 font-medium",children:e.name}),(0,am.jsx)("td",{className:"p-4",children:e.phone}),(0,am.jsx)("td",{className:"p-4",children:e.email||"N/A"}),(0,am.jsx)("td",{className:"p-4",children:(0,am.jsx)(Hm,{onClick:()=>s(e),variant:"secondary",children:"View Details"})})]},e.id))})]})})]})]})}const Yg=gm("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function Jg(t){var n;let{user:r,plants:s,onSuccess:i,onError:a,dailySummaryId:o}=t;const l={kgSold:"",revenue:"",paymentMethod:"Cash",branchId:(null===(n=s[0])||void 0===n?void 0:n.id)||"",date:(new Date).toISOString().split("T")[0]},[c,u]=(0,e.useState)(l),[h,d]=(0,e.useState)(!1),f=e=>u({...c,[e.target.name]:e.target.value});return(0,am.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(!0);try{await Zm({...c,dailySummaryId:o},r,"sale"),i("Sales log submitted for approval!");const e={...c,revenue:parseFloat(c.revenue),cashierEmail:r.email,receiptNumber:`SALE-${Date.now()}`},t=((e,t)=>{const n=new Date,r=n.toLocaleDateString("en-GB"),s=n.toLocaleTimeString("en-US",{hour12:!0});let i="";return i+="[C]<b><H2>SALES RECEIPT</H2></b>\n",i+=`[C]<b>${t.name}</b>\n`,i+=`[C]${t.address}\n`,i+=`[C]Phone: ${t.phone}\n`,i+="[C]================================\n",i+=`[L]Receipt No: [R]${e.receiptNumber||"N/A"}\n`,i+=`[L]Date: ${r} [R]Time: ${s}\n`,i+=`[L]Cashier: [R]${e.cashierEmail}\n`,i+="[C]--------------------------------\n",i+="[L]<b>ITEM</b>[R]<b>AMOUNT</b>\n",i+=`[L]LPG Gas (${e.kgSold} kg)[R]${e.revenue.toLocaleString()}\n`,i+="[C]--------------------------------\n",i+=`[L]<b><H2>TOTAL</H2></b>[R]<b><H2>NGN ${e.revenue.toLocaleString()}</H2></b>\n`,i+="[C]================================\n",i+=`[C]Payment Method: ${e.paymentMethod}\n\n`,i+="[C]Thank you for your patronage!\n",i+=`[C]<qrcode>${t.website||""}</qrcode>\n\n\n`,i})(e,{name:"PrimeJet Gas LLC",address:"Lagos, Nigeria",phone:"0800-PRIMEJET",website:"www.primejet.ng"}),n=`rawbt:${btoa(t)}`;window.open(n,"_blank"),u(l)}catch(t){a(t.message||"Failed to submit sales log.")}finally{d(!1)}},className:"space-y-4 p-4 border rounded-lg bg-white",children:[(0,am.jsx)("h3",{className:"font-semibold text-gray-700",children:"Log Customer Sale"}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Branch"}),(0,am.jsx)("select",{name:"branchId",value:c.branchId,onChange:f,className:"mt-1 w-full p-2 border rounded-md bg-white",children:s.map(e=>(0,am.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"KG Sold"}),(0,am.jsx)("input",{type:"number",name:"kgSold",value:c.kgSold,onChange:f,className:"mt-1 w-full p-2 border rounded-md",required:!0})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Total Revenue (\u20a6)"}),(0,am.jsx)("input",{type:"number",name:"revenue",value:c.revenue,onChange:f,className:"mt-1 w-full p-2 border rounded-md",required:!0})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Payment Method"}),(0,am.jsxs)("select",{name:"paymentMethod",value:c.paymentMethod,onChange:f,className:"mt-1 w-full p-2 border rounded-md bg-white",children:[(0,am.jsx)("option",{children:"Cash"}),(0,am.jsx)("option",{children:"POS"}),(0,am.jsx)("option",{children:"Transfer"})]})]}),(0,am.jsx)("div",{className:"flex justify-end pt-2",children:(0,am.jsx)(Hm,{type:"submit",disabled:h,icon:Yg,children:h?"Submitting...":"Log & Print Receipt"})})]})}function Xg(t){var n;let{user:r,plants:s,onPushToTable:i,onError:a}=t;const[o,l]=(0,e.useState)({description:"",amount:"",category:Om[0],branchId:(null===(n=s[0])||void 0===n?void 0:n.id)||"",date:(new Date).toISOString().split("T")[0]}),[c,u]=(0,e.useState)(!1),h=e=>{const{name:t,value:n}=e.target;l(e=>({...e,[t]:n}))};return(0,am.jsxs)("form",{onSubmit:e=>{var t;e.preventDefault(),o.description&&o.amount&&o.category&&o.branchId?(i(o,"expense"),l({description:"",amount:"",category:Om[0],branchId:(null===(t=s[0])||void 0===t?void 0:t.id)||"",date:(new Date).toISOString().split("T")[0]})):a("Please fill in all required fields.")},className:"space-y-4 p-4 border rounded-lg bg-white",children:[(0,am.jsx)("h3",{className:"font-semibold text-gray-700",children:"Log Operational Expense"}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Branch"}),(0,am.jsx)("select",{name:"branchId",value:o.branchId,onChange:h,className:"mt-1 block w-full p-2 border rounded-md bg-white",children:s.map(e=>(0,am.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,am.jsx)("select",{name:"category",value:o.category,onChange:h,className:"mt-1 block w-full p-2 border rounded-md bg-white",children:Om.map(e=>(0,am.jsx)("option",{children:e},e))})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,am.jsx)("input",{type:"text",name:"description",value:o.description,onChange:h,className:"mt-1 block w-full p-2 border rounded-md",placeholder:"e.g., Generator fuel",required:!0})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount (\u20a6)"}),(0,am.jsx)("input",{type:"number",name:"amount",value:o.amount,onChange:h,className:"mt-1 block w-full p-2 border rounded-md",placeholder:"e.g., 50000",required:!0})]}),(0,am.jsx)("div",{className:"flex justify-end pt-2",children:(0,am.jsx)(Hm,{type:"submit",disabled:c,icon:xg,children:"Add to Today's Entries"})})]})}function Zg(t){let{date:n,onClose:r}=t;const[s,i]=(0,e.useState)(null),[a,o]=(0,e.useState)(!0);(0,e.useEffect)(()=>{(async()=>{o(!0);try{const e=await(async e=>{const t=new Date(e);t.setHours(0,0,0,0);const n=new Date(e);n.setHours(23,59,59,999);const r=gp(Tf(nm,`artifacts/${rm}/data_entries`),vp("submittedAt",">=",t),vp("submittedAt","<=",n),vp("status","==","pending"));return(await Vp(r)).docs.map(e=>({id:e.id,...e.data()}))})(n),t=e.filter(e=>"sale"===e.type),r=e.filter(e=>"expense"===e.type),s={totalRevenue:t.reduce((e,t)=>e+t.revenue,0),totalKgSold:t.reduce((e,t)=>e+t.kgSold,0),totalExpenses:r.reduce((e,t)=>e+t.amount,0)};i({sales:t,expenses:r,totals:s})}catch(e){console.error("Failed to fetch report data:",e)}finally{o(!1)}})()},[n]);return(0,am.jsx)(gg,{title:`End-of-Day Report for ${lg(n)}`,onClose:r,children:a?(0,am.jsx)("p",{children:"Generating report..."}):s?(0,am.jsxs)("div",{children:[(0,am.jsxs)("div",{id:"report-content",children:[(0,am.jsx)("h1",{style:{color:"black",fontSize:"24px",fontWeight:"bold"},children:"PrimeJet Gas LLC"}),(0,am.jsx)("h2",{style:{color:"black",fontSize:"18px"},children:"End-of-Day Summary"}),(0,am.jsxs)("p",{style:{color:"black"},children:["Date: ",lg(n)]}),(0,am.jsx)("hr",{style:{margin:"1rem 0"}}),(0,am.jsx)("h3",{style:{color:"black",fontWeight:"bold"},children:"Summary"}),(0,am.jsxs)("p",{children:["Total Revenue: ",(0,am.jsx)("strong",{children:og(s.totals.totalRevenue)})]}),(0,am.jsxs)("p",{children:["Total LPG Sold: ",(0,am.jsxs)("strong",{children:[s.totals.totalKgSold.toLocaleString()," kg"]})]}),(0,am.jsxs)("p",{children:["Total Expenses: ",(0,am.jsx)("strong",{children:og(s.totals.totalExpenses)})]}),(0,am.jsx)("hr",{style:{margin:"1rem 0"}}),(0,am.jsx)("h3",{style:{color:"black",fontWeight:"bold"},children:"All Sales"}),s.sales.length>0?s.sales.map((e,t)=>(0,am.jsxs)("p",{children:[e.kgSold," kg (",e.paymentMethod,") - ",og(e.revenue)]},`sale-${t}`)):(0,am.jsx)("p",{children:"No sales recorded."}),(0,am.jsx)("hr",{style:{margin:"1rem 0"}}),(0,am.jsx)("h3",{style:{color:"black",fontWeight:"bold"},children:"All Expenses"}),s.expenses.length>0?s.expenses.map((e,t)=>(0,am.jsxs)("p",{children:[e.description," (",e.category,") - ",og(e.amount)]},`exp-${t}`)):(0,am.jsx)("p",{children:"No expenses recorded."})]}),(0,am.jsx)("div",{className:"flex justify-end pt-4 no-print",children:(0,am.jsx)(Hm,{onClick:()=>{const e=document.getElementById("report-content").innerHTML,t=document.body.innerHTML;document.body.innerHTML=`<html><head><title>Print Report</title></head><body>${e}</body></html>`,window.print(),document.body.innerHTML=t,window.location.reload()},icon:Cg,children:"Print Report"})})]}):(0,am.jsx)("p",{children:"Could not generate report."})})}const ey=t=>{var n;let{user:r,plants:s,dailySummary:i,onSave:a,loading:o}=t;const[l,c]=(0,e.useState)({date:(new Date).toISOString().split("T")[0],branchId:(null===(n=s[0])||void 0===n?void 0:n.id)||"",cashierName:r.email,openingMeterA:"",closingMeterA:"",openingMeterB:"",closingMeterB:"",pricePerKg:"1100"}),[u,h]=(0,e.useState)(!1);(0,e.useEffect)(()=>{var e,t,n,r,s;i&&c({date:i.date,branchId:i.branchId,cashierName:i.cashierName,openingMeterA:(null===(e=i.meters)||void 0===e?void 0:e.openingMeterA)||"",closingMeterA:(null===(t=i.meters)||void 0===t?void 0:t.closingMeterA)||"",openingMeterB:(null===(n=i.meters)||void 0===n?void 0:n.openingMeterB)||"",closingMeterB:(null===(r=i.meters)||void 0===r?void 0:r.closingMeterB)||"",pricePerKg:(null===(s=i.meters)||void 0===s?void 0:s.pricePerKg)||"1100"})},[i]);const d=e=>c({...l,[e.target.name]:e.target.value});return(0,am.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{await a(l)}finally{h(!1)}},className:"space-y-4",children:[(0,am.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Today's Readings"}),(0,am.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Branch"}),(0,am.jsx)("select",{name:"branchId",value:l.branchId,onChange:d,className:"mt-1 w-full p-2 border rounded-md bg-white",required:!0,children:s.map(e=>(0,am.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Price per kg (\u20a6)"}),(0,am.jsx)("input",{type:"number",step:"0.01",name:"pricePerKg",value:l.pricePerKg,onChange:d,className:"mt-1 w-full p-2 border rounded-md",required:!0})]})]}),(0,am.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Opening Meter A (kg)"}),(0,am.jsx)("input",{type:"number",step:"0.01",name:"openingMeterA",value:l.openingMeterA,onChange:d,className:"mt-1 w-full p-2 border rounded-md",required:!0})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Closing Meter A (kg)"}),(0,am.jsx)("input",{type:"number",step:"0.01",name:"closingMeterA",value:l.closingMeterA,onChange:d,className:"mt-1 w-full p-2 border rounded-md",required:!0})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Opening Meter B (kg)"}),(0,am.jsx)("input",{type:"number",step:"0.01",name:"openingMeterB",value:l.openingMeterB,onChange:d,className:"mt-1 w-full p-2 border rounded-md",required:!0})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Closing Meter B (kg)"}),(0,am.jsx)("input",{type:"number",step:"0.01",name:"closingMeterB",value:l.closingMeterB,onChange:d,className:"mt-1 w-full p-2 border rounded-md",required:!0})]})]}),(0,am.jsx)("div",{className:"flex justify-end pt-2",children:(0,am.jsx)(Hm,{type:"submit",disabled:u,children:u?"Saving...":"Save Readings"})})]})},ty=e=>{let{user:t,plants:n,dailySummaryId:r,onSuccess:s,onError:i,onPushToTable:a,localEntries:o,handleSubmitAll:l,isSubmitting:c}=e;return(0,am.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,am.jsxs)("div",{className:"space-y-4",children:[(0,am.jsx)(Jg,{user:t,plants:n,onSuccess:s,onError:i,dailySummaryId:r,onPushToTable:a}),(0,am.jsx)(Xg,{user:t,plants:n,onSuccess:s,onError:i,dailySummaryId:r,onPushToTable:a})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Today's Entries"}),(0,am.jsx)("div",{className:"overflow-x-auto",children:(0,am.jsxs)("table",{className:"w-full text-left",children:[(0,am.jsx)("thead",{children:(0,am.jsxs)("tr",{className:"border-b bg-gray-50",children:[(0,am.jsx)("th",{className:"p-4 text-sm font-semibold",children:"Time"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold",children:"Type"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold",children:"Details"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-right",children:"Amount"})]})}),(0,am.jsx)("tbody",{children:Array.isArray(o)&&o.length>0?o.map((e,t)=>(0,am.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,am.jsx)("td",{className:"p-4",children:(new Date).toLocaleTimeString()}),(0,am.jsx)("td",{className:"p-4",children:(0,am.jsx)("span",{className:"px-2 py-1 text-xs rounded-full "+("sale"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.type})}),(0,am.jsx)("td",{className:"p-4",children:"sale"===e.type?`${e.kgSold} kg (${e.paymentMethod})`:e.description}),(0,am.jsx)("td",{className:"p-4 text-right font-semibold",children:og(e.revenue||e.amount)})]},t)):(0,am.jsx)("tr",{children:(0,am.jsx)("td",{colSpan:"4",className:"text-center p-8 text-gray-500",children:"No transactions logged yet today."})})})]})}),(0,am.jsx)("div",{className:"flex justify-end mt-6",children:(0,am.jsx)(Hm,{onClick:l,disabled:!Array.isArray(o)||0===o.length||c,icon:Yg,children:c?"Submitting...":"Submit All for Approval"})})]})]})},ny=t=>{let{dailySummary:n,entries:r,onFinalize:s,loading:i}=t;const a=(0,e.useMemo)(()=>{if(!n||!n.meters)return{totalKgSold:0,calculatedRevenue:0,actualRevenue:0,discrepancy:0,totalExpenses:0};const{openingMeterA:e,closingMeterA:t,openingMeterB:s,closingMeterB:i,pricePerKg:a}=n.meters,o=(parseFloat(t)||0)-(parseFloat(e)||0)+(parseFloat(i)||0)-(parseFloat(s)||0),l=o*(parseFloat(a)||0),c=r.filter(e=>"sale"===e.type).reduce((e,t)=>e+t.revenue,0),u=r.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0);return{totalKgSold:o,calculatedRevenue:l,actualRevenue:c,discrepancy:c-l,totalExpenses:u}},[n,r]);return i?(0,am.jsx)("p",{children:"Loading reconciliation data..."}):n?(0,am.jsxs)("div",{className:"space-y-6",children:[(0,am.jsxs)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:["Daily Summary for ",lg(n.date)]}),(0,am.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-center",children:[(0,am.jsxs)(Km,{children:[(0,am.jsx)("p",{className:"text-sm text-gray-500",children:"Total KG Sold"}),(0,am.jsxs)("p",{className:"font-bold text-lg mt-1",children:[a.totalKgSold.toFixed(2)," kg"]})]}),(0,am.jsxs)(Km,{children:[(0,am.jsx)("p",{className:"text-sm text-gray-500",children:"Calculated Revenue"}),(0,am.jsx)("p",{className:"font-bold text-lg mt-1",children:og(a.calculatedRevenue)})]}),(0,am.jsxs)(Km,{children:[(0,am.jsx)("p",{className:"text-sm text-gray-500",children:"Actual Revenue"}),(0,am.jsx)("p",{className:"font-bold text-lg mt-1",children:og(a.actualRevenue)})]}),(0,am.jsxs)(Km,{children:[(0,am.jsx)("p",{className:"text-sm text-gray-500",children:"Discrepancy"}),(0,am.jsx)("p",{className:"font-bold text-lg mt-1 "+(a.discrepancy>=0?"text-green-600":"text-red-600"),children:og(a.discrepancy)})]})]}),(0,am.jsxs)(Km,{children:[(0,am.jsx)("h4",{className:"font-semibold text-gray-700",children:"Expenses for the Day"}),(0,am.jsx)("p",{className:"text-2xl font-bold mt-2",children:og(a.totalExpenses)})]}),(0,am.jsx)("div",{className:"flex justify-center pt-4",children:(0,am.jsx)(Hm,{onClick:()=>s(n.id),icon:vm,children:"Submit End-of-Day Report"})})]}):(0,am.jsx)("p",{className:"text-center p-8 text-gray-500",children:"Please start by logging meter readings to begin your daily summary."})};function ry(){const{user:t}=cm(),[n,r]=(0,e.useState)("readings"),[s,i]=(0,e.useState)({show:!1,message:"",type:"success"}),[a,o]=(0,e.useState)(!1),{docs:l,loading:c}=Xm(sg()),u=(0,e.useMemo)(()=>(e=>{const t=new Date;return t.setHours(0,0,0,0),gp(Tf(nm,`artifacts/${rm}/daily_summaries`),vp("submittedBy.uid","==",e),vp("status","==","in_progress"),vp("createdAt",">=",t),Ep(1))})(t.uid),[t.uid]),{docs:h,loading:d}=Xm(u),f=h[0],p=(0,e.useMemo)(()=>{const e=new Date;return e.setHours(0,0,0,0),gp(Tf(nm,`artifacts/${rm}/data_entries`),vp("submittedBy.uid","==",t.uid),vp("submittedAt",">=",e),xp("submittedAt","desc"))},[t.uid]),{docs:m,loading:g}=Xm(p);return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(wg,{notification:s,setNotification:i}),a&&(0,am.jsx)(Zg,{date:new Date,onClose:()=>o(!1)}),(0,am.jsx)(Qm,{title:"Daily Transaction Log (POS)",subtitle:"Log sales and expenses as they happen."}),(0,am.jsxs)(Km,{children:[(0,am.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,am.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,am.jsx)("button",{onClick:()=>r("readings"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm "+("readings"===n?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Meter Readings"}),(0,am.jsx)("button",{onClick:()=>r("transactions"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm "+("transactions"===n?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Transaction Log"}),(0,am.jsx)("button",{onClick:()=>r("reconciliation"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm "+("reconciliation"===n?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Reconciliation"})]})}),"readings"===n&&(0,am.jsx)(ey,{user:t,plants:l,dailySummary:f,onSave:async e=>{try{await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=n?If(nm,`artifacts/${rm}/daily_summaries`,n):If(Tf(nm,`artifacts/${rm}/daily_summaries`)),s={date:new Date(e.date),branchId:e.branchId,cashierName:e.cashierName,meters:{openingMeterA:parseFloat(e.openingMeterA)||0,closingMeterA:parseFloat(e.closingMeterA)||0,openingMeterB:parseFloat(e.openingMeterB)||0,closingMeterB:parseFloat(e.closingMeterB)||0,pricePerKg:parseFloat(e.pricePerKg)||0},status:"in_progress",submittedBy:{uid:t.uid,email:t.email},createdAt:Xp()};return await Up(r,s,{merge:!0}),r.id}(e,t,null===f||void 0===f?void 0:f.id),i({show:!0,message:"Meter readings saved!",type:"success"}),r("transactions")}catch(n){um("ERROR","DailyLog: Failed to save meter readings.",{error:n.message}),i({show:!0,message:"Failed to save readings.",type:"error"})}},loading:d}),"transactions"===n&&(0,am.jsx)(ty,{user:t,plants:l,dailySummaryId:null===f||void 0===f?void 0:f.id,onSuccess:e=>{um("INFO",`DailyLog: ${e}`,{component:"DailyLog"}),i({show:!0,message:e,type:"success"})},onError:e=>{um("ERROR",`DailyLog: ${e}`,{component:"DailyLog"}),i({show:!0,message:e,type:"error"})},entries:m,loadingEntries:g}),"reconciliation"===n&&(0,am.jsx)(ny,{dailySummary:f,entries:m,onFinalize:async e=>{try{await(async e=>zp(If(nm,`artifacts/${rm}/daily_summaries`,e),{status:"pending",submittedAt:Xp()}))(e),i({show:!0,message:"End-of-day report submitted for approval!",type:"success"}),o(!0)}catch(t){um("ERROR","DailyLog: Failed to finalize report.",{error:t.message}),i({show:!0,message:"Failed to submit report.",type:"error"})}},loading:d||g})]})]})}const sy=gm("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]),iy=gm("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);function ay(){const{user:t}=cm(),n=gp(Tf(nm,`artifacts/${rm}/daily_summaries`),vp("status","==","pending"),xp("date","desc")),{docs:r,loading:s,error:i,refetch:a}=Xm(n);e.useEffect(()=>{i&&um("ERROR","ApprovalQueue: Failed to fetch pending summaries.",{error:i})},[i]);const o=async(e,n,r)=>{um("DEBUG",`ApprovalQueue: User attempting to ${r} daily summary ID ${e}.`,{summaryId:e,status:r});try{await(async(e,t,n,r)=>{const s=Zp(nm),i=If(nm,`artifacts/${rm}/daily_summaries`,e);s.update(i,{status:n,reviewedBy:{uid:r.uid,email:r.email},reviewedAt:Xp()});const a=Tf(nm,`artifacts/${rm}/data_entries`);for(const o of t){const e=If(a,o);s.update(e,{status:n,reviewedBy:{uid:r.uid,email:r.email},reviewedAt:Xp()})}return await s.commit()})(e,n,r,t),um("INFO",`ApprovalQueue: Daily summary ${e} and all associated entries successfully updated to ${r}.`,{summaryId:e,status:r}),a()}catch(s){um("ERROR",`ApprovalQueue: Failed to update summary status for ${e}.`,{error:s.message,summaryId:e,status:r}),alert("Error: Could not update status.")}};return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(Qm,{title:"Approval Queue",subtitle:"Review and approve or reject end-of-day reports."}),(0,am.jsxs)(Km,{children:[s&&(0,am.jsx)("p",{children:"Loading pending summaries..."}),i&&(0,am.jsx)("p",{className:"text-red-500",children:"Failed to load data. The error has been logged."}),!s&&!i&&(r.length>0?(0,am.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,am.jsxs)("div",{className:"border rounded-lg p-4 flex justify-between items-center",children:[(0,am.jsxs)("div",{children:[(0,am.jsxs)("p",{className:"font-bold text-lg",children:["Report for ",lg(e.date)]}),(0,am.jsxs)("p",{className:"text-sm text-gray-600",children:["Total Revenue: ",og(e.totalRevenue)]}),(0,am.jsxs)("p",{className:"text-sm text-gray-600",children:["Total Expenses: ",og(e.totalExpenses)]}),(0,am.jsxs)("p",{className:"text-xs text-gray-500",children:["Submitted by ",e.submittedBy.email," on ",lg(e.createdAt)]})]}),(0,am.jsxs)("div",{className:"flex gap-2",children:[(0,am.jsx)(Hm,{onClick:()=>o(e.id,e.entries,"rejected"),variant:"secondary",icon:sy}),(0,am.jsx)(Hm,{onClick:()=>o(e.id,e.entries,"approved"),icon:iy})]})]},e.id))}):(0,am.jsx)("p",{className:"text-center text-gray-500 py-8",children:"The approval queue is empty. Great job!"}))]})]})}const oy=t=>{let{onSuccess:n,onError:r,onClose:s}=t;const[i,a]=(0,e.useState)({email:"",role:Mm.CASHIER}),[o,l]=(0,e.useState)(!1),c=e=>a({...i,[e.target.name]:e.target.value});return(0,am.jsx)(gg,{title:"Invite New User",onClose:s,children:(0,am.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(!0);try{await(t=i.email,a=i.role,$p(Tf(nm,`artifacts/${rm}/users`),{email:t.toLowerCase(),role:a,status:"invited",createdAt:Xp()})),n(`Invitation sent to ${i.email}`),s()}catch(o){um("ERROR","UserManagement: Failed to send invitation.",{error:o.message,email:i.email}),r("Failed to send invitation.")}finally{l(!1)}var t,a},className:"space-y-4",children:[(0,am.jsx)("input",{type:"email",name:"email",value:i.email,onChange:c,placeholder:"User's Email Address",className:"w-full p-2 border rounded-md",required:!0}),(0,am.jsx)("select",{name:"role",value:i.role,onChange:c,className:"w-full p-2 border rounded-md bg-white",children:Object.values(Mm).map(e=>(0,am.jsx)("option",{value:e,children:e},e))}),(0,am.jsx)("div",{className:"flex justify-end pt-2",children:(0,am.jsx)(Hm,{type:"submit",disabled:o,children:"Send Invitation"})})]})})};function ly(){const[t,n]=(0,e.useState)(!1),[r,s]=(0,e.useState)({show:!1,message:"",type:"success"}),i=(0,e.useMemo)(()=>gp(Tf(nm,`artifacts/${rm}/users`),xp("email")),[]),{docs:a,loading:o,error:l}=Xm(i);(0,e.useEffect)(()=>{um("DEBUG","UserManagement: Component did mount.",{component:"UserManagement"}),l&&um("ERROR","UserManagement: Failed to fetch users.",{error:l})},[l]);const c=async(e,t)=>{um("DEBUG",`UserManagement: Attempting to change role for user ${e} to ${t}.`,{uid:e,newRole:t});try{await((e,t)=>zp(If(nm,`artifacts/${rm}/users`,e),{role:t}))(e,t),u("User role updated successfully.")}catch(n){um("ERROR","UserManagement: Failed to update user role.",{error:n.message,uid:e,newRole:t}),h("Failed to update role.")}},u=e=>s({show:!0,message:e,type:"success"}),h=e=>s({show:!0,message:e,type:"error"});return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(wg,{notification:r,setNotification:s}),t&&(0,am.jsx)(oy,{onClose:()=>n(!1),onSuccess:u,onError:h}),(0,am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,am.jsx)(Qm,{title:"User Management",subtitle:"Invite new users and manage their roles."}),(0,am.jsx)(Hm,{onClick:()=>n(!0),icon:xg,children:"Invite User"})]}),(0,am.jsx)(Km,{children:o?(0,am.jsx)("p",{children:"Loading users..."}):(0,am.jsxs)("table",{className:"w-full text-left",children:[(0,am.jsx)("thead",{children:(0,am.jsxs)("tr",{className:"border-b",children:[(0,am.jsx)("th",{className:"p-2",children:"Email"}),(0,am.jsx)("th",{className:"p-2",children:"Role"}),(0,am.jsx)("th",{className:"p-2",children:"Status"})]})}),(0,am.jsx)("tbody",{children:a.map(e=>(0,am.jsxs)("tr",{className:"border-b",children:[(0,am.jsx)("td",{className:"p-2 font-medium",children:e.email}),(0,am.jsx)("td",{className:"p-2",children:(0,am.jsx)("select",{value:e.role,onChange:t=>c(e.id,t.target.value),className:"p-1 border rounded-md bg-white",children:Object.values(Mm).map(e=>(0,am.jsx)("option",{value:e,children:e},e))})}),(0,am.jsx)("td",{className:"p-2",children:(0,am.jsx)("span",{className:"px-2 py-1 text-xs rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})})]},e.id))})]})})]})}const cy=gm("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),uy=t=>{let{onSuccess:n,onError:r}=t;const[s,i]=(0,e.useState)({name:"",capacity:"2500",status:"Online"}),[a,o]=(0,e.useState)(!1),l=e=>i({...s,[e.target.name]:e.target.value});return(0,am.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s.name&&s.capacity){o(!0);try{await(t=s,$p(Tf(nm,`artifacts/${rm}/plants`),{...t,capacity:parseFloat(t.capacity)||0,outputToday:0,uptime:100,createdAt:Xp()})),n(`Plant "${s.name}" added successfully!`),i({name:"",capacity:"2500",status:"Online"})}catch(a){console.error("Error adding plant:",a),r("Failed to add plant.")}finally{o(!1)}var t}else r("Plant name and capacity are required.")},className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,am.jsxs)("div",{className:"md:col-span-1",children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Plant Name"}),(0,am.jsx)("input",{type:"text",name:"name",value:s.name,onChange:l,className:"mt-1 w-full p-2 border rounded-md",placeholder:"e.g., Ikeja Plant",required:!0})]}),(0,am.jsxs)("div",{className:"md:col-span-1",children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Capacity (kg)"}),(0,am.jsx)("input",{type:"number",name:"capacity",value:s.capacity,onChange:l,className:"mt-1 w-full p-2 border rounded-md",required:!0})]}),(0,am.jsx)("div",{className:"md:col-span-1",children:(0,am.jsx)(Hm,{type:"submit",disabled:a,icon:xg,className:"w-full",children:a?"Adding...":"Add Plant"})})]})};function hy(){const[t,n]=(0,e.useState)({lowStockThreshold:"",taxRateVAT:""}),[r,s]=(0,e.useState)(!0),[i,a]=(0,e.useState)(!1),[o,l]=(0,e.useState)({show:!1,message:"",type:"success"}),{docs:c,loading:u}=Xm(sg());(0,e.useEffect)(()=>{(async()=>{s(!0);const e=await(async()=>{const e=If(nm,`artifacts/${rm}/configuration`,"main_settings"),t=await Lp(e);if(t.exists())return t.data();{const t={lowStockThreshold:500,taxRateVAT:7.5};return await Up(e,t),t}})();n(e),s(!1)})()},[]);const h=e=>{n({...t,[e.target.name]:parseFloat(e.target.value)||0})},d=async(e,t)=>{if(window.confirm(`Are you sure you want to remove the plant "${t}"? This action cannot be undone.`))try{await(e=>Bp(If(nm,`artifacts/${rm}/plants`,e)))(e),l({show:!0,message:`Plant "${t}" removed.`,type:"success"})}catch(n){console.error("Error removing plant:",n),l({show:!0,message:"Failed to remove plant.",type:"error"})}};return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(wg,{notification:o,setNotification:l}),(0,am.jsx)(Qm,{title:"Admin Configuration Panel",subtitle:"Manage application-wide settings and plant locations."}),(0,am.jsxs)(Km,{className:"mb-6",children:[(0,am.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,am.jsx)(_m,{className:"mr-2"})," Plant Management"]}),(0,am.jsx)("div",{className:"mb-6",children:(0,am.jsx)(uy,{onSuccess:e=>l({show:!0,message:e,type:"success"}),onError:e=>l({show:!0,message:e,type:"error"})})}),(0,am.jsx)("div",{className:"space-y-2",children:u?(0,am.jsx)("p",{children:"Loading plants..."}):c.map(e=>(0,am.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-md",children:[(0,am.jsxs)("div",{children:[(0,am.jsx)("p",{className:"font-medium",children:e.name}),(0,am.jsxs)("p",{className:"text-xs text-gray-500",children:["Capacity: ",e.capacity," kg"]})]}),(0,am.jsx)(Hm,{onClick:()=>d(e.id,e.name),variant:"danger",icon:Eg})]},e.id))})]}),(0,am.jsxs)(Km,{children:[(0,am.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"General Settings"}),r?(0,am.jsx)("p",{children:"Loading settings..."}):(0,am.jsxs)(am.Fragment,{children:[(0,am.jsxs)("div",{className:"space-y-6 mt-4",children:[(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Low Stock Alert Threshold (kg)"}),(0,am.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Set the bulk LPG level that triggers a low stock warning."}),(0,am.jsx)("input",{type:"number",name:"lowStockThreshold",value:t.lowStockThreshold,onChange:h,className:"p-2 border rounded-md w-full md:w-1/2"})]}),(0,am.jsxs)("div",{className:"border-t pt-6",children:[(0,am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"VAT Rate (%)"}),(0,am.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Set the Value-Added Tax rate for tax compliance reports."}),(0,am.jsx)("input",{type:"number",name:"taxRateVAT",step:"0.1",value:t.taxRateVAT,onChange:h,className:"p-2 border rounded-md w-full md:w-1/2"})]})]}),(0,am.jsx)("div",{className:"flex justify-end mt-8 pt-4 border-t",children:(0,am.jsx)(Hm,{onClick:async()=>{a(!0);try{await(e=t,zp(If(nm,`artifacts/${rm}/configuration`,"main_settings"),e)),l({show:!0,message:"Settings saved successfully!",type:"success"})}catch(n){console.error("Error saving settings:",n),l({show:!0,message:"Failed to save settings.",type:"error"})}finally{a(!1)}var e},disabled:i,icon:cy,children:i?"Saving...":"Save Settings"})})]})]})]})}var dy=n(766),fy=n.n(dy);const py=gm("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]),my=gm("CloudUpload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]),gy=t=>{let{user:n,plants:r,onSuccess:s,onError:i}=t;const[a,o]=(0,e.useState)(!1);return(0,am.jsxs)("div",{children:[(0,am.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Bulk Upload from CSV"}),(0,am.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Upload a CSV of daily summaries with headers: `date`, `branchName`, `cashierName`, `openingMeterA`, `closingMeterA`, `openingMeterB`, `closingMeterB`, `pricePerKg`, `posAmount`, `cashAmount`, `expenseDescription`, `expenseCategory`, and `expenseAmount`."}),(0,am.jsxs)("label",{htmlFor:"csv-upload",className:"w-full inline-block cursor-pointer",children:[(0,am.jsxs)("div",{className:"flex items-center justify-center font-bold py-2 px-4 rounded-lg transition-colors duration-200 bg-gray-200 text-gray-800 hover:bg-gray-300",children:[(0,am.jsx)(py,{size:20,className:"mr-2"}),a?"Uploading...":"Choose CSV File"]}),(0,am.jsx)("input",{id:"csv-upload",type:"file",accept:".csv",onChange:e=>{const t=e.target.files[0];t&&(um("DEBUG","DataMigration: Starting CSV bulk upload.",{fileName:t.name}),o(!0),fy().parse(t,{header:!0,skipEmptyLines:!0,complete:async e=>{try{const t=e.data;um("INFO",`DataMigration: Parsed ${t.length} daily summary records from CSV.`,{recordCount:t.length});const i=[];for(const e of t){if(Object.values(e).every(e=>!e)){um("WARN","DataMigration: Skipping a completely empty row in CSV.");continue}const t=r.find(t=>{var n,r;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===(null===(r=e.branchName)||void 0===r?void 0:r.toLowerCase())});if(!t){um("WARN",`DataMigration: Skipping record with unknown branch: "${e.branchName}"`,{record:e});continue}const s=new Date(e.date);if(isNaN(s.getTime())){um("ERROR",`DataMigration: Skipping record with invalid date format: "${e.date}"`,{record:e});continue}const a={date:s,branchId:t.id,cashierName:e.cashierName||n.email,openingMeterA:parseFloat(e.openingMeterA)||0,closingMeterA:parseFloat(e.closingMeterA)||0,openingMeterB:parseFloat(e.openingMeterB)||0,closingMeterB:parseFloat(e.closingMeterB)||0,pricePerKg:parseFloat(e.pricePerKg)||0,posAmount:parseFloat(e.posAmount)||0,cashAmount:parseFloat(e.cashAmount)||0,expenses:[],status:"approved"};e.expenseDescription&&e.expenseAmount&&a.expenses.push({description:e.expenseDescription,amount:parseFloat(e.expenseAmount)||0,category:e.expenseCategory||"Other",date:s}),i.push(eg(a,n))}await Promise.all(i),s(`${i.length} historical daily summaries uploaded successfully!`)}catch(t){um("ERROR","DataMigration: Bulk upload failed.",{error:t.message}),i(`An error occurred during the bulk upload: ${t.message}`)}finally{o(!1)}},error:e=>{um("ERROR","DataMigration: CSV parsing failed.",{error:e.message}),i("Failed to parse CSV file. Please check its format."),o(!1)}}))},className:"hidden",disabled:a})]})]})},yy=t=>{let{user:n,plants:r,plantsLoading:s,onSuccess:i,onError:a}=t;const o={description:"",amount:"",category:Om[0],date:(new Date).toISOString().split("T")[0]},l={date:(new Date).toISOString().split("T")[0],branchId:"",cashierName:"",openingMeterA:"",closingMeterA:"",openingMeterB:"",closingMeterB:"",pricePerKg:"1100",posAmount:"",cashAmount:"",expenses:[o]},[c,u]=(0,e.useState)(l),[h,d]=(0,e.useState)(!1);(0,e.useEffect)(()=>{r.length>0&&!c.branchId&&u(e=>({...e,branchId:r[0].id}))},[r,c.branchId]);const f=e=>u({...c,[e.target.name]:e.target.value}),p=(e,t)=>{const n=c.expenses.map((n,r)=>e===r?{...n,[t.target.name]:t.target.value}:n);u({...c,expenses:n})},m=(0,e.useMemo)(()=>{const e=(parseFloat(c.closingMeterA)||0)-(parseFloat(c.openingMeterA)||0)+((parseFloat(c.closingMeterB)||0)-(parseFloat(c.openingMeterB)||0)),t=e*(parseFloat(c.pricePerKg)||0),n=(parseFloat(c.posAmount)||0)+(parseFloat(c.cashAmount)||0);return{totalKgSold:e,calculatedRevenue:t,actualRevenue:n,discrepancy:n-t}},[c]);return(0,am.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(!0);try{await eg(c,n),i(`Summary for ${c.date} saved successfully.`),u(e=>({...l,branchId:e.branchId}))}catch(t){um("ERROR","DataMigration: Failed to save daily summary.",{error:t.message}),a("Failed to save daily summary.")}finally{d(!1)}},className:"space-y-8",children:[(0,am.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Date"}),(0,am.jsx)("input",{type:"date",name:"date",value:c.date,onChange:f,className:"mt-1 w-full p-2 border rounded-md",required:!0})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Branch"}),s?(0,am.jsx)("p",{children:"Loading..."}):(0,am.jsx)("select",{name:"branchId",value:c.branchId,onChange:f,className:"mt-1 w-full p-2 border rounded-md bg-white",required:!0,children:r.map(e=>(0,am.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Cashier Name"}),(0,am.jsx)("input",{type:"text",name:"cashierName",value:c.cashierName,onChange:f,className:"mt-1 w-full p-2 border rounded-md",placeholder:"e.g., Notiq",required:!0})]})]}),(0,am.jsxs)("div",{className:"border-t pt-6",children:[(0,am.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Meter Readings"}),(0,am.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mt-4",children:[(0,am.jsx)("input",{type:"number",step:"0.01",name:"openingMeterA",value:c.openingMeterA,onChange:f,placeholder:"Opening A (kg)",className:"p-2 border rounded-md"}),(0,am.jsx)("input",{type:"number",step:"0.01",name:"closingMeterA",value:c.closingMeterA,onChange:f,placeholder:"Closing A (kg)",className:"p-2 border rounded-md"}),(0,am.jsx)("div",{className:"hidden md:block"}),(0,am.jsx)("input",{type:"number",step:"0.01",name:"openingMeterB",value:c.openingMeterB,onChange:f,placeholder:"Opening B (kg)",className:"p-2 border rounded-md"}),(0,am.jsx)("input",{type:"number",step:"0.01",name:"closingMeterB",value:c.closingMeterB,onChange:f,placeholder:"Closing B (kg)",className:"p-2 border rounded-md"})]})]}),(0,am.jsxs)("div",{className:"border-t pt-6",children:[(0,am.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Sales & Revenue"}),(0,am.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-4",children:[(0,am.jsx)("input",{type:"number",name:"pricePerKg",value:c.pricePerKg,onChange:f,placeholder:"Price per kg (\u20a6)",className:"p-2 border rounded-md"}),(0,am.jsx)("input",{type:"number",name:"posAmount",value:c.posAmount,onChange:f,placeholder:"POS Amount (\u20a6)",className:"p-2 border rounded-md"}),(0,am.jsx)("input",{type:"number",name:"cashAmount",value:c.cashAmount,onChange:f,placeholder:"Cash Amount (\u20a6)",className:"p-2 border rounded-md"})]})]}),(0,am.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,am.jsxs)("div",{children:[(0,am.jsx)("p",{className:"text-xs text-gray-500",children:"Total KG Sold"}),(0,am.jsxs)("p",{className:"font-bold text-lg",children:[m.totalKgSold.toFixed(2)," kg"]})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("p",{className:"text-xs text-gray-500",children:"Calculated Revenue"}),(0,am.jsx)("p",{className:"font-bold text-lg",children:og(m.calculatedRevenue)})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("p",{className:"text-xs text-gray-500",children:"Actual Revenue"}),(0,am.jsx)("p",{className:"font-bold text-lg",children:og(m.actualRevenue)})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("p",{className:"text-xs text-gray-500",children:"Discrepancy"}),(0,am.jsx)("p",{className:"font-bold text-lg "+(m.discrepancy>=0?"text-green-600":"text-red-600"),children:og(m.discrepancy)})]})]}),(0,am.jsxs)("div",{className:"border-t pt-6",children:[(0,am.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Expenditure"}),(0,am.jsx)("div",{className:"space-y-4 mt-4",children:c.expenses.map((e,t)=>(0,am.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-center",children:[(0,am.jsx)("input",{type:"date",name:"date",value:e.date,onChange:e=>p(t,e),className:"p-2 border rounded-md"}),(0,am.jsx)("select",{name:"category",value:e.category,onChange:e=>p(t,e),className:"p-2 border rounded-md bg-white",children:Om.map(e=>(0,am.jsx)("option",{children:e},e))}),(0,am.jsx)("input",{type:"text",name:"description",value:e.description,onChange:e=>p(t,e),placeholder:"Description",className:"p-2 border rounded-md"}),(0,am.jsxs)("div",{className:"flex items-center gap-2",children:[(0,am.jsx)("input",{type:"number",name:"amount",value:e.amount,onChange:e=>p(t,e),placeholder:"Amount (\u20a6)",className:"flex-grow p-2 border rounded-md"}),(0,am.jsx)(Hm,{onClick:()=>(e=>{const t=c.expenses.filter((t,n)=>n!==e);u({...c,expenses:t})})(t),variant:"danger",icon:Eg})]})]},t))}),(0,am.jsx)(Hm,{onClick:()=>{u({...c,expenses:[...c.expenses,o]})},icon:xg,variant:"secondary",className:"mt-2",children:"Add Expense"})]}),(0,am.jsx)("div",{className:"flex justify-end pt-4 border-t",children:(0,am.jsx)(Hm,{type:"submit",disabled:h,icon:my,children:h?"Saving...":"Save Daily Summary"})})]})};function vy(){const{user:t}=cm(),{docs:n,loading:r}=Xm(sg()),[s,i]=(0,e.useState)({show:!1,message:"",type:"success"}),[a,o]=(0,e.useState)("summary"),l=e=>i({show:!0,message:e,type:"success"}),c=e=>i({show:!0,message:e,type:"error"});return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(wg,{notification:s,setNotification:i}),(0,am.jsx)(Qm,{title:"Historical Data Migration",subtitle:"Enter past records using a daily summary or bulk CSV upload."}),(0,am.jsxs)(Km,{children:[(0,am.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,am.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,am.jsx)("button",{onClick:()=>o("summary"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm "+("summary"===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"End-of-Day Summary"}),(0,am.jsx)("button",{onClick:()=>o("bulk"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm "+("bulk"===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Bulk Upload (CSV)"})]})}),"summary"===a?(0,am.jsx)(yy,{user:t,plants:n,plantsLoading:r,onSuccess:l,onError:c}):(0,am.jsx)(gy,{user:t,plants:n,onSuccess:l,onError:c})]})]})}function by(){const e=gp(Tf(nm,`artifacts/${rm}/audit_logs`),xp("timestamp","desc"),Ep(100)),{docs:t,loading:n}=Xm(e);return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(Qm,{title:"System Audit Log",subtitle:"A record of important actions taken within the application."}),(0,am.jsx)(Km,{children:(0,am.jsx)("div",{className:"overflow-x-auto",children:(0,am.jsxs)("table",{className:"w-full text-left",children:[(0,am.jsx)("thead",{children:(0,am.jsxs)("tr",{className:"border-b bg-gray-50",children:[(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Timestamp"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"User"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Action"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Details"})]})}),(0,am.jsx)("tbody",{children:n?(0,am.jsx)("tr",{children:(0,am.jsx)("td",{colSpan:"4",className:"text-center p-8",children:"Loading audit trail..."})}):t.map(e=>{var t;return(0,am.jsxs)("tr",{className:"border-b hover:bg-gray-50 text-sm",children:[(0,am.jsx)("td",{className:"p-4",children:lg(e.timestamp)}),(0,am.jsx)("td",{className:"p-4",children:(null===(t=e.user)||void 0===t?void 0:t.email)||"N/A"}),(0,am.jsx)("td",{className:"p-4 font-medium text-blue-600",children:e.action}),(0,am.jsx)("td",{className:"p-4 text-gray-500 text-xs",children:JSON.stringify(e.details)})]},e.id)})})]})})})]})}function wy(){const e=gp(Tf(nm,`artifacts/${rm}/app_logs`),xp("timestamp","desc"),Ep(100)),{docs:t,loading:n}=Xm(e),r=e=>{switch(e){case"ERROR":return"bg-red-100 text-red-800";case"WARN":return"bg-yellow-100 text-yellow-800";default:return"bg-blue-100 text-blue-800"}};return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(Qm,{title:"Application Logs",subtitle:"View recent errors and events for troubleshooting."}),(0,am.jsx)(Km,{children:(0,am.jsx)("div",{className:"overflow-x-auto",children:(0,am.jsxs)("table",{className:"w-full text-left",children:[(0,am.jsx)("thead",{children:(0,am.jsxs)("tr",{className:"border-b bg-gray-50",children:[(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Timestamp"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Level"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"User"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Message"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-gray-600",children:"Details"})]})}),(0,am.jsx)("tbody",{children:n?(0,am.jsx)("tr",{children:(0,am.jsx)("td",{colSpan:"5",className:"text-center p-8",children:"Loading logs..."})}):t.map(e=>{var t;return(0,am.jsxs)("tr",{className:"border-b hover:bg-gray-50 text-sm",children:[(0,am.jsx)("td",{className:"p-4 whitespace-nowrap",children:lg(e.timestamp)}),(0,am.jsx)("td",{className:"p-4",children:(0,am.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r(e.level)}`,children:e.level})}),(0,am.jsx)("td",{className:"p-4",children:(null===(t=e.user)||void 0===t?void 0:t.email)||"anonymous"}),(0,am.jsx)("td",{className:"p-4 font-medium",children:e.message}),(0,am.jsx)("td",{className:"p-4",children:(0,am.jsx)("pre",{className:"bg-gray-100 p-2 rounded-md text-xs whitespace-pre-wrap",children:(0,am.jsx)("code",{children:e.details})})})]},e.id)})})]})})})]})}const xy=gm("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),_y=gm("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ey=e=>{var t;let{transaction:n,onClose:r}=e;return(0,am.jsx)(gg,{title:"Transaction Details",onClose:r,children:(0,am.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,am.jsxs)("p",{children:[(0,am.jsx)("strong",{children:"Transaction ID:"})," ",n.id]}),(0,am.jsxs)("p",{children:[(0,am.jsx)("strong",{children:"Type:"})," ",n.type]}),(0,am.jsxs)("p",{children:[(0,am.jsx)("strong",{children:"Date:"})," ",lg(n.date)]}),"sale"===n.type?(0,am.jsxs)(am.Fragment,{children:[(0,am.jsxs)("p",{children:[(0,am.jsx)("strong",{children:"KG Sold:"})," ",n.kgSold," kg"]}),(0,am.jsxs)("p",{children:[(0,am.jsx)("strong",{children:"Revenue:"})," ",og(n.revenue)]}),(0,am.jsxs)("p",{children:[(0,am.jsx)("strong",{children:"Payment Method:"})," ",n.paymentMethod]})]}):(0,am.jsxs)(am.Fragment,{children:[(0,am.jsxs)("p",{children:[(0,am.jsx)("strong",{children:"Description:"})," ",n.description]}),(0,am.jsxs)("p",{children:[(0,am.jsx)("strong",{children:"Amount:"})," ",og(n.amount)]}),(0,am.jsxs)("p",{children:[(0,am.jsx)("strong",{children:"Category:"})," ",n.category]})]}),(0,am.jsxs)("p",{children:[(0,am.jsx)("strong",{children:"Submitted By:"})," ",null===(t=n.submittedBy)||void 0===t?void 0:t.email]})]})})};function Sy(){const[t,n]=(0,e.useState)({branchId:"all",type:"all",startDate:"",endDate:""}),[r,s]=(0,e.useState)(null),[i,a]=(0,e.useState)(Date.now()),[o,l]=(0,e.useState)(null),{docs:c}=Xm(sg()),u=ag(t,r),{docs:h,loading:d}=Xm(u),f=e=>{n({...t,[e.target.name]:e.target.value})};return(0,am.jsxs)(am.Fragment,{children:[o&&(0,am.jsx)(Ey,{transaction:o,onClose:()=>l(null)}),(0,am.jsx)(Qm,{title:"Transaction History",subtitle:"View and filter all approved business transactions."}),(0,am.jsxs)(Km,{children:[(0,am.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(null),a(Date.now())},className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Branch"}),(0,am.jsxs)("select",{name:"branchId",value:t.branchId,onChange:f,className:"mt-1 w-full p-2 border rounded-md bg-white",children:[(0,am.jsx)("option",{value:"all",children:"All Branches"}),c.map(e=>(0,am.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Type"}),(0,am.jsxs)("select",{name:"type",value:t.type,onChange:f,className:"mt-1 w-full p-2 border rounded-md bg-white",children:[(0,am.jsx)("option",{value:"all",children:"All Types"}),(0,am.jsx)("option",{value:"sale",children:"Sale"}),(0,am.jsx)("option",{value:"expense",children:"Expense"})]})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"Start Date"}),(0,am.jsx)("input",{type:"date",name:"startDate",value:t.startDate,onChange:f,className:"mt-1 w-full p-2 border rounded-md"})]}),(0,am.jsxs)("div",{children:[(0,am.jsx)("label",{className:"block text-sm font-medium",children:"End Date"}),(0,am.jsx)("input",{type:"date",name:"endDate",value:t.endDate,onChange:f,className:"mt-1 w-full p-2 border rounded-md"})]}),(0,am.jsx)(Hm,{type:"submit",icon:Hg,children:"Search"})]}),(0,am.jsx)("div",{className:"overflow-x-auto",children:(0,am.jsxs)("table",{className:"w-full text-left",children:[(0,am.jsx)("thead",{children:(0,am.jsxs)("tr",{className:"border-b bg-gray-50",children:[(0,am.jsx)("th",{className:"p-4 text-sm font-semibold",children:"Date"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold",children:"Type"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold",children:"Details"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-right",children:"Amount"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold",children:"Actions"})]})}),(0,am.jsx)("tbody",{children:d?(0,am.jsx)("tr",{children:(0,am.jsx)("td",{colSpan:"5",className:"text-center p-8",children:"Loading history..."})}):h.length>0?h.map(e=>(0,am.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,am.jsx)("td",{className:"p-4",children:lg(e.date)}),(0,am.jsx)("td",{className:"p-4",children:(0,am.jsx)("span",{className:"px-2 py-1 text-xs rounded-full "+("sale"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.type})}),(0,am.jsx)("td",{className:"p-4",children:"sale"===e.type?`${e.kgSold} kg (${e.paymentMethod})`:e.description}),(0,am.jsx)("td",{className:"p-4 text-right font-semibold",children:og(e.revenue||e.amount)}),(0,am.jsx)("td",{className:"p-4",children:(0,am.jsx)(Hm,{onClick:()=>l(e),variant:"secondary",size:"sm",children:"View"})})]},e.id)):(0,am.jsx)("tr",{children:(0,am.jsx)("td",{colSpan:"5",className:"text-center p-8 text-gray-500",children:"No transactions found."})})})]})}),(0,am.jsxs)("div",{className:"flex justify-end mt-4 space-x-2",children:[(0,am.jsx)(Hm,{onClick:()=>{},disabled:!0,icon:xy,children:"Previous"}),(0,am.jsx)(Hm,{onClick:()=>{h.length>0&&(s(h[h.length-1]),a(Date.now()))},disabled:h.length<25||d,icon:_y,children:"Next"})]})]})]})}function ky(){const{docs:t,loading:n,error:r}=Xm(rg()),[s,i]=(0,e.useState)([]),[a,o]=(0,e.useState)(!0);(0,e.useEffect)(()=>{r&&um("ERROR","RevenueAssurance: Failed to fetch stock batches.",{error:r});(async()=>{o(!0);try{const e=await tg();i(e.filter(e=>"sale"===e.type)),um("DEBUG",`RevenueAssurance: Data fetch complete. Found ${e.length} sales records.`,{recordCount:e.length})}catch(e){um("ERROR","RevenueAssurance: Failed to fetch unified sales data.",{error:e.message})}finally{o(!1)}})()},[r]);const l=n||a;return(0,am.jsxs)(am.Fragment,{children:[(0,am.jsx)(Qm,{title:"Revenue Assurance",subtitle:"Track the profitability of each stock purchase batch."}),(0,am.jsx)(Km,{children:(0,am.jsx)("div",{className:"overflow-x-auto",children:(0,am.jsxs)("table",{className:"w-full text-left",children:[(0,am.jsx)("thead",{children:(0,am.jsxs)("tr",{className:"border-b bg-gray-50",children:[(0,am.jsx)("th",{className:"p-4 text-sm font-semibold",children:"Purchase Date"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold",children:"Quantity (kg)"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-right",children:"Expected Revenue"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-right",children:"Actual Revenue"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold text-center",children:"Deviation"}),(0,am.jsx)("th",{className:"p-4 text-sm font-semibold",children:"Progress"})]})}),(0,am.jsx)("tbody",{children:l?(0,am.jsx)("tr",{children:(0,am.jsx)("td",{colSpan:"6",className:"text-center p-8",children:"Loading batch data..."})}):t.map(e=>{const t=(e=>{const t=e.quantityKg*e.targetSalePricePerKg,n=s.filter(t=>t.batchId===e.id).reduce((e,t)=>e+t.revenue,0);return{expectedRevenue:t,actualRevenue:n,deviation:t>0?(n-t)/t*100:0,progress:(e.quantityKg-e.remainingKg)/e.quantityKg*100}})(e);return(0,am.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,am.jsx)("td",{className:"p-4",children:lg(e.purchaseDate)}),(0,am.jsxs)("td",{className:"p-4 font-medium",children:[e.quantityKg.toLocaleString()," kg"]}),(0,am.jsx)("td",{className:"p-4 text-right",children:og(t.expectedRevenue)}),(0,am.jsx)("td",{className:"p-4 text-right font-bold",children:og(t.actualRevenue)}),(0,am.jsxs)("td",{className:"p-4 text-center font-bold "+(t.deviation>=0?"text-green-600":"text-red-600"),children:[t.deviation.toFixed(1),"%"]}),(0,am.jsx)("td",{className:"p-4",children:(0,am.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,am.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${t.progress}%`}})})})]},e.id)})})]})})})]})}const Ny=()=>{const{user:t,loading:n}=cm(),[r,s]=(0,e.useState)("Dashboard"),i=e=>{um("INFO",`User navigated to ${e}`,{component:"App.js",view:e}),s(e)};if(n)return(0,am.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:"Loading Application..."});if(!t)return(0,am.jsx)(Wm,{});return(0,am.jsxs)("div",{className:"flex h-screen bg-gray-100 font-sans",children:[(0,am.jsx)(Bm,{activeView:r,setActiveView:i}),(0,am.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,am.jsx)($m,{activeView:r}),(0,am.jsx)(qm,{children:(()=>{const e={Dashboard:hg,FinancialStatements:mg,AssetAndLoan:Ng,TaxCompliance:Tg,PlantStatus:Ag,Inventory:Pg,Logistics:Lg,SalesAnalytics:Vg,CustomerHub:Qg,RevenueAssurance:ky,DailyLog:ry,ApprovalQueue:ay,UserManagement:ly,Configuration:hy,DataMigration:vy,AuditLog:by,TransactionHistory:Sy,AppLogViewer:wy}[r]||Jm;return(0,am.jsx)(e,{setActiveView:i})})()})]})]})};function Cy(){return(0,am.jsx)(dm,{children:(0,am.jsx)(lm,{children:(0,am.jsx)(Ny,{})})})}t.createRoot(document.getElementById("root")).render((0,am.jsx)(e.StrictMode,{children:(0,am.jsx)(Cy,{})}))})()})();
//# sourceMappingURL=main.7cf01775.js.map